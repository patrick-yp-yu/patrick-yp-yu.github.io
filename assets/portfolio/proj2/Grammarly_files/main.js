webpackJsonp([8],{100:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(53),i=n(301),s=n(204),a=n(77);!function(e){function t(e,t){var n={};try{n=JSON.parse(e)}catch(e){n={info:"unknown",status:e.message}}switch(n.info){case"too_big":return new c(i.MAX_FILE_SIZE,n.status,n.info,t.url);case"document not found":return new u(n.status,n.info,t.url);case"user not found":return new l(n.status,n.info,t.url);case"tracked":return new p(n.status,n.info,t.url);case"too many requests":return new h(n.status,n.info,t.url);default:return o.Ajax.mapToHTTPError(e,t)}}var n;!function(e){e[e.NOT_FOUND=404]="NOT_FOUND",e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS"}(n=e.HttpCodes||(e.HttpCodes={})),e.CLOSED_ERROR=new s.WSError({status:"closed",message:"client was closed from client side"});var c=function(e){function t(t,r,o,i){void 0===r&&(r="too_big"),void 0===o&&(o="Document is too big");var s=e.call(this,{code:n.BAD_REQUEST,message:o,url:i,status:r})||this;return s.maxSizeLimit=t,s.name="FileSizeOutOfRangeError",s}return r.__extends(t,e),t}(o.HTTPError);e.FileSizeOutOfRangeError=c;var u=function(e){function t(t,r,o){void 0===t&&(t="not_found"),void 0===r&&(r="Document doesn't exist");var i=e.call(this,{code:n.NOT_FOUND,message:r,url:o,status:t})||this;return i.name="DocumentNotFoundError",i}return r.__extends(t,e),t}(o.HTTPError);e.DocumentNotFoundError=u;var l=function(e){function t(t,r,o){void 0===t&&(t="error"),void 0===r&&(r="user not found");var i=e.call(this,{code:n.UNAUTHORIZED,message:r,url:o,status:t})||this;return i.name="UnauthorizedError",i}return r.__extends(t,e),t}(o.HTTPError);e.UnauthorizedError=l;var d=function(e){function t(t,r,o,i){void 0===r&&(r="bad_type"),void 0===o&&(o="Unsupported file type");var s=e.call(this,{code:n.BAD_REQUEST,message:o,url:i,status:r})||this;return s.originalFileName=t,s.name="UnsupportedFileTypeError",s}return r.__extends(t,e),t}(o.HTTPError);e.UnsupportedFileTypeError=d;var p=function(e){function t(t,r,o){void 0===t&&(t="error"),void 0===r&&(r="Document with tracked changes is not supported");var i=e.call(this,{code:n.BAD_REQUEST,message:r,url:o,status:t})||this;return i.name="TrackedChangesIsUnsupported",i}return r.__extends(t,e),t}(o.HTTPError);e.TrackedChangesIsUnsupported=p;var h=function(e){function t(t,r,o){void 0===t&&(t="error"),void 0===r&&(r="Too many requests");var i=e.call(this,{code:n.TOO_MANY_REQUESTS,message:r,url:o,status:t})||this;return i.name="TooManyRequestsError",i}return r.__extends(t,e),t}(o.HTTPError);e.TooManyRequestsError=h;var f=function(e){function t(t,n,r,o){void 0===n&&(n=0),void 0===r&&(r="connect_error"),void 0===o&&(o="Cannot connect");var i=e.call(this,{code:n,message:o,url:t,status:r})||this;return i.name="ConnectionError",i}return r.__extends(t,e),t}(o.HTTPError);e.ConnectionError=f;var g=function(e){function t(t,n,r,o){void 0===n&&(n="disconnected"),void 0===r&&(r="Cannot connect to DOX");var i=e.call(this,{status:n,message:r,code:t,url:o})||this;return i.name="WSDisconnectedOnInitError",i}return r.__extends(t,e),t}(s.WSError);e.WSDisconnectedOnInitError=g;var m=function(e){function t(t,n,r){void 0===t&&(t="too_big"),void 0===n&&(n="Message is too big, server rejected it");var o=e.call(this,{status:t,message:n,code:a.Reconnect.WsCodes.TOO_BIG,url:r})||this;return o.name="WSMessageIsTooBigError",o}return r.__extends(t,e),t}(s.WSError);e.WSMessageIsTooBigError=m;var _=function(e){function t(t,n,r,o,i){void 0===o&&(o="Disconnected after multiple retries");var s=e.call(this,{status:r,message:o,code:n,url:i})||this;return s.retriesMade=t,s}return r.__extends(t,e),t}(s.WSError);e.WSDisconnectedAfterMultipleRetries=_;var y=function(e){function t(t){return e.call(this,{code:a.Reconnect.WsCodes.GOING_AWAY,status:"closed",message:"timeout",url:t})||this}return r.__extends(t,e),t}(s.WSError);e.WSGoingAway=y;var v=function(e){function t(t,n){var r=e.call(this,{status:"closed",message:n,code:t})||this;return r.name="WSNotRetryableError",r}return r.__extends(t,e),t}(s.WSError);e.WSNotRetryableError=v,e.doxErrorMapper=t}(t.DoxErrors||(t.DoxErrors={}))},101:function(e,t,n){"use strict";function r(e){var t=c[e];if(void 0===t)throw new TypeError("Unknown alert group "+e);return t}Object.defineProperty(t,"__esModule",{value:!0});var o=n(582);t.AlertReplacement=o.AlertReplacement,t.AlertTransform=o.AlertTransform,t.AlertTransformPart=o.AlertTransformPart,t.createReplacement=o.createReplacement,t.createSimpleReplacement=o.createSimpleReplacement;var i=n(316);t.AlertExamples=i.AlertExamples,t.parseExamples=i.parseExamples;var s=n(1400);t.AlertPlagiarism=s.AlertPlagiarism,t.AlertPlagiarismReferenceWeb=s.AlertPlagiarismReferenceWeb,t.AlertPlagiarismReferencePublication=s.AlertPlagiarismReferencePublication,t.parsePlagiarism=s.parsePlagiarism;var a;!function(e){e.contextualSpelling="ContextualSpelling",e.grammar="Grammar",e.sentenceStructure="SentenceStructure",e.punctuation="Punctuation",e.style="Style",e.enhancement="Enhancement",e.plagiarism="Plagiarism",e.synonym="Synonyms"}(a=t.AlertGroup||(t.AlertGroup={}));var c={Spelling:a.contextualSpelling,ContextualSpelling:a.contextualSpelling,Grammar:a.grammar,SentenceStructure:a.sentenceStructure,Punctuation:a.punctuation,Style:a.style,Enhancement:a.enhancement,Plagiarism:a.plagiarism};t.alertGroupFromString=r},122:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(216);t.BaseComponent=r.BaseComponent,t.withContext=r.withContext,t.BaseComponentContext=r.BaseComponentContext;var o=n(306);t.BasePage=o.BasePage;var i=n(1388);t.Link=i.Link;var s=n(155);t.Router=s.Router;var a=n(311);t.DocumentLoaderContextImpl=a.DocumentLoaderContextImpl},123:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=n(125),i=n(309),s=n(3),a=n(312),c=n(312);t.FeaturesModel=c.FeaturesModel,t.DenaliFeatures=c.DenaliFeatures,t.CardFeatures=c.CardFeatures,t.Feature=c.Feature,t.FeatureAtom=c.FeatureAtom,t.NavigationBarFeatures=c.NavigationBarFeatures,t.ToolbarFeatures=c.ToolbarFeatures,t.DenaliPageVMFeatures=c.DenaliPageVMFeatures;var u=n(558);t.UserProfile=u.UserProfile,t.UserInstitution=u.UserInstitution,t.UserAccount=u.UserAccount,t.UserAccountOperationsModel=u.UserAccountOperationsModel,t.UserType=u.UserType;var l=s.BrowserInfo.getBrowserInfo().browser;t.UserGroups={EXTENSION_INSTALLED:"extension-"+l,DESKTOP_EDITOR_INSTALLED:"desktop_editor_used",FREEBIE_USER:"freebie",PREMIUM_CONVERSION:"premium-conversion"};var d=function(){function e(e,t,n,s,c,u,l,d,p,h,f,g){this._state=e,this._authApi=t,this._subscriptionApi=n,this._irbisApi=s,this._dapi=c,this._subscribeUrl=u,this._upgradeBaseUrl=l,this._browserType=d,this._browser=p,this._telemetry=h,this._router=f,this._appConfig=g,this._log=r.Monitoring.Logging.getLogger("model.account"),this.profile=this._state.view("userProfile"),this.subscription=new i.SubscriptionModelImpl(this._state.lens("subscription"),this._subscriptionApi,this._subscribeUrl,this._upgradeBaseUrl,this._browserType,this._telemetry,this._appConfig,this.profile.get().id),this.settings=new o.SettingsModelImpl(this._state.lens("settings"),this._state.lens("customFields"),this._dapi,this._state.lens("userProfile").lens("id")),this.features=new a.FeaturesModel(this._state.view("experiments"),this.subscription.state,this.profile,this.settings,this._state.view("institution"),this._browser,this._router,this._appConfig)}return e.prototype.areValidCredentials=function(e,t){var n=this;return this._authApi.login(e,t).then(function(e){return e&&!e.err}).catch(function(e){if(401===e.code)return n._log.warn("authError: areValidCredentials",e),!1;throw n._log.error("authError: areValidCredentials",e),e})},e.prototype.changeName=function(e){var t=this;return this._authApi.changeName(e).then(function(){return t._state.lens("userProfile").lens("fullName").set(e)}).catch(this._log.handler("authError: changeName").error)},e.prototype.changeEmail=function(e,t){var n=this;return this._authApi.changeEmail(e,t).then(function(){return n._state.lens("userProfile").lens("newEmail").set(e)}).catch(this._log.handler("authError: changeEmail").warn)},e.prototype.changePassword=function(e,t,n){return this._authApi.changePassword(e,t,n).catch(this._log.handler("authError: changePassword").warn)},e.prototype.deleteAccount=function(){return this._irbisApi.deleteAccount().catch(this._log.handler("irbisError: deleteAccount failed").warn)},e}();t.UserAccountModelImpl=d},124:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(100);t.DoxErrors=r.DoxErrors;var o=n(555);t.DoxDocument=o.DoxDocument;var i=n(557);t.DoxRequest=i.DoxRequest;var s=n(303);t.DoxRemoteDocument=s.DoxRemoteDocument;var a=n(304);t.DoxDocumentSettings=a.DoxDocumentSettings;var c=n(1379);t.DoxClient=c.DoxClient},125:function(e,t,n){"use strict";function r(e){return h.dialectType.is(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(114),i=n(181),s=n(14),a=n(23),c=n(54),u=n(7),l=n(6),d=n(3),p=n(76);t.isDialectString=r;var h;!function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return e.dapiProps.decode(t).mapLeft(i.failure).mapLeft(function(e){return l.Monitoring.Logging.getLogger("model.settings.parse").warn("fail",e),e}).getOrElse(e.empty)}catch(t){return l.Monitoring.Logging.getLogger("model.settings.parse").error("fail",t),e.empty}}function n(t){return e.dapiProps.encode(t)}e.empty={firstCall:!1,seenWelcome:!1,suppressedWelcome:!1,acceptedTermsVersion:"",dialectStrong:s.None,dialectWeak:s.None,banners:{dismiss:[],shown:[],later:[]},denaliLens:{},onboardingPassed:[],showExitNotification:!0,showSetGoalsLoader:!0,seenDenaliWelcome:!1,forcedDenaliUI:!1,forcedEditorTsDocuments:new Set};var r=d.IO.literalArray(["referral","no-referral","desktop-mac","desktop-windows","office-addin","safari-extension","firefox-extension","chrome-extension","edge-extension","campaign-end","proofit-cancelled","proofit-completed"]);e.possibleDialects=d.IO.literalArray(["american","british","canadian","australian"]),e.dialectType=d.IO.Type.literalUnion("dialect",e.possibleDialects);var a=d.IO.Type.literalUnion("banner",r),c=o.interface({dismiss:o.array(a),shown:o.array(a),later:d.IO.Type.fallback(o.array(o.interface({type:a,expire:o.number})),[])}),u=o.dictionary(o.string,o.partial({dismissAllCounter:o.number,important:o.boolean})),p=d.IO.Type.propetries({firstCall:d.IO.Type.withDefault(o.boolean,e.empty.firstCall),seenWelcome:d.IO.Type.withDefault(o.boolean,e.empty.seenWelcome),suppressedWelcome:d.IO.Type.withDefault(o.boolean,e.empty.suppressedWelcome),acceptedTermsVersion:d.IO.Type.withDefault(o.string,e.empty.acceptedTermsVersion),dialectStrong:d.IO.Type.option(e.dialectType),dialectWeak:d.IO.Type.option(e.dialectType),banners:d.IO.Type.fallback(c,e.empty.banners),denaliLens:d.IO.Type.fallback(u,e.empty.denaliLens),onboardingPassed:d.IO.Type.fallback(o.array(o.string),e.empty.onboardingPassed),showExitNotification:d.IO.Type.withDefault(o.boolean,e.empty.showExitNotification)},"","legacyProps"),h=d.IO.Type.propetries({seenDenaliWelcome:d.IO.Type.withDefault(o.boolean,e.empty.seenDenaliWelcome),showSetGoalsLoader:d.IO.Type.withDefault(o.boolean,e.empty.showSetGoalsLoader),forcedDenaliUI:d.IO.Type.withDefault(o.boolean,e.empty.forcedDenaliUI),forcedEditorTsDocuments:d.IO.Type.fallback(d.IO.Type.set(o.string),e.empty.forcedEditorTsDocuments)},"DN","namespacedProps");e.dapiProps=d.IO.Type.combineProperties([p,h]),e.parse=t,e.serialize=n}(h=t.UserSettings||(t.UserSettings={}));var f;!function(e){e[e.EditorTs=0]="EditorTs",e[e.Denali=1]="Denali"}(f=t.DocumentMode||(t.DocumentMode={}));var g=function(){function e(e,t,n,r){var o=this;this._userSettings=e,this._customFields=t,this._dapi=n,this._userId=r,this._log=l.Monitoring.Logging.getLogger("model.settings"),this.firstCall=this._userSettings.lens("firstCall"),this.dialect=this._userSettings.view(function(e){return e.dialectStrong.orElse(e.dialectWeak)}),this.dialectOrDefault=this.dialect.view(function(e){return e.fold(function(){return p.appConfig.defaultDialect},function(e){return e})}),this.seenWelcome=this._userSettings.lens("seenWelcome"),this.seenDenaliWelcome=this._userSettings.lens("seenDenaliWelcome"),this.suppressedWelcome=this._userSettings.lens("suppressedWelcome"),this.forcedDenaliUI=this._userSettings.lens("forcedDenaliUI"),this.acceptedTermsVersion=this._userSettings.lens("acceptedTermsVersion"),this.banners=this._userSettings.lens("banners"),this.denaliLens=this._userSettings.lens("denaliLens"),this.onboardingPassed=this._userSettings.lens("onboardingPassed"),this.showExitNotification=this._userSettings.lens("showExitNotification"),this.enableSetGoalsLoader=this._userSettings.lens("showSetGoalsLoader"),this.disableProofit=this._customFields.lens("disableProofit"),this.docForcedToEditorTsLens=function(e){return o._userSettings.lens("forcedEditorTsDocuments").lens(m(e))},this.getDocumentMode=function(e){return o.docForcedToEditorTsLens(e).view(function(e){return void 0!==e?f.EditorTs:f.Denali})}}return e.prototype._sync=function(e){var t=this;return this._dapi.save(e).then(function(){return y.write(t._userId.get(),h.serialize(t._userSettings.get()))}).catch(this._log.handler("dapiError: save failed",{data:e}).warn)},e.prototype._setProperty=function(e,t){var n=this;return void 0===t&&(t=!0),d.Async.modifyRemoteStateOptimistic(this._userSettings,d.ObjectUtils.modify(e),function(){return n._sync(h.serialize(e))},t)},e.prototype.firstCallDone=function(){var e=this;return this._setProperty({firstCall:!0},!1).catch(function(t){t instanceof a.TimeoutError?e._log.warn("Cannot set first call as done",t):e._log.error("Cannot set first call as done",t)})},e.prototype.setDialect=function(e){return this._setProperty({dialectStrong:s.Some(e)}).then(function(t){return e})},e.prototype.setDialectWeak=function(e){return this._setProperty({dialectWeak:s.Some(e)}).then(function(t){return e})},e.prototype.welcomeTourSeen=function(){var e=this;return this._setProperty({seenWelcome:!0},!1).catch(function(t){return e._log.warn("Cannot mark welcome tour as looked",t)})},e.prototype.denaliWelcomeTourSeen=function(){var e=this;return this._setProperty({seenDenaliWelcome:!0},!1).catch(function(t){return e._log.warn("Cannot mark denali welcome tour as seen",t)})},e.prototype.acceptTerms=function(e){return this._setProperty({acceptedTermsVersion:e},!1).catch(this._log.handler("Cannot mark terms as accepted").error)},e.prototype.updateBanners=function(e){var t=this;return this._setProperty({banners:e}).catch(function(e){e instanceof a.TimeoutError?t._log.warn("Cannot update banners state",e):t._log.error("Cannot update banners state",e)})},e.prototype.toggleMarkAsImportant=function(e,t){var n=Object.assign({},this.denaliLens.get());return n[e]=Object.assign({},n[e],{important:t}),this._setProperty({denaliLens:Object.assign({},n)},!1)},e.prototype.dismissAll=function(e){var t=Object.assign({},this.denaliLens.get());return t[e]=Object.assign({},t[e],{dissmissAllCounter:Math.sqrt(function(e){return e?e*e:1}(t[e]&&t[e].dismissAllCounter||0)+1)}),this._setProperty({denaliLens:Object.assign({},t)},!1)},e.prototype.updateOnboardingPassed=function(e){var t=new Set(this._userSettings.get().onboardingPassed),n=t.size;return e.forEach(function(e){return t.add(e)}),n===t.size?Promise.resolve():this._setProperty({onboardingPassed:Array.from(t)},!1)},e.prototype.updateExitNotification=function(e){var t=this;return this._setProperty({showExitNotification:e},!1).catch(function(e){t._log.warn("Cannot set showExitNotification",e)})},e.prototype.updateSetGoalsLoader=function(e){var t=this;return this._setProperty({showSetGoalsLoader:e},!1).catch(function(e){t._log.warn("Cannot set showExitNotification",e)})},e.prototype.setDocumentMode=function(e,t){var n=t===f.Denali?void 0:e;return this.docForcedToEditorTsLens(e).set(n),this._setProperty({forcedEditorTsDocuments:this._userSettings.lens("forcedEditorTsDocuments").get()})},e}();t.SettingsModelImpl=g;var m=function(e){return u.Lens.create(function(t){return t.has(e)?e:void 0},function(t,n){var r=new Set(n);return void 0!==t?r.add(t):r.delete(e),r})},_=""+p.appConfig.userSettingsPrefix+p.appConfig.userSettingsVersion+"-",y=function(){function e(){}return e.read=function(e){try{var t=""+_+e;return c.Properties.of(JSON.parse(d.LocalStorage.readProperties(t)[t]))}catch(e){return c.Properties.of({})}},e.write=function(e,t){d.LocalStorage.writeProperties(c.Properties.of((n={},n[""+_+e]=JSON.stringify(t),n)));var n},e}();t.LocalStorageUserSettings=y;!function(e){var t=function(){function e(){this.seenDenaliWelcome=u.Atom.create(!1),this.enableSetGoalsLoader=u.Atom.create(!0),this.denaliLens=u.Atom.create({}),this.onboardingPassed=u.Atom.create([]),this.showExitNotification=u.Atom.create(!0)}return e.prototype.updateSetGoalsLoader=function(e){return Promise.resolve()},e.prototype.toggleMarkAsImportant=function(e,t){return Promise.resolve()},e.prototype.dismissAll=function(e){return Promise.resolve()},e.prototype.updateOnboardingPassed=function(e){return Promise.resolve()},e.prototype.updateExitNotification=function(e){return Promise.resolve()},e.prototype.denaliWelcomeTourSeen=function(){return Promise.resolve()},e}();e.Mock=t}(t.DenaliSettingsModel||(t.DenaliSettingsModel={}))},1368:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(24);!function(e){e.empty={hovered:void 0,disabled:void 0,active:void 0},e.withName=function(e,t){return r.__assign({},e,{name:t})},e.emptyWithName=function(t){return e.withName(e.empty,t)},e.GroupedContextTypes={name:o.string},e.HoveredContextTypes={hovered:o.object},e.DisabledContextTypes={disabled:o.object},e.ActiveContextTypes={active:o.object},e.contextTypes=Object.assign({},e.GroupedContextTypes,e.HoveredContextTypes,e.DisabledContextTypes,e.ActiveContextTypes)}(t.ElementState||(t.ElementState={}))},1369:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(7),i=n(13),s=n(23);!function(e){e.EMPTY=s.Subscription.EMPTY}(t.Subscription||(t.Subscription={}));var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._el=null,t}return r.__extends(t,e),t.prototype.unsubscribe=function(){this.subscription&&this.subscription.unsubscribe(),this.props.onUnmount&&this.props.onUnmount()},t.prototype.componentDidMount=function(){this.props.onMount&&(this.subscription=this.props.onMount(this._el))},t.prototype.componentDidUpdate=function(){this.props.remountOnUpdate&&this.props.onMount&&(this.unsubscribe(),this.subscription=this.props.onMount(this._el))},t.prototype.componentWillUnmount=function(){this.unsubscribe()},t.prototype.render=function(){var e=this,t=this.props,n=t.children,r=t.className;return n&&n.length>1||r?i.createElement(o.F.div,{mount:function(t){return e._el=t},className:r},n):i.Children.only(this.props.children)},t}(i.Component);t.Lifecycle=a},1370:function(e,t,n){"use strict";function r(e){switch(e){case"webeditor":return n(549).textResources;case"desktopeditor":return n(1372).textResources;default:return i.assertNever(e)}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1371);t.TextResources=o.TextResources;var i=n(3);t.getTextResources=r},1371:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24);!function(e){e.ContextTypes={textResources:r.object}}(t.TextResources||(t.TextResources={}))},1372:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(209),o=n(549);t.textResources=r.merge(o.textResources,{base:{tooltipDownloadProofreadVersion:"Export proofread version",tooltipDownloadOriginalVersion:"Export original version",tooltipDownload:"Export document",uploadText:"Import",tooltipUploadElementInput:"Click here to import document",menuDownloadText:"Export",documentPlaceholderText:"Import a document to save original formatting.",modalUploadingDocumentText:"Importing document",notificationUploadFileText:"Import a file in one of the following formats"},denali:{uploadMenuItem:"Import document",uploadDropZone:"Drop a text file here to import",downloadMenuItem:"Export",uploadNotificationTitle:"The document imported successfully",placeholder:{upload:"Import a document to save original formatting."}}})},1373:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1374:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(6),i=n(14),s=n(43),a=n(552),c=n(320),u={kind:"finish",revision:-1,score:i.None,dialect:"undefined"},l=function(){function e(e){var t=this;this._log=o.Monitoring.Logging.getLogger("coreclients.capi_test",o.Logging.LogLevel.TRACE),this._waitersList=new Map,this._closed=!1,this._idToRev=new Map,this._finishedRevs=new Map,this._onAccept=function(e){if(t._log.debug("accepted message",e),c.ChangesQueue.isChange(e)){var n=t._finishedRevs.get(e.rev);void 0!==n?t._successRevision(e.id,n):e.change.isEmpty?t._successRevision(e.id,u):t._idToRev.set(e.rev,e.id)}},this._onDrop=function(e,n){return e.forEach(function(e){return t._failRevision(e,n)})},this._onFinish=function(e){var n=t._idToRev.get(e.revision);void 0!==n?t._successRevision(n,e):t._finishedRevs.set(e.revision,e)},this._storeId=function(e){var n=t._waitersList.get(e);if(void 0!==n)return n.future();var r=i.FutureMaker.empty();return t._waitersList.set(e,r),r.future()},this._successRevision=function(e,n){var r=t._waitersList.get(e);s.invariant(void 0!==r,"onsuccess waiter should be defined for every queued message"),r.success(n),t._waitersList.delete(e),t._idToRev.delete(n.revision),t._finishedRevs.delete(n.revision)},this._failRevision=function(e,n){if(t._log.debug("dropped message",e),c.ChangesQueue.isChange(e)){var r=t._waitersList.get(e.id);s.invariant(void 0!==r,"onfail waiter should be defined for every queued message"),r.failure(new Error("message dropped because of "+(n||"unknown reason"))),t._waitersList.delete(e.id),t._idToRev.delete(e.rev)}};var n=function(n){t._closed||(t._onAccept(n.message),e.handler&&e.handler.onQueueMsgAccepted&&e.handler.onQueueMsgAccepted(n))},l=function(n){t._closed||(t._onDrop(n.messages,n.reason),e.handler&&e.handler.onQueueMsgDropped&&e.handler.onQueueMsgDropped(n))},d=function(n){t._closed||(t._onFinish(n),e.handler&&e.handler.onFinish&&e.handler.onFinish(n))},p={onQueueMsgAccepted:n,onQueueMsgDropped:l,onFinish:d};this.client=new a.CAPIClientImpl(r.__assign({},e,{handler:Object.assign({},e.handler,p)}))}return e.prototype.setText=function(e){this._clear();var t=this.client.setText(e);return this._storeId(t)},e.prototype.pushChanges=function(e){var t=this.client.pushChanges(e);return this._storeId(t)},e.prototype.close=function(){return this._clear(),this._closed=!0,this.client.close()},e.prototype.closeConnection=function(e,t){void 0===e&&(e=1001),s.invariant(!!this.client._conn,"DoxRemoteDocument should have _conn private field OR please, use propper field name for connection"),this.client._conn._ws.close(e,t)},e.prototype._clear=function(){this._waitersList.clear(),this._idToRev.clear(),this._finishedRevs.clear()},e}();t.TestCAPIClientImpl=l},1375:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1376:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),o=function(){function e(e,t){this._url=e,this._fetch=t,this._ajax=r.Ajax.factory(this._fetch,"omit")}return e.prototype.checkOrigin=function(){return this._ajax(r.RequestBuilder.get(this._url,"/origin")).then(function(e){return{isOkay:"origin okay"===e.message,url:e.origin}})},e.targetTag="diagnostics",e}();t.Diagnostics=o},1377:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),o=n(68),i=function(){function e(e,t,n,i,s){void 0===i&&(i="web");var a=this;this._url=e,this._fetch=t,this._fingerprints=n,this._clientType=i,this._token=s,this._headersAppender=o.createHeadersAppender({"X-Client-Type":function(){return a._clientType},"X-CSRF-Token":this._fingerprints.csrfToken}),this._cookiesAppender=o.createCookiesAppender({grauth:function(){return a._token},"csrf-token":this._fingerprints.csrfToken}),this._ajax=r.Ajax.factory(this._fetch,void 0,r.RequestBuilder.Extender.compose(this._headersAppender,this._cookiesAppender))}return e.prototype.get=function(){return this._ajax(r.RequestBuilder.get(this._url,"/dict"))},e.prototype.delete=function(e){return this._ajax(r.RequestBuilder.del(this._url,"/dict").pathParam(e),r.Ajax.toVoid)},e.prototype.add=function(e){return this._ajax(r.RequestBuilder.post(this._url,"/dict").json({word:e}),r.Ajax.toVoid)},e.targetTag="capi",e}();t.Dictionary=i},1378:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(157),o=function(){function e(){}return e.diffAsChanges=function(e,t){var n=(new r.Delta).insert(e),o=(new r.Delta).insert(t);return r.Change.delta(n.diff(o),e.length)},e}();t.Diff=o},1379:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),o=n(100),i=n(557),s=n(1381),a=n(303),c=n(555),u=n(68),l="1",d=function(){function e(e,t,n,i,s){void 0===i&&(i="web");var a=this;this._url=e,this._fetch=t,this._fingerprints=n,this._clientType=i,this._token=s,this._headersAppender=u.createHeadersAppender({"X-API-Version":l,"X-Client-Type":function(){return a._clientType},"X-CSRF-Token":this._fingerprints.csrfToken}),this._cookiesAppender=u.createCookiesAppender({grauth:function(){return a._token},"csrf-token":this._fingerprints.csrfToken}),this._ajax=r.Ajax.factory(this._fetch,void 0,r.RequestBuilder.Extender.compose(this._headersAppender,this._cookiesAppender),o.DoxErrors.doxErrorMapper),this._wsBaseUrl=this._getWsBaseUrl(e)}return e.prototype._getWsBaseUrl=function(e){var t=new RegExp("http(s?)://([^/]+)/?.*$"),n=t.exec(e);if(null===n)throw new Error("Cannot parse ws url");return"ws"+n[1]+"://"+n[2]},e.prototype._getWsUrl=function(e){var t=null===e||void 0===e?"/documents/ws":"/documents/"+e+"/ws";return""+this._wsBaseUrl+t},Object.defineProperty(e.prototype,"clientType",{set:function(e){this._clientType=e},enumerable:!0,configurable:!0}),e.prototype.listDocuments=function(t,n,r){return void 0===t&&(t=e.unlimited),void 0===n&&(n=e.OrderBy.Any),void 0===r&&(r=!1),this.searchDocument(i.DoxRequest.Search.all(),t,n,r)},e.prototype.openDocumentsWS=function(e){return s.RemoteDocumentsList.create(this._getWsUrl(),e)},e.prototype.openDocumentById=function(e,t,n,r){return void 0===r&&(r=500),a.DoxRemoteDocument.create(this._getWsUrl(e),t,n,r)},e.prototype.searchDocument=function(t,n,o,i){void 0===n&&(n=e.unlimited),void 0===o&&(o=e.OrderBy.Any),void 0===i&&(i=!1);var s=r.RequestBuilder.get(this._url,"/documents").queryParam("search",t.toSearchString()).queryParam("limit",String(n)).queryParam("firstCall",String(i));return this._ajax(s).then(function(e){return e.map(function(e){return new c.DoxDocument(e)})})},e.prototype.createDocument=function(e){var t=e._getHttpRequestBuilder().url(this._url,"/documents").method("post");return this._ajax(t).then(function(e){return new c.DoxDocument(e)})},e.prototype.downloadOriginal=function(e,t){void 0===t&&(t=!0);var n=r.RequestBuilder.join(this._url,"/documents",encodeURIComponent(e),"download")+(t?"":"?no_tracking");return this._ajax(r.RequestBuilder.get(n),r.Ajax.parseBlobResponse)},e.prototype.url=function(){return this._url},e.prototype.downloadProofread=function(e){var t=r.RequestBuilder.join(this._url,"/documents",encodeURIComponent(e),"proofread");return this._ajax(r.RequestBuilder.get(t),r.Ajax.parseBlobResponse)},e.prototype.deleteDocumentById=function(e){var t=r.RequestBuilder.del(this._url,"/documents").pathParam(e);return this._ajax(t,r.Ajax.toVoid)},e.prototype.restoreDocumentById=function(e){var t=r.RequestBuilder.post(this._url,"/documents",encodeURIComponent(e),"restore");return this._ajax(t,r.Ajax.toVoid)},e.prototype.generateReport=function(e,t,n){var o=n.headerTemplate,i=n.footerTemplate,s=n.format,a=n.width,c=n.height,u=n.marginTop,l=n.marginRight,d=n.marginBottom,p=n.marginLeft,h=r.RequestBuilder.join(this._url,"/documents",encodeURIComponent(e),"report");return this._ajax(r.RequestBuilder.post(h).json({html:t,header_template:o,footer_template:i,format:s,width:a,height:c,margin_top:u,margin_right:l,margin_bottom:d,margin_left:p}),r.Ajax.parseBlobResponse)},e.targetTag="dox",e.unlimited=0,e}();t.DoxClient=d,function(e){!function(e){e[e.Updated=0]="Updated",e[e.Created=1]="Created",e[e.Any=2]="Any"}(e.OrderBy||(e.OrderBy={}))}(d=t.DoxClient||(t.DoxClient={})),t.DoxClient=d},1380:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);!function(e){var t=function(){function e(e){this.id=e}return e}();e.Base=t;var n=function(e){function t(t,n,r,o,i,s){var a=e.call(this,t)||this;return a.id=t,a.cl=n,a.rev=r,a.doc_len=o,a.deltas=i,a.revAfterApply=s,a.op="patch",a}return r.__extends(t,e),t}(t);e.PatchMessage=n;var o=function(e){function t(t,n){var r=e.call(this,t)||this;return r.id=t,r.vsn=n,r.op="vsn",r}return r.__extends(t,e),t}(t);e.VersionMessage=o;var i=function(e){function t(t,n,r,o){var i=e.call(this,t)||this;return i.id=t,i.title=n,i.errors=r,i.extra_params=o,i.op="update_document_metadata",i}return r.__extends(t,e),t}(t);e.UpdateDocumentMetadata=i;var s=function(e){function t(t){var n=e.call(this,t)||this;return n.id=t,n.op="proofit_turnaround_options",n}return r.__extends(t,e),t}(t);e.ProofitOptionsMessage=s;var a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.id=t,r.turnaround=n,r.op="proofit_create_job",r}return r.__extends(t,e),t}(t);e.ProofitPlaceOrderMessage=a}(t.Message||(t.Message={}))},1381:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(3),i=n(100),s=n(303),a=n(556),c=n(77),u=n(6),l=function(e){function t(n,r,s,l){var d=e.call(this,n)||this;return d._failHandler=s,d._handler=new t.DefaultHandler(l,u.Monitoring.Logging.getLogger("dox.remote_list")),d._disconnectHandler=function(e,t,n){var r=c.Reconnect.getReconnectAction(e,{canGoIdle:!0,isInitialized:!0});return d._handler.disconnectHandler(e,t,n,"idle"===r?"backOffReconnect":r)},d._fsm.on(a.States.CLOSED,function(e){var t=e.args?e.args:i.DoxErrors.CLOSED_ERROR;d._failHandler&&d._failHandler(t)}),d._fsm.event(a.Events.CONNECT).then(function(){return r(d)}).catch(s),o.registerDebugHelper("closeDoxListSocket",function(e,t){void 0===e&&(e=1e3),d._conn._ws.close(e,t)}),d}return r.__extends(t,e),t.create=function(e,n){return new Promise(function(r,o){return new t(e,r,o,n)})},t.prototype.isInitialized=function(){return!0},t.prototype._handleMessage=function(e){return r.__awaiter(this,void 0,void 0,function(){var t;return r.__generator(this,function(n){switch(this._log.trace("<<< ",{message:e}),e.op){case"document_metadata_changed":this._handleMetaChangeMessage(e);break;case"mongodb_change":break;default:t=e,this._log.warn("Never",{message:t})}return[2]})})},t.prototype._handleMetaChangeMessage=function(e){var t=s.DoxRemoteDocument.Meta.parse(e);this._handler.metadataChangeHandler(String(e.id),t)},t}(a.Remote);t.RemoteDocumentsList=l,function(e){var t=function(){function e(e,t){this._handler=e,this._logger=t,this.metadataChangeHandler=this._handler.metadataChangeHandler||o.noop,this.disconnectHandler=this._handler.disconnectHandler||c.Reconnect.getDefaultReconnect(this._logger,c.Reconnect.ClientType.dox)}return e}();e.DefaultHandler=t}(l=t.RemoteDocumentsList||(t.RemoteDocumentsList={})),t.RemoteDocumentsList=l},1382:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(890);!function(e){function t(e){r.saveAs(e.data,e.title)}e.saveToFS=t}(t.RawFile||(t.RawFile={}))},1383:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=n(181),i=n(114),s=n(53),a=n(68),c=n(68),u=function(){function e(e,t,n,o){var i=this;this._url=e,this._fetch=t,this._fingerprints=n,this._token=o,this._cookiesAppender=a.createCookiesAppender({grauth:function(){return i._token},"csrf-token":this._fingerprints.csrfToken}),this._headersAppender=c.createHeadersAppender({"X-CSRF-Token":this._fingerprints.csrfToken}),this._ajax=s.Ajax.factory(this._fetch,void 0,s.RequestBuilder.Extender.compose(this._headersAppender,this._cookiesAppender)),this._log=r.Monitoring.Logging.getLogger("coreclients.institution")}return e.prototype.getInfo=function(){var e=s.RequestBuilder.get(this._url,"api/institution");return this._ajax(e).then(this._parseInstitutionInfo)},e.prototype._parseInstitutionInfo=function(t){var n=this;return void 0===t?(this._log.warn("failed to parse institution info: empty payload"),e.emptyInfo):e.IOType.decode(t).mapLeft(o.failure).fold(function(t){return n._log.warn("failed to parse institution info: incorrect payload",t),e.emptyInfo},function(e){return e})},e.targetTag="institution",e.IOType=i.interface({id:i.number,name:i.string,plagiarismDisabled:i.boolean,scoreDisabled:i.boolean,licenseDiscountinued:i.boolean,quickReplacement:i.boolean,fullCards:i.boolean,proofit:i.boolean,domainValidation:i.boolean,admin:i.boolean}),e.emptyInfo={id:-1,name:"",plagiarismDisabled:!1,scoreDisabled:!1,licenseDiscountinued:!1,quickReplacement:!1,fullCards:!1,proofit:!1,domainValidation:!1,admin:!1},e}();t.Institution=u},1384:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),o=n(68),i=function(){function e(e,t,n,i){var s=this;this._url=e,this._fetch=t,this._fingerprints=n,this._token=i,this._headersAppender=o.createHeadersAppender({"X-CSRF-Token":this._fingerprints.csrfToken}),this._cookiesAppender=o.createCookiesAppender({grauth:function(){return s._token},"csrf-token":this._fingerprints.csrfToken}),this._ajax=r.Ajax.factory(this._fetch,void 0,r.RequestBuilder.Extender.compose(this._headersAppender,this._cookiesAppender))}return e.prototype.deleteAccount=function(){var e=r.RequestBuilder.del(this._url,"/api/user");return this._ajax(e,r.Ajax.toVoid)},e.targetTag="irbis",e}();t.Irbis=i},1385:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(53),i=n(43),s=n(68),a=function(){function e(e,t,n,r){var i=this;this._url=e,this._fetch=t,this._fingerprints=n,this._token=r,this._headersAppender=s.createHeadersAppender({"X-CSRF-Token":this._fingerprints.csrfToken}),this._cookiesAppender=s.createCookiesAppender({grauth:function(){return i._token},"csrf-token":this._fingerprints.csrfToken}),this._ajax=o.Ajax.factory(this._fetch,void 0,o.RequestBuilder.Extender.compose(this._headersAppender,this._cookiesAppender))}return e.prototype.getStatus=function(){var e=o.RequestBuilder.get(this._url);return this._ajax(e)},e.prototype.cancelSubscription=function(){var e=o.RequestBuilder.post(this._url,"/cancel");return this._ajax(e,o.Ajax.toVoid)},e.prototype.renewSubscription=function(){var e=o.RequestBuilder.post(this._url,"/renew");return this._ajax(e,o.Ajax.toVoid)},e.prototype.ackPremiumConversion=function(){var e=o.RequestBuilder.post(this._url,"/ack-premium-conversion");return this._ajax(e,o.Ajax.toVoid)},e.prototype.generateTokenCreditCard=function(){var e=o.RequestBuilder.post(this._url,"/token/card");return this._ajax(e,o.Ajax.parseJSON)},e.prototype.getTokenRequest=function(e){var t=this;return i.retryWithDelay(function(){return r.__awaiter(t,void 0,void 0,function(){var t,n;return r.__generator(this,function(r){switch(r.label){case 0:return[4,this._tokenRequest(e)];case 1:if(!(t=r.sent()))throw new i.RetryError("empty response");if(n=JSON.parse(t),!n.token)throw new i.RetryError("empty token");return[2,n.token]}})})})},e.prototype.getPaypalRedirectPageRequest=function(e){var t=this;return i.retryWithDelay(function(){return r.__awaiter(t,void 0,void 0,function(){var t,n;return r.__generator(this,function(r){switch(r.label){case 0:return[4,this._tokenRequest(e)];case 1:if(!(t=r.sent()))throw new i.RetryError("empty response");if(n=JSON.parse(t),!n.paypalRedirectPage)throw new i.RetryError("empty paypalRedirectPage");return[2,n.paypalRedirectPage]}})})})},e.prototype._tokenRequest=function(e){var t=o.RequestBuilder.get(this._url,"/token/request").pathParam(e);return this._ajax(t,o.Ajax.parseText)},e.prototype.getAvailablePlans=function(){var e=o.RequestBuilder.get(this._url,"/pricing");return this._ajax(e)},e.prototype.changePlan=function(e){var t=o.RequestBuilder.post(this._url,"/set-plan").pathParam(e);return this._ajax(t,o.Ajax.toVoid)},e.prototype.subscribeCard=function(e,t){var n=o.RequestBuilder.post(this._url,"/subscribe-card").formParam("nonce",e);return t&&n.formParam("billingZip",t),this._ajax(n,o.Ajax.toVoid)},e.prototype.subscribeCardSandbox=function(e){void 0===e&&(e="1");var t=o.RequestBuilder.post(this._url,"/subscribe-card").formParam("planId",e).formParam("nonce","fake-valid-nonce").formParam("sessionId","test-session").formParam("billingZip","12345");return this._ajax(t,o.Ajax.toVoid)},e.prototype.updateCreditCard=function(e,t){var n=o.RequestBuilder.post(this._url,"/update-card").formParam("nonce",e);return t&&n.formParam("billingZip",t),this._ajax(n,o.Ajax.toVoid)},e.prototype.subscribePaypal=function(e){var t=o.RequestBuilder.post(this._url,"/token/paypal").formParam("nonce",e);return this._ajax(t,o.Ajax.toVoid)},e.prototype.generateTokenPaypal=function(e){var t=e.cancelUrl,n=e.returnUrl,r=o.RequestBuilder.post(this._url,"/token/paypal").formParam("cancelUrl",t).formParam("returnUrl",n);return this._ajax(r,o.Ajax.parseJSON)},e.prototype.updatePaypal=function(e){var t=o.RequestBuilder.post(this._url,"/update-paypal").formParam("payPalToken",e);return this._ajax(t,o.Ajax.toVoid)},e.prototype.downloadBillingReceipts=function(){var e=o.RequestBuilder.get(this._url,"/receipt");return this._ajax(e,o.Ajax.parseBlobResponse)},e.targetTag="subscription",e}();t.SubscriptionClient=a},1386:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(13),i=n(36),s=n(216),a=n(75),c=n(122),u=n(7),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.getChildContext=function(){var e=this.props.model,t=e.telemetry,n=e.gnarSpec,r=e.platformInfo,o=e.notifications,l=e.tooltip;return{appRouter:this.props.router,appConfig:this.props.config,textResources:a.getTextResources(i.isDesktopEditor(r.browser)?"desktopeditor":"webeditor"),telemetry:t,gnarSpec:n,pageId:"home",notifications:o,tooltip:l,screen:new s.ScreenContextImpl,documentLoader:new c.DocumentLoaderContextImpl,visibleOverlays:u.Atom.create(new Set)}},t.prototype.render=function(){return o.Children.only(this.props.children)},t.childContextTypes=s.baseComponentContextTypes,t}(o.Component);t.ContextAppender=l},1387:function(e,t,n){"use strict";function r(e,t){var n=a.Monitoring.Logging.getLogger("config.parser");return t.flatMap(function(e){return o.Try.of(function(){return JSON.parse(e)}).recover(n.handler("Parse error of the provided JSON config",{config:e}).info).toOption()}).fold(function(){return e},function(t){return l.decode(t).mapLeft(s.failure).mapLeft(function(e){return n.info("Validation error of the provided JSON config",{config:t,error:e})}).fold(function(){return e},function(t){return n.info("Load app with custom config",t),c.merge(e,t)})})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(14),i=n(114),s=n(181),a=n(6),c=n(550),u=i.refinement(i.string,function(e){return/^(https?|wss):\/\/(\w|\d|-|\/|\.|\?|\=|\_)*(:(\d)*)?$/.test(e)},"HttpString"),l=i.partial({api:i.partial({authUrl:u,capiApiUrl:u,capiWsUrl:u,crashLogUrl:u,dapiUrl:u,doxUrl:u,felogUrl:u,gnarApi:i.partial({url:u}),institutionUrl:u,irbisUrl:u,onlineTestUrl:u,proofitResultUrl:u,wsTest:u}),desktop:i.partial({mac:i.partial({infoURL:u,installURL:u}),windows:i.partial({infoURL:u,installURL:u})}),edu:i.partial({adminPanelURL:u}),extension:i.partial({chrome:i.partial({infoURL:u,installURL:u}),firefox:i.partial({iconURL:u,infoURL:u,installURL:u}),safari:i.partial({installURL:u})}),funnel:i.partial({accountDeleted:u,mainPage:u,resetPassword:u,signin:u,signup:u,subscribe:u,upgrade:u}),officeAddIn:i.partial({infoURL:u,installURL:u}),support:i.partial({connectionTroubleshooting:u,contact:u,diagnosticTestPath:u,documentAcceptTrackedChanges:u,email:u,emailExistsKBUrl:u,login:u,mainPage:u,newRequest:u,phoenixSupportUrl:u,phoenixWritingHelpUrl:u})});t.createConfig=r},1388:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(13),i=n(24),s=n(7),a=n(155),c=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){if(t.props.onClick&&t.props.onClick(e),!e.defaultPrevented&&0===e.button&&!t.props.target&&!c(e)){e.preventDefault();var n=t.props.destination;t.context.appRouter.navigate(n)}},t}return r.__extends(t,e),t.prototype.componentWillMount=function(){if(!(this.context.appRouter instanceof a.Router.Impl||this.context.appRouter instanceof a.Router.DummyImpl))throw new TypeError("No router or invalid router supplied to Link.\n        It should be the editor-router and should come from the context.")},t.prototype.render=function(){var e=this.props,t=e.destination,n=e.className,i=e.activeClassName,a=e.children,c=r.__rest(e,["destination","className","activeClassName","children"]),u=this.context.router.history.createHref(t),l=this.context.appRouter.isActive(t);return o.createElement(s.F.a,r.__assign({},r.__assign({href:u},s.classes(n,l.view(function(e){return e&&i})),c),{onClick:this.handleClick}),a)},t.contextTypes=Object.assign({router:i.shape({history:i.shape({push:i.func.isRequired,replace:i.func.isRequired,createHref:i.func.isRequired}).isRequired}).isRequired},a.Router.ContextTypes),t}(o.Component);t.Link=u},1389:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(13),i=n(7),s=n(76),a=n(596),c=n(310),u=n(568),l=n(155),d=n(1390),p=n(1386),h=n(36),f=n(1387),g=n(306),m=n(3),_=n(385),y=new l.Router.Impl,v=f.createConfig(s.appConfig,y.query.get("config")),b=a.defaultModel(v,y),w=d.routesMap(b),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._getContent=function(e){return function(t){return m.Async.isOk(t)?e():m.Async.isError(t)||m.Async.isFatal(t)?o.createElement(u.Error500Page,null):o.createElement(g.BasePage.PageWrapper,null,o.createElement(c.Spinner,{className:_.spinner}))}},t}return r.__extends(t,e),t.prototype.render=function(){var e=this;return o.createElement(l.Router.Wrapper,{routesMap:w,renderer:function(t,n){var s=t.match;return n.private&&(b.authentication.ensureAuthenticated(),b.authentication.status.filter(m.Async.isOk).first().subscribe(function(){b.apis.dox.clientType=b.userAccount.features.denali.enabled?"denali_editor":"web"})),o.createElement(p.ContextAppender,r.__assign({},{model:b,router:y,config:v}),n.private?o.createElement(i.F.div,r.__assign({},i.classes(h.isDesktopEditor(b.platformInfo.browser)&&_.desktopEditorPreventSelection)),b.authentication.status.view(e._getContent(function(){return d.globalExperiment(b,y).getOrElseL(function(){return n.component(s.params)})}))):n.component(s.params))}})},t}(o.Component);t.Main=E},1390:function(e,t,n){"use strict";function r(e,t){var n=b.RxUtils.promiseToStream(e).switchMap(function(e){return e.fold(function(){return l.Observable.of(c.createElement(_.Spinner,{className:E.spinner})).delay(50)},function(e){return l.Observable.of(e.fold(function(e){return p.Monitoring.Logging.getLogger("routes.loader").fatal("Fail on component load",e),c.createElement(f.Error500Page,null)},t))})});return c.createElement(v.BasePage.PageWrapper,null,n)}function o(e){return{documents:m.Router.bindComponent(m.Router.routes.documents,function(){return r(function(){return new Promise(function(e){return n.e(0).then(function(t){return e(n(1454))}.bind(null,n)).catch(n.oe)})},function(t){return c.createElement(t.DocumentsPage,{model:e})})}),profile:m.Router.bindComponent(m.Router.routes.profile,function(){return r(function(){return new Promise(function(e){return n.e(0).then(function(t){return e(n(1456))}.bind(null,n)).catch(n.oe)})},function(t){return c.createElement(t.ProfilePage,{model:e})})}),subscription:m.Router.bindComponent(m.Router.routes.subscription,function(){return r(function(){return new Promise(function(e){return n.e(0).then(function(t){return e(n(1457))}.bind(null,n)).catch(n.oe)})},function(t){return e.userAccount.features.isFree?c.createElement(C,{destination:m.Router.routes.free.href({})}):c.createElement(t.SubscriptionPage,{model:e})})}),apps:m.Router.bindComponent(m.Router.routes.apps,function(){return r(function(){return new Promise(function(e){return n.e(0).then(function(t){return e(n(1452))}.bind(null,n)).catch(n.oe)})},function(t){return c.createElement(t.AppsPage,{model:e})})}),new_document:m.Router.bindComponent(m.Router.routes.new_document,function(){return c.createElement(d.F.div,null,b.RxUtils.promiseToStream(function(){return e.documentsPage.actions.createDocument()}).map(function(e){return e.fold(function(){return c.createElement(_.Spinner,{className:E.spinner})},function(e){return e.map(function(e){return e.id.toString()}).fold(function(e){return p.Monitoring.Logging.getLogger("routes").fatal("Fail create new document",e),c.createElement(f.Error500Page,null)},function(e){return c.createElement(C,{destination:m.Router.routes.editor.href({docId:e})})})})}))}),editor:m.Router.bindComponent(m.Router.routes.editor,function(t){var o=t.docId;return e.userAccount.features.denali.isDenaliDocument(o).get()?c.createElement(C,{destination:m.Router.routes.denali_editor.href({docId:o})}):(e.apis.dox.clientType="web",r(function(){return n.e(3).then(n.bind(null,1458))},function(t){return c.createElement(t.EditorPage,{model:e,docId:o})}))}),denali_editor:m.Router.bindComponent(m.Router.routes.denali_editor,function(t){var o=t.docId;return e.userAccount.features.denali.isDenaliDocument(o).get()?(e.apis.dox.clientType="denali_editor",r(function(){return n.e(2).then(n.bind(null,1451))},function(t){return c.createElement(t.DenaliEditorPage,{wsConnectivity:e.wsConnectivity,networkState:e.networkState,selfUpdate:e.selfUpdate,notifications:e.denaliNotifications,doxApi:e.apis.dox,docId:o,userAccount:e.userAccount,logout:function(){return e.authentication.logout()},browser:e.platformInfo.browser})})):c.createElement(C,{destination:m.Router.routes.editor.href({docId:o})})}),free:m.Router.bindComponent(m.Router.routes.free,function(){return e.userAccount.features.isFree?r(function(){return n.e(6).then(n.bind(null,1455))},function(t){return c.createElement(t.FreePage,{authentication:e.authentication,userAccount:e.userAccount})}):c.createElement(C,{destination:m.Router.routes.documents.href({})})}),componentBrowser:m.Router.bindComponent(m.Router.routes.component_browser,function(e){var t=e.component;return r(function(){return n.e(1).then(n.bind(null,1459))},function(e){return c.createElement(e.ComponentBrowserPage,{component:t})})}),card_iframe:m.Router.bindComponent(m.Router.routes.card_iframe,function(){return r(function(){return n.e(4).then(n.bind(null,1453))},function(e){return c.createElement(e.CardIframePage,null)})}),diagnostic_test:m.Router.bindComponent(m.Router.routes.diagnostic_test,function(){return r(function(){return n.e(5).then(n.bind(null,1460))},function(e){return c.createElement(e.DiagnosticPage,null)})}),notFound:m.Router.bindComponent(m.Router.routes.notFound,function(){return c.createElement(g.Error404Page,{requestedData:"page"})})}}function i(e,t){var n=t.title,r=t.text,o=h.promiseToStream(function(){return e.documentsPage.actions.createDocument(r,n)});return u.Option.some(c.createElement(d.F.div,null,o.map(function(e){return e.fold(function(){return c.createElement(_.Spinner,{className:E.spinner})},function(e){return e.map(function(e){return e.id.toString()}).fold(function(e){return p.Monitoring.Logging.getLogger("global_experiment").fatal("Fail when redirecting to readability prototype doc",e),c.createElement(C,{destination:m.Router.routes.documents.href({})})},function(e){return c.createElement(C,{destination:m.Router.routes.denali_editor.href({docId:e})})})})})))}function s(e,t){return e.userAccount.features.isReadabilityPrototypeDemoUser&&!t.isActive(m.Router.routes.denali_editor.href({docId:"*"})).get()?i(e,w.readabilityDemoText):u.Option.none()}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),c=n(13),u=n(14),l=n(23),d=n(7),p=n(6),h=n(315),f=n(568),g=n(1411),m=n(155),_=n(310),y=n(216),v=n(306),b=n(3),w=n(1427),E=n(385),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentDidMount=function(){var e=this.context.appRouter;e.replace(this.props.destination,e.locationState.getOrElse(void 0))},t.prototype.render=function(){return null},t}(y.BaseComponent);t.routesMap=o,t.testReadabilityPrototypeDemo=i,t.globalExperiment=s},1391:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(298),i=n(7),s=n(23),a=n(54),c=n(6),u=n(3),l=n(36),d=n(123),p=n(309),h=n(125),f=n(14);t.defaultState=u.Async.defaultValue();var g=function(e){function t(){return e.call(this,{code:403,status:"error",message:"User is anonymous"})||this}return r.__extends(t,e),t}(a.HTTPError);t.AnonymousUserError=g;var m=function(e){function t(){return e.call(this,{code:0,status:"error",message:"User cannot use editor"})||this}return r.__extends(t,e),t}(a.HTTPError);t.CannotUseEditorError=m;var _=function(e){function t(t){return e.call(this,{code:t,status:"error",message:"Connection failed"})||this}return r.__extends(t,e),t}(a.HTTPError);t.ConnectionError=_;var y=function(){function e(e,t,n,r,o,i,s,l,d,p,h){var f=this;this._state=e,this._authApi=t,this._institutionApi=n,this._dapi=r,this._onAuthenticated=o,this._appConfig=i,this._telemetry=s,this._navigateToFreePage=l,this._modal=d,this._overlay=p,this._browser=h,this._log=c.Monitoring.Logging.getLogger("model.authentication"),this.status=this._state.view(function(e){return u.Async.map(e,function(e){return e})}),this._disableProofitField="disableProofit",this._handleAuthError=function(e){e instanceof m?f._gotoFreePage():!e||401!==e.code&&403!==e.code?(f._log.fatal("authError: Failed to get user session","string"==typeof e?e:c.EventProps.fromAny(e)),f._state.modify(function(t){return u.Async.isOk(t)?u.Async.error(e||new Error("authError: Failed to get user session, error is undefined"))(t):t})):(f._log.warn("authError: Bad user session",e),f._gotoLogin())},this._retryWhen=function(e){return!(e instanceof a.HTTPError)||u.isServerErrorCode(e.code)}}return e.prototype.ensureAuthenticated=function(){return r.__awaiter(this,void 0,void 0,function(){var e,t,n=this;return r.__generator(this,function(r){switch(r.label){case 0:if(!u.Async.isIdle(this._state.get()))return[2];r.label=1;case 1:return r.trys.push([1,3,,4]),this._state.modify(u.Async.begin),[4,this._getUserSession()];case 2:if(e=r.sent(),setTimeout(function(){n._onAuthenticated(e),n._state.modify(u.Async.success(e))},0),!e.userProfile.canUseEditor)throw new m;return[3,4];case 3:return t=r.sent(),this._handleAuthError(t),t instanceof m||this._state.modify(u.Async.error(t)),[3,4];case 4:return[2]}})})},e.prototype._parseUserProfileJSON=function(e,t,n,r){var o=new Set(e.groups.filter(Boolean)),i="Free"===e.type?d.UserType.free:"Premium"===e.type?d.UserType.premium:function(){throw new Error("Unknown user type "+e.type)}(),s=this._parseCustomFields(e.customFields);return{userProfile:{id:e.id,email:e.email,newEmail:e.newEmail,fullName:e.name,isFreebie:o.has(d.UserGroups.FREEBIE_USER),isTest:e.isTest||!1,canUseEditor:"Premium"===e.type||e.freemium||!1,groups:o,type:i,loginType:e.loginType,registrationDate:e.registrationDate?f.Some(new Date(e.registrationDate)):f.None},subscription:p.defaultState,institution:r,settings:t,experiments:n,customFields:s}},e.prototype._parseCustomFields=function(e){return void 0===e&&(e={}),{disableProofit:Boolean(e[this._disableProofitField])}},e.prototype.checkAuthenticated=function(){return this._authApi.getUser().then(function(e){if(e.anonymous)throw new g}).catch(this._handleAuthError)},e.prototype._getUserMimicWithProps=function(){return r.__awaiter(this,void 0,void 0,function(){var e,t,n;return r.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),t=(e=this._dapi).getMimicWithProps,[4,this._telemetry.getContainerId()];case 1:return[4,t.apply(e,[r.sent()])];case 2:return[2,r.sent()];case 3:return n=r.sent(),this._log.warn("dapiError: Failed to get dapi props and mimic groups",n),[2,{experiments:new Set,properties:a.Properties.of({})}];case 4:return[2]}})})},e.prototype._getUserSession=function(){return r.__awaiter(this,void 0,void 0,function(){var e,t,n,o,i,s,c;return r.__generator(this,function(r){switch(r.label){case 0:return[4,this._authApi.getUser(this._disableProofitField)];case 1:if(e=r.sent(),e.anonymous)throw new g;return[4,Promise.all([this._getUserMimicWithProps(),void 0!==e.institutionId?this._getUserInstitution():Promise.resolve(null)])];case 2:return t=r.sent(),n=t[0],o=n.properties,i=n.experiments,s=t[1],c=h.UserSettings.parse(o,h.LocalStorageUserSettings.read(e.id),a.Properties.of(e.settings)),h.LocalStorageUserSettings.write(e.id,h.UserSettings.serialize(c)),[2,this._parseUserProfileJSON(e,c,i,s)]}})})},e.prototype._getUserInstitution=function(){return r.__awaiter(this,void 0,void 0,function(){var e,t=this;return r.__generator(this,function(n){return e=i.Atom.create(u.Async.defaultValue()),u.Async.OperationRetrier.create(function(){return t._institutionApi.getInfo()},e,u.Async.OperationRetrier.RetryStrategy.conditional(this._retryWhen,u.Async.OperationRetrier.RetryStrategy.linear(3,3e3))),[2,e.do(function(e){u.Async.isError(e)&&1===e.attempt?t._log.info("institutionError: Failed to get institution info from first try",e.error):u.Async.isFatal(e)&&t._log.warn("institutionError: Can not get institution info",e.error)}).filter(u.Async.isTerminated).map(function(e){return u.Async.isFatal(e)?Promise.reject(e.error):e.value}).first().toPromise()]})})},e.prototype._gotoLogin=function(){this._gotoFunnelPage(this._appConfig.funnel.signin)},e.prototype._gotoFreePage=function(){this._navigateToFreePage()},e.prototype._gotoMainPage=function(){this._gotoFunnelPage(this._appConfig.funnel.mainPage)},e.prototype._gotoFunnelPage=function(e){if(l.isDesktopEditor(this._browser)){o.gt(l.getBrowserInfo().version,"1.5.29")?(this._log.info("Redirecting DTE to social signin page"),document.location.href=this._appConfig.funnel.socialSignin+"?fromDesktopEditor=true"):document.location.href=e}else document.location.href=e},e.prototype.logout=function(){var e,t=this,n=i.Atom.create(0),r=i.Atom.create(5),o=i.Atom.create(5),a=function(){return t._authApi.logout().catch(function(e){throw t._log.error("Logout error",e),e})},c=new s.Subject,l=function(){e.unsubscribe(),c.next(0),n.set(1),o.set(0),r.set(5)};this._modal.show({type:"inProgressSpinner"}),s.Observable.defer(a).retryWhen(function(i){return i.scan(function(e){return e+1},0).flatMap(function(i){if(i>10)throw o.set(-1),t._modal.hide(),t._overlay.show(),new Error("Logout retry limit exceeded");n.set(i);var a=Math.min(5*i,30);return r.set(a),o.set(a),e=s.Observable.interval(1e3).take(a).subscribe(function(){o.modify(function(e){return e-1}),0===o.get()&&c.next(0)}),c=new s.Subject})}).subscribe(function(){u.Extension.notifications.sendLogout(),t._gotoMainPage()},function(e){return t._log.error("Logout error",e)}),n.filter(function(e){return e>1}).first().subscribe(function(){return t._modal.notifications.show(t._modal.notifications.create.logoutError(l,o))})},e}();t.AuthenticationModelImpl=y},1392:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(6),i=n(3),s=function(){function e(e,t){this._notification=e,this._overlay=t}return e.prototype.getDisposer=function(e,t){var n=this;return void 0===t&&(t={hideOverlay:!1}),function(){e&&n._notification.hide(e),t.hideOverlay&&n._overlay.hide()}},e}();t.ErrorHandler=s;var a=function(e){function t(t,n){return e.call(this,t,n)||this}return r.__extends(t,e),t.prototype.handle=function(e){switch(e.type){case"slow":return this.getDisposer(this._notification.show(this._notification.create.slowNetwork()));case"offline":return this._overlay.show(),this.getDisposer(this._notification.show(this._notification.create.offline(e.timer.resetClock,e.timer.reconnectTime)),{hideOverlay:!0});default:return i.assertNever(e)}},t}(s);t.NetworkErrorHandler=a;var c=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r._log=o.Monitoring.Logging.getLogger("connectivity.wsProtocol"),r}return r.__extends(t,e),t.prototype.handle=function(e){switch(this._log.info(e.type),e.type){case"offline":return this._overlay.show(),this.getDisposer(this._notification.show(this._notification.create.connectionWSError()),{hideOverlay:!0});default:return i.assertNever(e.type)}},t}(s);t.WsProtocolErrorHandler=c;var u=function(e){function t(t,n,r,i){var s=e.call(this,t,n)||this;return s._authentication=r,s._navigateToDocuments=i,s._log=o.Monitoring.Logging.getLogger("connectivity.dox"),s}return r.__extends(t,e),t.prototype.handle=function(e){switch(this._log.info(e.type),this._overlay.show(),e.type){case"unauthorized":return this._authentication.checkAuthenticated(),this.getDisposer(this._notification.show(this._notification.create.unauthorizedError()),{hideOverlay:!0});case"serverError":return this.getDisposer(this._notification.show(this._notification.create.serverError()),{hideOverlay:!0});case"blockedByClient":return this.getDisposer(this._notification.show(this._notification.create.connectionWSError()),{hideOverlay:!0});case"clientConnectionError":return this.getDisposer(this._notification.show(this._notification.create.clientConnectionError()),{hideOverlay:!0});case"unknownConnectionError":return this.getDisposer(this._notification.show(this._notification.create.unknownConnectionError()),{hideOverlay:!0});case"documentNotFoundError":return this.getDisposer(this._notification.show(this._notification.create.documentNotFoundError(this._navigateToDocuments)),{hideOverlay:!0});default:return i.assertNever(e.type)}},t}(s);t.DoxErrorHandler=u;var l=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r._log=o.Monitoring.Logging.getLogger("connectivity.capi"),r}return r.__extends(t,e),t.prototype.handle=function(e){switch(this._log.info(e.type),e.type){case"offline":return this.getDisposer(this._notification.show(this._notification.create.checkingIsDown()));default:return i.assertNever(e.type)}},t}(s);t.CapiErrorHandler=l},1393:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(7),i=n(3),s=n(559);t.DoxOfflineType=s.DoxOfflineType;var a=function(){function e(e){var t=this;this._handlers=e,this.onlineState=o.Atom.create({network:{type:s.ONLINE},dox:{type:s.ONLINE},wsProtocol:{type:s.ONLINE},wsDox:{type:s.ONLINE},wsCapi:{type:s.ONLINE}}),this.networkOnline=this.onlineState.view(function(e){return"offline"!==e.network.type}),i.invariant(!this._subscription,"ConnectivityModel already subscribed"),this.onlineState.pairwise().subscribe(function(e){var n=e[0],r=e[1],o=t._getNextOfflineKey(n),i=t._getNextOfflineKey(r);if(null===i)return void(t._dispose&&t._dispose());var s=r[i];o===i&&n[o].type===s.type||(t._dispose&&t._dispose(),"online"!==s.type&&(t._dispose=t._handlers[i].handle(s)))})}return e.prototype.setState=function(e){var t=e.type,n=e.state;this.onlineState.modify(function(e){return r.__assign({},e,(o={},o[t]=n,o));var o})},e.prototype._getNextOfflineKey=function(e){if("offline"===e.network.type)return"network";if(e.wsProtocol.type!==s.ONLINE)return"wsProtocol";if(e.dox.type!==s.ONLINE)return"dox";if(e.wsDox.type!==s.ONLINE)return"wsDox";if(e.wsCapi.type!==s.ONLINE)return"wsCapi";if("slow"===e.network.type)return"network";var t=Object.keys(e).find(function(t){return"online"!==e[t].type});if(t)throw new i.InvariantError("Expected that state is online but got '"+t+"' is '"+e[t].type+"'");return null},e}();t.ConnectivityModelImpl=a},1394:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(23),o=n(7),i=n(6),s=n(75),a=n(3),c=10,u=5e3,l={method:"HEAD",mode:"cors"},d=function(){function e(e,t){var n=this;this._connectivity=e,this._onlineTestUrl=t,this._log=i.Monitoring.Logging.getLogger("networkConnectivity"),this._online=o.Atom.create("online"),this.check=a.throttleByPromise(function(){return n._checkRequest().then(n._setOnline).catch(function(){n._log.info("Online check failed, switching to offline state"),n._setOffline(n.check)})}),this.getOnlineStatus=function(){return n._online.get()},this.checkOnlineStatus=function(){return n.check().then(n.getOnlineStatus)},this._startReconnectTimer=function(e){n._stopTimer();var t=o.Atom.create(c),i=function(){t.set(c),e&&e()};n._reconnectTimer=r.Observable.interval(1e3).subscribe(function(){t.get()<=1&&e&&e(),t.modify(function(e){return e<=1?c:e-1})}),n._timer={resetClock:i,reconnectTime:t}},this._setOnline=function(){n._stopTimer(),n._online.modify(n._toSlowOrOnline)},this._setOffline=function(e){"offline"!==n._online.get()&&(n._startReconnectTimer(e),n._online.modify(n._toOffline))},this._checkRequest=function(){return a.Async.promiseWithTimeout(s.RxFetch.nativeFetch(n._onlineTestUrl+"?_="+Date.now(),l),u)},this._online.subscribe(function(e){switch(e){case"online":n._log.info("Switch back to online state"),n._connectivity.setState({type:"network",state:{type:"online"}});break;case"slow":n._connectivity.setState({type:"network",state:{type:"slow"}});break;case"offline":n._connectivity.setState({type:"network",state:{type:"offline",timer:n._timer}});break;default:a.assertNever(e)}}),this._online.filter(function(e){return"slow"!==e}).switchMap(function(e){return"offline"===e?r.Observable.empty():s.RxFetch.requestResults.filter(function(e){return"timeoutWarn"===e.type}).do(function(){n._online.modify(n._toSlow)}).switchMap(function(){return r.Observable.of(!1).delay(s.RxFetch.FETCH_TIMEOUT)})}).subscribe(function(){return n._online.modify(n._toOnline)}),r.Observable.fromEvent(window,"online").subscribe(this._setOnline),r.Observable.fromEvent(window,"offline").mapTo(void 0).subscribe(this._setOffline),this._online.switchMap(function(e){return"offline"===e?s.RxFetch.requestResults.filter(function(e){return"success"===e.type}):r.Observable.merge(s.RxFetch.requestResults.filter(function(e){var t=e.type;return"clientError"===t||"timeoutWarn"===t||"timeoutError"===t}),n._connectivity.onlineState.skip(1).filter(function(e){var t=e.dox,n=e.wsDox;return"online"!==e.wsCapi.type||"online"!==t.type||"online"!==n.type}))}).debounceTime(1e3).subscribe(this.check)}return e.prototype._stopTimer=function(){this._reconnectTimer&&(this._reconnectTimer.unsubscribe(),this._reconnectTimer=null)},e.prototype._toSlow=function(e){return"online"===e?"slow":e},e.prototype._toOnline=function(e){return"online"},e.prototype._toSlowOrOnline=function(e){return"offline"===e?"online":e},e.prototype._toOffline=function(e){return"offline"},e}();t.NetworkConnectivityModelImpl=d},1395:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(7),i=n(559),s=n(3),a=function(){function e(e,t){var n=this;this._connectivity=e,this._wsHandlers=t,this._wsState=o.Atom.create({wsDox:{type:i.ONLINE},wsCapi:{type:i.ONLINE}}),this._getChangedState=function(e){var t=e[0],r=e[1],o=Object.keys(t).find(function(e){return n._wasChanged(t,r,e)});return s.invariant(!!o,"WsState must be changed"),{type:o,state:r[o]}},this._handleStateChange=function(e){var t=e.type,r=e.state;r.type===i.ONLINE?n._connectivity.setState({type:t,state:{type:"online"}}):n._wsHandlers[t].handle(r)},this._wsState.pairwise().map(this._getChangedState).subscribe(this._handleStateChange)}return e.prototype.setState=function(e){var t=e.type,n=e.state;this._wsState.modify(function(e){return r.__assign({},e,(o={},o[t]=n,o));var o})},e.prototype._wasChanged=function(e,t,n){return e[n].type!==t[n].type},e}();t.WsConnectivityModelImpl=a},1396:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(76),i=n(3),s=n(584),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(i.CustomError),c=function(){function e(e,t){var n=this;this.networkState=e,this.connectivity=t,this.checkWs=function(){return"offline"===n.networkState.getOnlineStatus()?Promise.resolve():n._wsTest().catch(n._checkOnline)},this._wsTest=function(){return Promise.race([new Promise(function(e,t){var n=i.getWebSocket(o.appConfig.api.wsTest);if(!n)throw new a("Socket is not accessible");n.onmessage=function(){try{n.close(),e()}catch(e){t(e)}},n.onerror=function(e){return t(e)}}),s.timeoutLimit(s.TIMEOUT)])},this._checkOnline=function(){return n.networkState.checkOnlineStatus().then(function(e){return"offline"===e?Promise.resolve():Promise.reject(new a("Websocket test failed while network test passed"))})}}return e}();t.WsErrorHandler=c;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.handle=function(e){var t=this;switch(e.type){case"unknownConnectionError":case"clientConnectionError":case"blockedByClient":this.checkWs().then(function(){return t.connectivity.setState({type:"wsDox",state:{type:e.type}})}).catch(function(){t.connectivity.setState({type:"wsProtocol",state:{type:"offline"}})});break;case"serverError":case"unauthorized":case"documentNotFoundError":this.connectivity.setState({type:"wsDox",state:{type:e.type}});break;default:i.assertNever(e.type)}},t}(c);t.WsDoxErrorHandler=u;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.handle=function(e){var t=this;switch(e.type){case"offline":this.checkWs().then(function(){return t.connectivity.setState({type:"wsCapi",state:{type:e.type}})}).catch(function(){t.connectivity.setState({type:"wsProtocol",state:{type:"offline"}})});break;default:i.assertNever(e.type)}},t}(c);t.WsCapiErrorHandler=l},1397:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=n(3);t.defaultState={dictionary:null,status:o.Async.defaultValue()};var i=function(){function e(e,t){this._state=e,this._api=t,this.dictionary=this._state.lens("dictionary"),this.syncStatus=this._state.lens("status"),this.isInProgress=this.syncStatus.view(function(e){return e.status===o.Async.Status.inProgress}),this.ready=this.dictionary.view(function(e){return null!==e}),this.isReadyOrError=r.Atom.combine(this.ready,this.syncStatus,function(e,t){return e||t.status===o.Async.Status.error}),this.isNotReadyOrInProgres=r.Atom.combine(this.ready,this.isInProgress,function(e,t){return!e||t})}return e.prototype.update=function(){var e=this;return this.isInProgress.get()?Promise.resolve():o.Async.runWithTimeout(function(){return e._api.get().then(function(t){return e.dictionary.set(t)})},this.syncStatus)},e.prototype.add=function(e){var t=this;return o.Async.modifyRemoteState(this.dictionary,function(t){return[e].concat(t||[])},function(){return o.Async.runWithTimeout(function(){return t._api.add(e).then(function(e){return Promise.resolve()})},t.syncStatus)})},e.prototype.remove=function(e){var t=this;return o.Async.modifyRemoteState(this.dictionary,function(t){return(t||[]).filter(function(t){return t!==e})},function(){return o.Async.runWithTimeout(function(){return t._api.delete(e).then(function(e){return Promise.resolve()})},t.syncStatus)})},e}();t.DictionaryModelImpl=i},1398:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(7),i=n(6),s=n(560),a=n(3),c=n(124);!function(e){e[e.documentTypeUnsupported=0]="documentTypeUnsupported",e[e.documentIsEmpty=1]="documentIsEmpty",e[e.documentSizeExceeded=2]="documentSizeExceeded",e[e.noFilesToUpload=3]="noFilesToUpload",e[e.onlyOneDocumentAllowed=4]="onlyOneDocumentAllowed"}(r||(r={}));var u=function(e){return e&&s.ACCEPTED_UPLOAD_EXTENSIONS.some(function(t){return e.toLowerCase().endsWith(t)})},l=function(){return a.Async.defaultValue()},d=function(){function e(e,t,n,r){var i=this;this._upload=e,this._navigateToDocument=t,this._notifications=n,this._telemetry=r,this._state=o.Atom.create(l()),this._inBackground=!1,this.state=this._state.view(),this._state.filter(function(e){return a.Async.isTerminated(e)}).subscribe(function(e){if(a.Async.isOk(e)){var t=e.value,n=t.id,r=t.notify,o=i._navigateToDocument.bind(i,n,{openSidebar:!0,showDocumentUploadedNotification:r});i._inBackground?i._notifications.show(i._notifications.create.documentUploaded(o)):o()}else i._handleError(e.error)})}return e.prototype.upload=function(e,t){var n=this;if(void 0===t&&(t=!0),a.Async.isInProgress(this._state.get())){var o={type:"clientError",errorType:r.onlyOneDocumentAllowed};return this._handleError(o),Promise.resolve(a.Either.left(o))}this._inBackground=!1,this._state.modify(a.Async.begin);var i=this._validateFile(e);if(null!==i){var s={type:"clientError",errorType:i};return this._state.modify(a.Async.fatal(s)),this._state.set(l()),Promise.resolve(a.Either.left(s))}var c=e[0];return this._upload(c).then(function(e){var r=String(e.id);return n._state.modify(a.Async.success({id:r,notify:t})),n._telemetry.uploadDocument(!0),a.Either.right(r)}).catch(function(e){var t={type:"serverError",error:e};return n._state.modify(a.Async.fatal(t)),a.Either.left(t)}).then(function(e){return n._state.set(l()),e})},e.prototype.navigated=function(){this._inBackground=!0},e.prototype._handleError=function(e){"clientError"===e.type?this._handleClientError(e):this._handleServerError(e)},e.prototype._handleServerError=function(e){var t=e.error;i.Monitoring.Logging.getLogger("document.upload").error("uploadDocument failed",t),t instanceof c.DoxErrors.FileSizeOutOfRangeError?(this._telemetry.uploadDocument(!1,"serverError",r[r.documentSizeExceeded]),this._notifications.show(this._notifications.create.documentSizeExceeded())):t instanceof c.DoxErrors.UnsupportedFileTypeError?(this._telemetry.uploadDocument(!1,"serverError",r[r.documentTypeUnsupported]),this._notifications.show(this._notifications.create.documentTypeUnsupported())):t instanceof c.DoxErrors.TrackedChangesIsUnsupported?(this._telemetry.uploadDocument(!1,"serverError",t.message),this._notifications.show(this._notifications.create.trackedChangesIsUnsupported())):t instanceof c.DoxErrors.TooManyRequestsError?(this._telemetry.uploadDocument(!1,"serverError",t.message),this._notifications.show(this._notifications.create.error())):(this._telemetry.uploadDocument(!1,"serverError",t&&t.message),this._notifications.show(this._notifications.create.documentUploadGeneralError()))},e.prototype._handleClientError=function(e){var t=e.errorType;switch(this._telemetry.uploadDocument(!1,"clientError",r[t]),t){case r.documentTypeUnsupported:this._notifications.show(this._notifications.create.documentTypeUnsupported());break;case r.documentIsEmpty:this._notifications.show(this._notifications.create.documentIsEmpty());break;case r.documentSizeExceeded:this._notifications.show(this._notifications.create.documentSizeExceeded());break;case r.noFilesToUpload:this._notifications.showMessage("No files to upload!");break;case r.onlyOneDocumentAllowed:this._notifications.showMessage("Only one document upload at a time is allowed");break;default:a.assertNever(t)}},e.prototype._validateFile=function(e){var t=e?e[0]:null;return t?e&&e.length>1?r.onlyOneDocumentAllowed:u(t.name)?t.size?t.size>4194304?r.documentSizeExceeded:null:r.documentIsEmpty:r.documentTypeUnsupported:r.noFilesToUpload},e}();t.UploadModel=d},1399:function(e,t,n){"use strict";function r(e,t){function n(r){try{return e()}catch(e){if(r<t.length)return t[r](),n(r+1);throw e}}return n(0)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),i=n(3),s=function(){function e(e,t,n,r,s,a){void 0===s&&(s=i.LocalStorage.DenaliStorage.fromLocalStorage(i.LocalStorage.ls)),void 0===a&&(a=12096e5);var c=this;this._deserializeAlerts=e,this._serializeAlerts=t,this._storageNamePrefix=n,this._storageAlertVersion=r,this._storage=s,this._maxCacheAgeMs=a,this._log=o.Monitoring.Logging.getLogger("model.editor.alert_cache"),this._alertCacheKeyRe=new RegExp(i.StringUtils.escapeRegExp(this._getStorageKeyVersionedPrefix())+"-.+"),requestAnimationFrame(function(){try{c._pruneOldVersions()}catch(e){c._log.debug("could not clean old versions alerts",e)}})}return e.prototype._decodeCacheItem=function(e){var t=this,n=e.match(/([^;]+);([^;]+);([^;]+);(.*)/);if(!n)throw new TypeError("unexpected value content");var r=n.splice(1,5).map(function(e){return JSON.parse(e)}),o=r[0],s=r[1],a=r[2],c=r[3];if(void 0!==o&&"number"==typeof o&&void 0!==s&&void 0!==a&&"boolean"==typeof a&&void 0!==c&&Array.isArray(c)){var u=i.lazy(function(){return t._deserializeAlerts(c)});return{timeStamp:o,context:s,isFreeUser:a,get alerts(){return u.value}}}throw new TypeError("unexpected value content")},e.prototype._encodeCacheItem=function(e){var t=e.timeStamp,n=e.context,r=e.isFreeUser,o=e.alerts;return[t,n,r,this._serializeAlerts(o)].map(function(e){return JSON.stringify(e)}).join(";")},e.prototype._getStorageKeyVersionedPrefix=function(){return this._storageNamePrefix+this._storageAlertVersion},e.prototype._getStorageKeyForDoc=function(e){return this._getStorageKeyVersionedPrefix()+"-"+e},e.prototype._isAlertCacheKey=function(e){return this._alertCacheKeyRe.test(e)},e.prototype._isOldAlertCacheKey=function(e){return e.startsWith(this._storageNamePrefix)&&!e.startsWith(this._getStorageKeyVersionedPrefix())},e.prototype._saveAlerts=function(e,t,n,r){var o=this._encodeCacheItem({timeStamp:Date.now(),context:t,isFreeUser:n,alerts:r});this._storage.setItem(this._getStorageKeyForDoc(e),o)},e.prototype._loadAlerts=function(e,t,n){var r=this._storage.getItem(this._getStorageKeyForDoc(e));if(r.isEmpty())return null;var o=void 0;try{o=this._decodeCacheItem(r.get())}catch(t){try{this._removeAlerts(e)}catch(e){this._log.debug("could not remove broken cache item",e)}return null}if(o.isFreeUser===n&&o.context===t)return o.alerts;try{this._removeAlerts(e)}catch(e){this._log.debug("could not remove cache for a user of different type",e)}return null},e.prototype._removeAlerts=function(e){this._storage.removeItem(this._getStorageKeyForDoc(e))},e.prototype._pruneOldEditor=function(){var e=this;this._storage.getKeys().filter(function(e){return/matches_\d+/.test(e)}).forEach(function(t){return e._storage.removeItem(t)})},e.prototype._getAlertCacheKeys=function(){var e=this;return this._storage.getKeys().filter(function(t){return e._isAlertCacheKey(t)})},e.prototype._pruneOld=function(){var e=this,t=Date.now();this._getAlertCacheKeys().forEach(function(n){var r=e._storage.getItem(n);if(!r.isEmpty()){var o=void 0;try{o=e._decodeCacheItem(r.get())}catch(t){return void e._storage.removeItem(n)}t-o.timeStamp>e._maxCacheAgeMs&&e._storage.removeItem(n)}})},e.prototype._pruneAll=function(){var e=this;this._getAlertCacheKeys().forEach(function(t){return e._storage.removeItem(t)})},e.prototype._pruneOldVersions=function(){var e=this;this._storage.getKeys().filter(function(t){return e._isOldAlertCacheKey(t)}).forEach(function(t){return e._storage.removeItem(t)})},e.prototype.load=function(e,t,n){return this._loadAlerts(e,t,n)},e.prototype.hasCache=function(e,t,n){var r=this;return this._storage.getItem(this._getStorageKeyForDoc(e)).map(function(e){return r._decodeCacheItem(e)}).filter(function(e){return e.context===t&&e.isFreeUser===n}).map(function(e){return!0}).getOrElse(!1)},e.prototype.save=function(e,t,n,o){var i=this;try{return r(function(){return i._saveAlerts(e,t,n,o)},[function(){return i._pruneOldEditor()},function(){return i._pruneOld()},function(){return i._pruneAll()}])}catch(e){this._log.warn("Cannot write to localStorage",e)}},e.prototype.remove=function(e){this._removeAlerts(e)},e}();t.AlertCacheImpl=s},1400:function(e,t,n){"use strict";function r(e,t){var n=e.extra_properties&&e.extra_properties[t];return i.Option.of(n)}function o(e){var n=e.rawMatch,o=r(n,"source").filter(function(e){return"PUBLICATION"===e}),a=r(n,"title"),c=o.fold(function(){return i.Option.some("A part of your paper is matching some text from the web. Please make sure that this text is properly referenced.")},function(){return a.map(function(e){return'A part of your document is matching the publication "'+e+'."'})}),u=o.fold(function(){return i.Either.left({title:a,dateAccessed:t.parseDateAccessed(n.details)})},function(){return i.Either.right({mla:r(n,"reference_mla"),apa:r(n,"reference_apa"),chicago:r(n,"reference_chicago")})});return{title:"Unoriginal text: "+s.StringUtils.wordCount(n.text)+" words",description:c,url:r(n,"url").filter(function(e){return e.length>0}),reference:u}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),s=n(3);t.parseDateAccessed=function(e){void 0===e&&(e="");var t=e.match(/accessed\s(.*?)\)/);return i.Option.of(t).mapN(function(e){return e[1]})},t.parsePlagiarism=o},1401:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(7),i=n(6),s=n(202),a=n(3),c=n(562),u=n(564),l=n(308),d=n(54),p=n(124),h=n(77);t.defaultState={session:null,document:c.defaultState};var f=function(){function e(e,t,n,s,d,p,h,f,g,m,_){var y=this;this._state=e,this._dialectSettingsModel=t,this._doxApi=n,this._capiWsUrl=s,this._features=d,this._telemetry=p,this._modal=h,this._alertCache=f,this._wsConnectivity=g,this._connectivity=m,this._notifications=_,this._log=i.Monitoring.Logging.getLogger("model.editor.editor_page"),this._sessionState=this._state.lens("session"),this.currentSession=o.Atom.create(null),this._doStartSession=function(e){return r.__awaiter(y,void 0,void 0,function(){var t,n,o,i,s,a,d;return r.__generator(this,function(r){switch(r.label){case 0:return t=new c.DocumentModelImpl(e,this._state.lens("document"),this._doxApi,this._doxConnectivity,this._features.demoMode),[4,t.startSession()];case 1:return n=r.sent(),o=n.documentSession,i=n.initialGenre,s=n.initialChecks,this._sessionState.set(u.createDefaultState(i,s,this._features.defaultAcademicGenre.get().enabled)),a=this._sessionState,d=new u.EditorSessionImpl(a,o,new l.TextStatsModelImpl(a.lens("textStats")),this._capiWsUrl,this._dialectSettingsModel,this._features,this._telemetry,this._alertCache,this._capiConnectivity),this._telemetry.documentShow(e.toString()),[2,d]}})})},this._connectionManager=new a.ConnectionManager(this._doStartSession,function(e){return e.end()},this.currentSession),this._capiConnectivity=o.Atom.create({type:"init"}),this._doxConnectivity=o.Atom.create({type:"init"}),this._subs=[]}return e.prototype.startSession=function(e){var t=this;if(isNaN(Number(e)))throw new Error("Invalid documentId");var n=o.Atom.create(a.Async.defaultValue());this._subs=[a.Async.OperationRetrier.create(function(){return t._connectionManager.terminate(),t._connectionManager.connect(e)},n,a.Async.OperationRetrier.RetryStrategy.conditional(this._retryWhen,a.Async.OperationRetrier.RetryStrategy.noRetry)),n.filter(function(e){return a.Async.isError(e)&&3===e.attempt||a.Async.isFatal(e)}).subscribe(function(e){t._doxConnectivity.set({type:"error",reason:"session open",error:e.error})}),n.filter(a.Async.isOk).take(1).subscribe(function(){t._doxConnectivity.set({type:"success"})}),this._connectivity.networkOnline.subscribe(function(e){return e?t.listenConnectivity():t.clearConnectivityListener()})]},e.prototype.endSession=function(){this._subs.forEach(function(e){return e.unsubscribe}),this._subs=[],this.clearConnectivityListener(),this._connectionManager.terminate()},e.prototype._doxErrorHandler=function(e){var t=e.reason,n=e.error,r={reason:t};if(n)if(n instanceof d.HTTPError)this._httpErrorHandler(n.code,t,n);else if(n instanceof d.WSError)this._wsErrorHandler(n.code,t,n);else if(n instanceof s.FetchError){var o="clientConnectionError";this._log.warn("DOX connectivity error: "+o,n,r),this._connectivity.setState({type:"dox",state:{type:o}})}else{var o="unknownConnectionError";this._log.info("DOX connectivity error: "+o,n,r),this._connectivity.setState({type:"dox",state:{type:o}})}else this._log.info("DOX connectivity error: unknown",r)},e.prototype._httpErrorHandler=function(e,t,n){var r=this,o={code:e,reason:t},i=function(e){r._log.info("DOX connectivity error: "+e,n,o),r._connectivity.setState({type:"dox",state:{type:e}})};switch(e){case p.DoxErrors.HttpCodes.NOT_FOUND:this._log.info("DOX connectivity error",n,o),this._modal.show({type:"documentNotFound"});break;case p.DoxErrors.HttpCodes.UNAUTHORIZED:i("unauthorized");break;case p.DoxErrors.HttpCodes.TOO_MANY_REQUESTS:this._log.warn("Too many requests",n,o),this._notifications.show(this._notifications.create.error());break;default:i(a.isServerErrorCode(e)?"serverError":"unknownConnectionError")}},e.prototype._wsErrorHandler=function(e,t,n){var r=this,o={code:e,reason:t},i=function(e){r._log.info("WS DOX connectivity error: "+e,n,o),r._wsConnectivity.setState({type:"wsDox",state:{type:e}})};switch(e){case h.Reconnect.WsCodes.NOT_FOUND:this._log.info("WS DOX connectivity error",n,o),this._modal.show({type:"documentNotFound"});break;case h.Reconnect.WsCodes.UNAUTHORIZED:i("unauthorized");break;case h.Reconnect.WsCodes.BLOCKED_BY_CLIENT:i("blockedByClient");break;default:i([0,-1,1005,1006].indexOf(e)>0?"unknownConnectionError":"serverError")}},e.prototype.listenConnectivity=function(){var e=this;this._connectivitySubs=[this._doxConnectivity.distinctUntilChanged(function(e,t){return e instanceof d.WSError&&t instanceof d.WSError&&e===t}).subscribe(function(t){switch(t.type){case"error":e._doxErrorHandler(t);break;case"success":e._connectivity.setState({type:"dox",state:{type:"online"}}),e._wsConnectivity.setState({type:"wsDox",state:{type:"online"}});break;case"init":break;default:a.assertNever(t)}}),this._capiConnectivity.subscribe(function(t){switch(t.type){case"connected":e._wsConnectivity.setState({type:"wsCapi",state:{type:"online"}});break;case"disconnected":e._log.warn("CAPI disconnected",t.error),e._wsConnectivity.setState({type:"wsCapi",state:{type:"offline"}});break;case"init":break;default:a.assertNever(t)}})]},e.prototype.clearConnectivityListener=function(){this._connectivitySubs&&(this._connectivitySubs.map(function(e){return e.unsubscribe()}),this._connectivitySubs=[]),this._wsConnectivity.setState({type:"wsDox",state:{type:"online"}}),this._wsConnectivity.setState({type:"wsCapi",state:{type:"online"}}),this._doxConnectivity.set({type:"init"}),this._capiConnectivity.set({type:"init"}),this._connectivity.setState({type:"dox",state:{type:"online"}})},e.prototype._retryWhen=function(e){return e instanceof d.HTTPError?a.isServerErrorCode(e.code)||0===e.code:!(e instanceof d.WSError)||e.code<4e3},e}();t.EditorPageModelImpl=f},1402:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(43),o=n(566),i=n(7),s=function(){function e(e,t,n){var r=this;this._synonymsModel=e,this._es=t,this._apply=n,this.viewState=i.Atom.create(null),this._synonymsModel.state.subscribe(function(e){o.SynonymsModel.isReady(e)&&void 0!==e.synonyms&&r.viewState.set({synonymsState:e,popupVisible:!1})})}return e.prototype.apply=function(e){var t=this.viewState.get();null!==t&&o.SynonymsModel.isReady(t.synonymsState)&&void 0!==t.synonymsState.synonyms&&this._apply(t.synonymsState.synonyms.alert,t.synonymsState.query,e),this.hide()},e.prototype.showPopup=function(){r.invariant(o.SynonymsModel.isReady(this._synonymsModel.state.get()));var e=this._synonymsModel.state.get().query;this._es().highlightSynonym(e.start,e.word),this.viewState.modify(function(e){return null===e?null:{cursorPosition:e.cursorPosition,wordPosition:e.wordPosition,popupVisible:!0,synonymsState:e.synonymsState}})},e.prototype.hidePopup=function(){this.viewState.modify(function(e){return null===e?null:{cursorPosition:e.cursorPosition,popupVisible:!1,synonymsState:e.synonymsState}})},e.prototype.showButton=function(e){this.hide(),this._synonymsModel.query(e)},e.prototype.hide=function(){this._synonymsModel.abortQuery(),this.viewState.set(null)},e.prototype.move=function(e,t){this.viewState.modify(function(n){return null===n?null:{cursorPosition:e,wordPosition:t,popupVisible:n.popupVisible,synonymsState:n.synonymsState}})},e}();t.SynonymsViewModelImpl=s},1403:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(6),i=n(3),s=function(){function e(e,t,n,r,i){this._browser=e,this._chromeUrl=t,this._firefoxUrl=n,this._firefoxIconUrl=r,this._notifications=i,this._log=o.Monitoring.Logging.getLogger("model.extInstall")}return e.prototype._installChromeExtension=function(){var e=this;return new Promise(function(t,n){return window.chrome.webstore.install(e._chromeUrl,function(){i.Cookie.setInstallSourceCookie(),t(!0)},function(e,t){return n({err:e,errorCode:t})})})},e.prototype.install=function(){return r.__awaiter(this,void 0,void 0,function(){var e,t,n,o=this;return r.__generator(this,function(r){switch(r.label){case 0:switch(e=this._browser){case"chrome":return[3,1];case"firefox":return[3,4];case"safari":case"edge":return[3,5]}return[3,6];case 1:return r.trys.push([1,3,,4]),[4,this._installChromeExtension()];case 2:return[2,r.sent()];case 3:return t=r.sent(),"userCancelled"===t.errorCode?this._log.warn("chrome extension install cancelled"):(n=t||new Error("banner: Click on install error is undefined"),this._log.error("chrome extension install failed",{error:n}),this._notifications.show(this._notifications.create.extensionInstallFailed())),[2,!1];case 4:return i.Cookie.setInstallSourceCookie(),window.InstallTrigger.install({Grammarly:{URL:this._firefoxUrl,IconURL:this._firefoxIconUrl,toString:function(){return o._firefoxUrl}}}),[2,!0];case 5:return[2,!0];case 6:throw new TypeError("Unexpected input in browser variable: "+this._browser)}})})},e}();t.ExtensionInstallModelImpl=s},1404:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultState={visible:!1,opts:{type:null}};var r=function(){function e(e,t,n){this._state=e,this.os=t,this.notifications=n,this.state=this._state.view()}return e.prototype.show=function(e){this._state.set({visible:!0,opts:e})},e.prototype.hide=function(){this._state.set(t.defaultState)},e}();t.ModalDialogModelImpl=r;var o=function(){function e(e){this._state=e,this.state=this._state.view()}return e.prototype.show=function(){this._state.set({visible:!0})},e.prototype.hide=function(){this._state.set({visible:!1})},e}();t.ModalOverlayModelImpl=o},1405:function(e,t,n){"use strict";function r(e,t,n,r){var s=3,a="windows"===n,c="mac"===n;return r&&!i.isAddinInstalled(e)&&a||s--,r&&!e.has(o.UserGroups.DESKTOP_EDITOR_INSTALLED)&&(a||c)||s--,i.isExtensionInstalled()&&s--,i.isBrowserHasExtension(t)||s--,s}Object.defineProperty(t,"__esModule",{value:!0});var o=n(123),i=n(205),s=["chrome","firefox","safari"],a=function(){function e(e,t,n){this.features=e,this._browser=t,this._os=n,this._showDesktopApps=this.features.desktopApps.get().enabled,this._appsSection=this.features.appsSection.get().enabled}return e.prototype.getAppsCount=function(e){return r(e,this._browser,this._os,this._showDesktopApps)},e.prototype.isAppsVisible=function(){var e=this;return this._appsSection&&(this._showDesktopApps||s.some(function(t){return t===e._browser}))},e}();t.NavigationBarModelImpl=a},1406:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(23),i=function(){function e(){this._dismissStream=new o.Subject}return e.prototype.dismiss=function(){this._cancel()},e.prototype.remind=function(){this._cancel()},e.prototype.cancel=function(){this._cancel()},e.prototype._cancel=function(){this._dismissStream.next(!1)},e}();t.ProofitBanner=i;var s=function(e){function t(t,n){var r=e.call(this)||this;return r._proofit=t,r._goToDocument=n,r._proofitStream=r._proofit.do(function(e){var t=e.id;return r._id=t}).map(function(e){return null!==e.id}),r.state=r._dismissStream.merge(r._proofitStream).distinctUntilChanged(),r}return r.__extends(t,e),t.prototype.install=function(){this.cancel(),this._id&&this._goToDocument(this._id)},t}(i);t.CancelledBanner=s;var a=function(e){function t(t){var n=e.call(this)||this;return n._proofitState=t,n.proofit=n._dismissStream.mapTo(null).merge(n._proofitState.map(function(e){return e})).distinctUntilChanged(),n}return r.__extends(t,e),t.prototype.install=function(){this.cancel()},t}(i);t.CompletedBanner=a},1407:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(298),o=n(23),i=n(7),s=n(6),a=n(202),c=n(3),u=n(76),l=n(14),d=n(587),p={currentVersion:"1.0.0-0",minimalVersion:"1.0.0-0"},h=function(){function e(e,t,n,r,a,h){var f=this;this._config=t,this._overlay=n,this._modal=r,this._onlineState=a,this._userActivity=h,this._logger=s.Monitoring.Logging.getLogger("selfUpdate"),this._versions=i.Atom.create(p),this._notificationId=i.Atom.create(l.None),this._isUpdateInProgress=!1,this.shouldUpdate=new o.Subject,this._canReloadSemaphore=new d.RxSemaphore.Impl("selfUpdate"),c.invariant("string"==typeof u.buildInfo.version,"buildInfo.version should be a string, but "+u.buildInfo.version+" is "+typeof u.buildInfo.version);var g="auto"===this._config.debugBuildVersion?u.buildInfo.version:this._config.debugBuildVersion;this._versions.skip(1).subscribe(function(t){return f._handleUpdate(e,g,t,f._config)}),setInterval(function(){return f._getVersion(f._config)},this._config.versionCheckInterval),this.watch(this._onlineState.view(function(e){return"online"===e.network.type}),"online"),this.watchForIdleState(this._userActivity.generalActivity,"generalActivity"),this.shouldUpdate.first().switchMap(function(){return f._onlineState.filter(function(e){return"online"!==e.network.type})}).withLatestFrom(this._notificationId).subscribe(function(e){e[0];e[1].forEach(function(e){f._modal.notifications.hide(e),f._notificationId.set(l.None)})})}return e.prototype.watchForIdleState=function(e,t){var n=this;return this.watch(e.throttleTime(3e3).switchMap(function(){return o.Observable.timer(n._config.canReloadCheckInterval).mapTo(!0).startWith(!1)}),t)},e.prototype.watch=function(e,t){return this._canReloadSemaphore.watch(this.shouldUpdate.first().switchMapTo(e).startWith(!0),t)},e.prototype._getVersion=function(e){var t=this,n=i.Atom.create(c.Async.defaultValue());c.Async.OperationRetrier.create(function(){return a.RxFetch.request("self_update")(e.versionFilePath,{credentials:"include"}).then(function(e){return e.json()})},n,c.Async.OperationRetrier.RetryStrategy.linear(e.retryFailedVersionCheckLimit,e.retryFailedVersionCheckInterval)),n.filter(c.Async.isTerminated).first().toPromise().then(function(e){if(c.Async.isFatal(e))throw e.error;t._versions.set(e.value)}).catch(function(e){return t._logger.warn("getVersion failed",e)})},e.prototype._handleUpdate=function(e,t,n,i){var s=this,a=n.currentVersion,u=n.minimalVersion;if(r.lt(t,a)){var d=r.lt(t,u),p=d?0:i.selfUpdateDelay,h=function(){o.Observable.fromEvent(document,"visibilitychange").startWith(void 0).map(function(){return document.hidden}).switchMap(function(e){return e?s._canReloadSemaphore.state.switchMap(c.RxUtils.orEmpty(o.Observable.timer(i.canReloadCheckInterval))):o.Observable.empty()}).subscribe(e.forceReloadCurrentLocation)},f=function(){var t=function(){s._overlay.show(),s._notificationId.get()===l.None&&s._notificationId.set(l.Some(s._modal.notifications.show(s._modal.notifications.create.selfUpdate())))};s._canReloadSemaphore.state.switchMap(function(e){return e?o.Observable.timer(i.canReloadCheckInterval).do(t).switchMap(function(){return o.Observable.timer(i.blockingModalAutoReloadDelay)}):o.Observable.empty()}).subscribe(e.forceReloadCurrentLocation)};if(!this._isUpdateInProgress||d){var g=d?"hard":"soft";this._logger.info("scheduled."+g),this._isUpdateInProgress=!0,this.shouldUpdate.next(),setTimeout(function(){s._logger.info("started."+g),e.scheduleReloadOnNavigation(),h(),d&&f()},p)}}},e}();t.SelfUpdateImpl=h},1408:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(7),i=n(646),s=n(647),a=n(6),c=n(214),u=function(e,t){return new Promise(function(n,r){return e(t,function(e,t){if(e)return r(e);n(t)})})},l="braintree-hosted-fields-invalid",d=function(){function e(e,t,n){var d=this;this._notificationModel=e,this._subscriptionApi=t,this._updateSubscriptionState=n,this._log=a.Monitoring.Logging.getLogger("model.subscription.braintree"),this._braintreeInitializedInCreditCardForm=o.Atom.create(!1),this._teardownInProgress=!1,this.braintreeInitializedInCreditCardForm=this._braintreeInitializedInCreditCardForm.view(),this.updateCreditCard=function(e){return new Promise(function(t,n){d._hostedFields.tokenize(function(r,o){if(r){var i=d._hostedFields.getState().fields;return Object.keys(i).forEach(function(e){i[e].isValid||i[e].container.classList.add(l)}),void n(r)}o||n(r),d._subscriptionApi.updateCreditCard(o.nonce,e).then(function(){return Object.keys(d._hostedFields.getState().fields).forEach(function(e){return d._hostedFields.clear(e)}),t()}).then(d._updateSubscriptionState).catch(n)})})},this.getBraintreeClient=function(){return r.__awaiter(d,void 0,void 0,function(){var e,t;return r.__generator(this,function(n){switch(n.label){case 0:return this._braintreeClient?[2,this._braintreeClient]:[4,this._generateCardToken()];case 1:return e=n.sent(),[4,u(i.create,{authorization:e})];case 2:return t=n.sent(),this._braintreeClient=t,[2,t]}})})},this.initInCreditCardForm=function(e){return r.__awaiter(d,void 0,void 0,function(){var t,n,o,i;return r.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),this._notificationModel.clearNotification(),[4,this.getBraintreeClient()];case 1:return t=r.sent(),n={client:t,styles:e.styles,fields:e.fields},[4,u(s.create,n)];case 2:return o=r.sent(),this._hostedFields=o,this._braintreeInitializedInCreditCardForm.set(!0),[3,4];case 3:return(i=r.sent())&&"HOSTED_FIELDS_INVALID_FIELD_SELECTOR"!==i.code?[2]:(this._notificationModel.setNotification(c.SubscriptionNotificationType.unknownError),[3,4]);case 4:return[2]}})})},this.cleanupInCreditCardForm=function(){try{if(d._notificationModel.clearNotification(),d._teardownInProgress)return;return d._teardownInProgress=!0,d._hostedFields&&d._hostedFields.teardown(function(e){d._teardownInProgress=!1,e?d._log.error("Could not tear down Hosted Fields!",e):d._braintreeInitializedInCreditCardForm.set(!1)})}catch(e){d._log.warn("Braintree teardown error",e)}}}return e.prototype._generateCardToken=function(){return r.__awaiter(this,void 0,void 0,function(){var e;return r.__generator(this,function(t){switch(t.label){case 0:return[4,this._subscriptionApi.generateTokenCreditCard()];case 1:return e=t.sent().requestId,[4,this._subscriptionApi.getTokenRequest(e)];case 2:return[2,t.sent()]}})})},e}();t.BraintreeModelImpl=d},1409:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(6),i=n(3),s=n(214),a=function(){function e(e,t,n){this._notificationModel=e,this._subscriptionApi=t,this._updateSubscriptionState=n,this._log=o.Monitoring.Logging.getLogger("model.subscription.PayPal")}return e.prototype.initialize=function(e){return r.__awaiter(this,void 0,void 0,function(){var t;return r.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,this._initialize(e)];case 1:return n.sent(),[4,this._generateToken()];case 2:return n.sent(),[3,4];case 3:return t=n.sent(),this._log.error("paypal init error",t),this._notificationModel.setNotification(s.SubscriptionNotificationType.paypalError),[3,4];case 4:return[2]}})})},e.prototype.update=function(){return r.__awaiter(this,void 0,void 0,function(){var e,t;return r.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,5,,6]),this._token?[3,2]:[4,this._generateToken()];case 1:n.sent(),n.label=2;case 2:return[4,this._subscriptionApi.getPaypalRedirectPageRequest(this._token)];case 3:if(!(e=n.sent()))throw new Error("Irbis return undefined paypal url");return document.location.href=e,[4,i.delay(5e3)];case 4:return n.sent(),[3,6];case 5:return t=n.sent(),this._log.error("paypal update error",t),this._notificationModel.setNotification(s.SubscriptionNotificationType.paypalError),[3,6];case 6:return[2]}})})},e.prototype._initialize=function(e){var t=e.token,n=e.paypal;return r.__awaiter(this,void 0,void 0,function(){var e=this;return r.__generator(this,function(o){return t.map(function(t){return r.__awaiter(e,void 0,void 0,function(){return r.__generator(this,function(e){switch(e.label){case 0:return[4,this._subscriptionApi.updatePaypal(t)];case 1:return e.sent(),[4,this._updateSubscriptionState()];case 2:return e.sent(),[2]}})})}),n.map(function(e){return"ok"===e.toLowerCase()?s.SubscriptionNotificationType.paypalSuccess:s.SubscriptionNotificationType.paypalError}).map(this._notificationModel.setNotification),[2]})})},e.prototype._generateToken=function(){return r.__awaiter(this,void 0,void 0,function(){var e,t;return r.__generator(this,function(n){switch(n.label){case 0:return e=this._generateLinks(),[4,this._subscriptionApi.generateTokenPaypal(e)];case 1:return t=n.sent().requestId,this._token=t,[2]}})})},e.prototype._generateLinks=function(){var e=document.location.protocol+"//"+document.location.host+document.location.pathname.replace(/\/$/,"");return{cancelUrl:e+"?paypal=error",returnUrl:e+"?paypal=ok"}},e}();t.PayPalModelImpl=a},1410:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(13),i=n(573);t.Logo=function(e){var t=e.className;return o.createElement("svg",{"data-name":"gr-logo",className:t,width:"140",height:"33",xmlns:"http://www.w3.org/2000/svg"},o.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none"},o.createElement("path",{d:"M43 24.2c-.5-.2-.8-.7-.8-1.2a1.2 1.2 0 0 1 1.7-1.1c.8.4 1.8.6 2.9.6 2 0 3-1 3-2.9v-.5c-.9 1-1.8 1.7-3.4 1.7-2.5 0-4.7-1.8-4.7-5 0-3.1 2.2-4.9 4.7-4.9 1.6 0 2.6.7 3.4 1.6 0-.8.6-1.5 1.5-1.5.8 0 1.5.7 1.5 1.5v6.8c0 1.9-.5 3.3-1.4 4.2-1 1-2.5 1.4-4.5 1.4-1.4 0-2.7-.2-3.9-.7zm6.8-8.3c0-1.5-1.1-2.5-2.6-2.5-1.4 0-2.5 1-2.5 2.5s1 2.4 2.5 2.4 2.6-1 2.6-2.4zM54.5 12.5a1.5 1.5 0 1 1 3 0v.5c.4-1 1.1-2 2-2 1 0 1.5.6 1.5 1.5 0 .7-.5 1.2-1.2 1.4-1.5.3-2.3 1.5-2.3 3.6v2.8a1.5 1.5 0 1 1-3 0v-7.8M60.6 18.7c0-2.4 1.8-3.5 4.3-3.5 1 0 1.8.2 2.6.5v-.2c0-1.2-.8-2-2.3-2-.8 0-1.5.2-2 .4h-.5c-.7 0-1.3-.5-1.3-1.2 0-.5.4-1 .9-1.2.9-.3 2-.5 3.3-.5 1.7 0 2.8.4 3.6 1.2.8.8 1.1 2 1.1 3.4v4.8c0 .8-.6 1.4-1.4 1.4-.9 0-1.5-.6-1.5-1.2a4 4 0 0 1-3.2 1.3c-2 0-3.6-1.2-3.6-3.2zm6.9-.7v-.6c-.5-.2-1.2-.4-2-.4-1.2 0-2 .5-2 1.5 0 .8.7 1.3 1.7 1.3 1.4 0 2.3-.8 2.3-1.8zM72 12.5a1.5 1.5 0 1 1 3 0v.1c.6-.9 1.5-1.7 3-1.7 1.4 0 2.5.6 3 1.7 1-1 2-1.7 3.5-1.7 2.2 0 3.6 1.4 3.6 4v5.4a1.5 1.5 0 1 1-3 0v-4.5c0-1.4-.6-2.2-1.8-2.2-1 0-1.8.8-1.8 2.2v4.5a1.5 1.5 0 1 1-3 0v-4.5c0-1.4-.6-2.2-1.7-2.2-1.2 0-1.9.8-1.9 2.2v4.5a1.5 1.5 0 1 1-3 0v-7.8M89.7 12.5a1.5 1.5 0 1 1 3 0v.1c.7-.9 1.6-1.7 3.1-1.7 1.4 0 2.5.6 3 1.7 1-1 2-1.7 3.5-1.7 2.2 0 3.6 1.4 3.6 4v5.4a1.5 1.5 0 1 1-3 0v-4.5c0-1.4-.7-2.2-1.8-2.2s-1.8.8-1.8 2.2v4.5a1.5 1.5 0 1 1-3 0v-4.5c0-1.4-.7-2.2-1.8-2.2s-1.8.8-1.8 2.2v4.5a1.5 1.5 0 1 1-3 0v-7.8M106.8 18.7c0-2.4 1.8-3.5 4.3-3.5 1 0 1.8.2 2.6.5v-.2c0-1.2-.8-2-2.3-2-.8 0-1.5.2-2 .4h-.5c-.7 0-1.2-.5-1.2-1.2 0-.5.3-1 .8-1.2 1-.3 2-.5 3.4-.5 1.6 0 2.8.4 3.5 1.2.8.8 1.2 2 1.2 3.4v4.8c0 .8-.7 1.4-1.5 1.4-.9 0-1.4-.6-1.4-1.2a4 4 0 0 1-3.2 1.3c-2 0-3.7-1.2-3.7-3.2zm7-.7v-.6c-.6-.2-1.3-.4-2-.4-1.3 0-2 .5-2 1.5 0 .8.6 1.3 1.6 1.3 1.4 0 2.3-.8 2.3-1.8zM118.2 12.5a1.5 1.5 0 1 1 3 0v.5c.4-1 1.1-2 2-2 1 0 1.5.6 1.5 1.5 0 .7-.6 1.2-1.2 1.4-1.5.3-2.3 1.5-2.3 3.6v2.8a1.5 1.5 0 1 1-3 0v-7.8M125.6 8.7a1.5 1.5 0 1 1 3 0v11.6a1.5 1.5 0 1 1-3 0V8.7M131 24.6c-.5-.1-1-.5-1-1.2s.6-1.2 1.2-1.2h.5l.6.2c.6 0 .8-.1 1-.7l.2-.2-3.6-8.4-.2-.7c0-.8.7-1.4 1.5-1.4.7 0 1.2.4 1.4 1.1l2.3 6.2 2.2-6.2c.3-.6.7-1.1 1.5-1.1.7 0 1.4.6 1.4 1.4l-.1.7-3.7 8.9c-1 2.1-1.8 3-3.6 3-.7 0-1.1-.2-1.6-.4",fill:"#4C4C4C"}),o.createElement("path",{d:"M33.4 16.4a16.4 16.4 0 1 1-32.8 0 16.4 16.4 0 0 1 32.8 0",fill:"#15C39A"}),o.createElement("path",{d:"M20.2 18.6c-.7 0-1.2.6-1 1.3 0 .6.5 1 1 1H22l1-.2a7.3 7.3 0 0 1-7.4 3 7 7 0 0 1-5.5-4.4A7.5 7.5 0 0 1 17 8.9a7.9 7.9 0 0 1 6.2 3.5c.4.5 1 .6 1.6.3.4-.4.6-1 .3-1.5a9.6 9.6 0 1 0-.9 11.5l-.2 1.1v1c0 .6.4 1.1 1 1.2.6.2 1.2-.4 1.2-1v-6.4h-6",fill:"#FFF"})))},t.Robot=function(e){var t=e.className;return o.createElement("svg",{className:t,width:"167",height:"180",xmlns:"http://www.w3.org/2000/svg"},o.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd",stroke:"none"},o.createElement("ellipse",{fill:"#E4E6F2",cx:"76.736",cy:"169.525",rx:"76.736",ry:"8.525"}),o.createElement("g",{transform:"rotate(-12 160.324 -47.034)"},o.createElement("path",{d:"M16.538 65.746c.637-21.105 16.672-38.003 36.36-38.003 19.687 0 35.722 16.898 36.36 38.003h.166l.184 66.84s-11.152 9.413-35.01 9.413c-25.471 0-38.043-9.414-38.043-9.414l-.184-66.839h.167z",fill:"#CCE6FC"}),o.createElement("path",{d:"M54.184 119.778v11.835c8.157.775 23.328-1.874 31.472-7.361-.028-7.116 0-11.854 0-11.854s-14.139 7.175-31.472 7.38zm-25.809-2.668s7.084 2.463 14.45 2.463v11.491s-9.64.116-14.45-3.6V117.11z",fill:"#8CB4FB"}),o.createElement("path",{d:"M5.375 99.29l6.384-1.746s2.756-23.059 2.08-23.059c-.675 0-7.863-3.275-7.863-.152 0 3.122-.601 24.956-.601 24.956z",fill:"#E4F2FE"}),o.createElement("path",{fill:"#8CB4FB",d:"M4.267 66.614l8.358 1.776-5.66 18.81L.197 85.76z"}),o.createElement("path",{d:"M87.871 85.607V72.666c-35.454 16.21-67.514 5.257-72.437 3.263v13.236c10.357 4.49 51.39 9.867 72.437-3.558z",fill:"#8CB4FB",fillRule:"nonzero"}),o.createElement("path",{d:"M30.714 135.91l6.646 8.524s9.23 3.075 15.702 2.353c6.472-.722 16.167-.043 17.789-1.681 1.621-1.639 7.412-9.304 7.412-9.304s-15.5 3.998-24.088 3.255c-8.588-.743-23.461-3.147-23.461-3.147z",fill:"#8CB4FB"}),o.createElement("path",{d:"M86.305 64.552h.698v-.7l-.7.002.002.698zm.187 65.794l.001.347.258-.544c-.05.04-.136.107-.259.197zm-74.103-.026a8.282 8.282 0 0 1-.289-.196l.29.565-.001-.369zm-.187-65.768l-.002-.702-.7.002v.7h.702z",stroke:"none",strokeWidth:"1.4"}),o.createElement("path",{d:"M33.482 40.864c-7.739 6.54-10.257 18.802-10.257 28.202v59.05",stroke:"#FFF",strokeWidth:"3.15"}),o.createElement("path",{d:"M11.54 71.23c6.32 2.718 19.888 6.893 36.359 6.893 17.469 0 30.294-4.146 37.842-7.007M12 84.576c6.32 2.719 20.906 6.73 37.376 6.73 17.47 0 28.688-3.838 36.235-6.7",stroke:"#4E5356",strokeWidth:"1.4"}),o.createElement("path",{d:"M28.979 33.806a94.487 94.487 0 0 0 20.171 2.158c8.168 0 15.334-.758 21.42-1.858",stroke:"#4E5356",strokeWidth:"1.89"}),o.createElement("ellipse",{stroke:"#4E5356",strokeWidth:"1.4",fill:"#8CB4FB",cx:"34.333",cy:"54.621",rx:"2.131",ry:"2.21"}),o.createElement("path",{stroke:"#4E5356",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round",d:"M36.552 65.712l5.062-3.595 5.233 3.436 3.566-4.302 6.125 4.273 6.212-3.666 5.277 3.622M57.309 49.253l5.701 4.992M57.309 54.767l5.938-5.514"}),o.createElement("path",{d:"M26.534 136.392l6.445 7.536s6.97 2.73 16.353 2.73c9.382 0 17.33-1.776 17.33-1.776l6.823-8.49",stroke:"#4E5356",strokeWidth:"1.4"}),o.createElement("g",{transform:"rotate(-27 52.62 -33.966)"},o.createElement("ellipse",{stroke:"#4E5356",strokeWidth:"1.4",fill:"#8CB4FB",cx:"20.571",cy:"2.21",rx:"2.131",ry:"2.21"}),o.createElement("path",{d:"M20.643 8.579l.217-4.388",stroke:"#4E5356",strokeWidth:"1.4"}),o.createElement("path",{d:"M1.905 14.627s10.26-5.97 20.031-5.97c9.771 0 20.487 6.995 20.487 6.995s-12.013 2.706-19.335 2.706c-7.322 0-21.183-3.731-21.183-3.731z",fill:"#FFF"}),o.createElement("path",{d:"M7.284 15.727s8.657-5.244 18.374-4.223c9.717 1.021 17.52 8.087 17.52 8.087s-10.683 2.27-17.965 1.504c-7.282-.765-17.929-5.368-17.929-5.368z",fill:"#8CB4FB"}),o.createElement("path",{d:"M.298 15.243s13.31 3.63 21.887 3.455c8.577-.173 19.77-.726 19.912-2.618-3.333-3.004-12.298-7.646-21.237-7.196C9.597 9.451.298 15.243.298 15.243z",stroke:"#4E5356",strokeWidth:"1.4"}))),o.createElement("path",{fill:"#CCE6FC",d:"M33.336 118.155l4.936-.143v28.415l-4.936.143z"}),o.createElement("path",{d:"M25.86 92.406v24.49l12.98.073V92.48l-12.98-.073z",stroke:"#4E5356",strokeWidth:"1.4"}),o.createElement("path",{d:"M30.894 116.818l.094 22.25 8.089 3.766-.092-26.016h-8.09z",stroke:"#4E5356",strokeWidth:"1.4"}),o.createElement("path",{d:"M27.161 137.546l13.005 5.757-11.5 27.534-12.694-5.579s-.434-11.485.026-17.511c.052-.68 11.163-10.201 11.163-10.201z",fill:"#FFF"}),o.createElement("path",{fill:"#8CB4FB",d:"M27.164 137.549l13.906 6.192-13.367 30.022-9.72-4.327 1.536-20.12z"}),o.createElement("path",{d:"M28.312 137.61l-12.24 10.266-.529 18.49 12.839 5.716 12.797-28.743-12.867-5.73z",stroke:"#4E5356",strokeWidth:"1.4"}),o.createElement("path",{fill:"#CCE6FC",d:"M119.77 111.8l9.228-1.962 5.908 27.794-9.229 1.962z"}),o.createElement("path",{fill:"#FFF",d:"M114.081 87.973l11.912-2.532 4.595 21.618-11.912 2.532z"}),o.createElement("path",{fill:"#8CB4FB",d:"M116.738 91.14l10.72-2.278 4.464 21-10.72 2.279z"}),o.createElement("path",{fill:"#FFF",d:"M124.573 135.213l14.084-3.542 7.226 16.631-4.126 16.998-10.462 1.534z"}),o.createElement("path",{fill:"#8CB4FB",d:"M123.67 138.73l14.89-3.165 9.106 15.193-4.023 15.084-13.596 2.89z"}),o.createElement("path",{d:"M117.94 110.968l5.32 23.864 7.564-1.608-5.32-23.864-7.564 1.608z",stroke:"#4E5356",strokeWidth:"1.4"}),o.createElement("path",{d:"M123.194 134.795l6.541 30.777 12.216-2.597 4.024-16.97-9.05-14.128-13.731 2.918zM112.81 86.734l12.33-2.62 5.091 23.954-12.33 2.621z",stroke:"#4E5356",strokeWidth:"1.4"}),o.createElement("path",{d:"M79.881 53.454c0-9.556 9.692-17.224 16.68-15.353 6.986 1.87 4.872 13.52 1.293 12.004-4.088-1.73.41-12.004 8.663-12.004s4.96 18.666 0 16.544 3.847-11.938 11.777-9.397",stroke:"#8CB4FB",strokeWidth:"1.89"}),o.createElement("ellipse",{stroke:"#4E5356",strokeWidth:"1.89",strokeLinecap:"round",strokeLinejoin:"round",cx:"11.007",cy:"58.34",rx:"4.717",ry:"4.736"}),o.createElement("ellipse",{stroke:"#4E5356",strokeWidth:"1.89",strokeLinecap:"round",strokeLinejoin:"round",cx:"96.235",cy:"3.4",rx:"3.145",ry:"3.157"}),o.createElement("path",{d:"M33.196 21.101a8.262 8.262 0 0 0-8.26-8.262 8.261 8.261 0 0 0 8.26-8.263 8.261 8.261 0 0 0 8.26 8.263c-4.561 0-8.26 3.699-8.26 8.262M158.496 30.73a8.262 8.262 0 0 0-8.26-8.262 8.261 8.261 0 0 0 8.26-8.263 8.261 8.261 0 0 0 8.26 8.263c-4.561 0-8.26 3.699-8.26 8.262",fill:"#F5EF93"}),o.createElement("path",{d:"M34.378 20.966c0-3.716-3.001-6.73-6.703-6.73 3.702 0 6.703-3.011 6.703-6.728 0 3.717 3 6.729 6.702 6.729-3.701 0-6.702 3.013-6.702 6.729zM160.077 29.135c0-2.964-2.394-5.368-5.347-5.368 2.953 0 5.347-2.402 5.347-5.367 0 2.965 2.394 5.367 5.346 5.367-2.952 0-5.346 2.404-5.346 5.368z",stroke:"#4E5356",strokeWidth:"1.89",strokeLinecap:"round",strokeLinejoin:"round"}),o.createElement("path",{d:"M39.152 125.147l6.168-2.052",stroke:"#4E5356",strokeWidth:"1.4"})))},t.ArrowIcon=function(e){var t=e.className;return o.createElement(i.IconWrapper,r.__assign({},{className:t},{viewBox:"0 0 16 16",width:16}),o.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none"},o.createElement("circle",{fill:"#15C39A",cx:"8",cy:"8",r:"8"}),o.createElement("path",{stroke:"#FFF",strokeWidth:"1.5",strokeLinecap:"round",d:"M7.1 4.9L10.3 8 7 11.2"})))}},1411:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(13),i=n(122),s=n(592),a=n(952),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.back=function(){window.history.back()},t.prototype.render=function(){return o.createElement(i.BasePage,{title:"Page not found | Grammarly"},o.createElement("div",null,o.createElement(s.Logo,{mainPageUrl:this.context.appConfig.funnel.mainPage}),o.createElement("div",{className:a.header},o.createElement("div",{className:a.headOne},"Sorry, we couldn’t find that ",this.props.requestedData),o.createElement("div",{className:a.headSub},o.createElement("span",{className:a.sub},"We can’t get you there from here, but here are some options that might help you get back on track:"))),o.createElement("div",{className:a.linkWrapper},o.createElement("span",{className:a.home},"Go to the"," ",o.createElement("a",{"data-name":"linkHomePage",className:a.link,href:this.context.appConfig.funnel.mainPage},"Grammarly Homepage"))),o.createElement("div",{className:a.linkWrapper},o.createElement("span",{className:a.back},"Return to"," ",o.createElement("a",{"data-name":"linkBackPage",className:a.link,onClick:this.back},"Previous Page"))),o.createElement("div",{className:a.linkWrapper},o.createElement("span",{className:a.support},"Contact"," ",o.createElement("a",{"data-name":"linkSupportPage",className:a.link,href:this.context.appConfig.support.mainPage},"Grammarly Support")))))},t}(i.BaseComponent);t.Error404Page=c},1412:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(644),n(1437),n(954);var r=n(218);n(1440);try{"edge"===r().browser&&(window.fetch=null)}catch(e){}n(401)},1413:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(6),i=n(1418);t.errorSource={client:"client",server:"server"},t.accountType={free:"free",premium:"premium"};var s=function(){function e(e,t,n,r){var i=this;this._gnar=e,this._userActivity=t,this._clientName=n,this.pingMaybeGnarDelay=r,this._eventLogger=o.Monitoring.Logging.getLogger("events.tracking"),this._exceptionLogger=o.Monitoring.Logging.getLogger("exceptions"),this._unhandledLogger=this._exceptionLogger.getLogger("unhandled"),this._userActivityLogger=o.Monitoring.Logging.getLogger("pingActivity"),this._tsRoot=o.Monitoring.TimeSeries.root,this.getContainerId=function(){return i._gnar.getContainerId()},this._failedToFetch="Failed to fetch",this._rejections=new Map,o.Monitoring.Logging.root.debug("Starting telemetry"),window.addEventListener("error",this._unhandledError.bind(this)),window.addEventListener("unhandledrejection",this._unhandledRejection.bind(this)),window.addEventListener("rejectionhandled",this._rejectionHandled.bind(this)),document.addEventListener("visibilitychange",this._visibilityChanged.bind(this)),this._visibilityChanged(),window.screen&&o.Monitoring.Logging.getLogger("userStats").info("Screen",{size:window.screen.width+"x"+window.screen.height})}return e.prototype.listenUserActivity=function(){var e=this;this._userActivitySubscription?this._userActivitySubscription.unsubscribe():this._userActivitySubscription=this._userActivity.generalActivity.throttleTime(this.pingMaybeGnarDelay).subscribe(function(){e._gnar.pingMaybe(),e._userActivityLogger.info("Ping activity")})},e.prototype.setUser=function(e,t){o.Monitoring.Logging.root.context.add({user:{id:e}}),this._gnar.setUser(e,t),this._logEvent("setUser"),this._tsRoot.getCounter("userChanged").increment(),this.listenUserActivity()},e.prototype._track=function(e,t){return void 0===t&&(t={}),this._gnar.track(r.__assign({eventName:this._clientName+"/"+e},t))},e.prototype.documentListOpened=function(){this._logEvent("myGrammarly-page-show"),this._track("myGrammarly-page-show")},e.prototype.deleteDocument=function(e){this._logEvent("deleteDocument-button-click",{docId:e}),this._track("deleteDocument-button-click")},e.prototype.uploadDocument=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n=""),this._logEvent("uploadDocument-form-submit",{isSuccess:e,errorSource:t,errorMessage:n}),this._track("uploadDocument-form-submit",{isSuccess:e,errorSource:t,errorMessage:n})},e.prototype.downloadDocument=function(e){this._logEvent("downloadDocument-button-click",{docId:e}),this._track("downloadDocument-button-click")},e.prototype.copyDocument=function(e){this._logEvent("copyDocument-button-click",{docId:e}),this._track("copyDocument-button-click")},e.prototype.newDocument=function(){this._logEvent("newDocument-button-click"),this._track("newDocument-button-click")},e.prototype.documentShow=function(e){this._logEvent("document-page-show",{docId:e}),this._track("document-page-show"),this._tsRoot.getCounter("documentPageShow").increment()},e.prototype.reportOpened=function(e){this._logEvent("detailedReport-page-show",{score:e}),this._track("detailedReport-page-show")},e.prototype.reportDownload=function(e){this._logEvent("detailedReportDownload-button-click",{score:e}),this._track("detailedReportDownload-button-click")},e.prototype.settingsToggled=function(e,t){this._logEvent("setting-toggle-click",{isEnabled:e,settingName:t}),this._track("setting-toggle-click",{isEnabled:e,settingName:t})},e.prototype.documentGenreSelected=function(e){this._logEvent("documentGenre-button-click",{documentGenre:e}),this._track("documentGenre-button-click",{documentGenre:e})},e.prototype.profileOpened=function(){this._logEvent("profile-page-show"),this._track("profile-page-show")},e.prototype.accountOpened=function(){this._logEvent("account-page-show"),this._track("account-page-show")},e.prototype.supportClicked=function(){this._logEvent("support-link-click"),this._track("support-link-click")},e.prototype.deleteAccountButtonClicked=function(e){this._logEvent("deleteAccount-button-click",{accountType:e}),this._track("deleteAccount-button-click",{accountType:e})},e.prototype.keepAccountButtonClicked=function(e){this._logEvent("keepAccount-button-click",{accountType:e}),this._track("keepAccount-button-click",{accountType:e})},e.prototype.deleteAccountFormSubmit=function(e,t,n,r){void 0===n&&(n=""),void 0===r&&(r=""),this._logEvent("deleteAccount-form-submit",{isSuccess:e,accountType:t,errorSource:n,errorMessage:r}),this._track("deleteAccount-form-submit",{isSuccess:e,accountType:t,errorSource:n,errorMessage:r})},e.prototype.cancelFutureBillingClicked=function(){this._logEvent("cancelFutureBilling-button-click"),this._track("cancelFutureBilling-button-click")},e.prototype.confirmSubscriptionCancelClicked=function(){this._logEvent("confirmSubscriptionCancel-button-click"),this._track("confirmSubscriptionCancel-button-click")},e.prototype.continueUsingGrammarlyClicked=function(){this._logEvent("continueUsingGrammarly-button-click"),this._track("continueUsingGrammarly-button-click")},e.prototype.reactivateSubscriptionClicked=function(){this._logEvent("reactivateSubscription-button-click"),this._track("reactivateSubscription-button-click")},e.prototype.downloadReceiptButtonClicked=function(){this._logEvent("downloadReceipt-form-submit"),this._track("downloadReceipt-form-submit",{isSuccess:!0})},e.prototype.downloadReceiptError=function(e){this._exceptionLogger.error("downloadReceipt-form-error",e),this._track("downloadReceipt-form-submit",{isSuccess:!1,errorSource:t.errorSource.client,errorMessage:e.message})},e.prototype.appsPageShown=function(){this._logEvent("apps-page-show"),this._track("apps-page-show")},e.prototype.installAppClicked=function(e){this._logEvent("installApp-button-click",{app:e}),this._track("installApp-button-click",{app:e})},e.prototype.learnMoreClicked=function(e){this._logEvent("learnMoreAboutApp-button-click",{app:e}),this._track("learnMoreAboutApp-button-click",{app:e})},e.prototype.bannerActionClicked=function(e,t){this._logEvent("bannerMainAction-button-click",{bannerType:e,cta:t}),this._track("bannerMainAction-button-click",{bannerType:e,cta:t})},e.prototype.bannerCloseClicked=function(e){this._logEvent("bannerClose-button-click",{bannerType:e}),this._track("bannerClose-button-click",{bannerType:e})},e.prototype.bannerDismissClicked=function(e){this._logEvent("bannerDismiss-button-click",{bannerType:e}),this._track("bannerDismiss-button-click",{bannerType:e})},e.prototype.bannerLaterClicked=function(e){this._logEvent("bannerRemindLater-button-click",{bannerType:e}),this._track("bannerRemindLater-button-click",{bannerType:e})},e.prototype.bannerNotificationShow=function(e){this._logEvent("banner-notification-show",{bannerType:e}),this._track("banner-notification-show",{bannerType:e})},e.prototype.dictionaryOpened=function(){this._logEvent("dictionary-page-show"),this._track("dictionary-page-show")},e.prototype.addToDictionary=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n=""),this._logEvent("addToDictionary-button-click",{isSuccess:e,errorSource:t,errorMessage:n}),this._track("addToDictionary-button-click")},e.prototype.removeFromDictionary=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n=""),this._logEvent("removeFromDictionary-button-click",{isSuccess:e,errorSource:t,errorMessage:n}),this._track("removeFromDictionary-button-click")},e.prototype.languageOpened=function(){this._logEvent("language-page-show"),this._track("language-page-show")},e.prototype.showTour=function(e){this._logEvent("tour-popup-show",{theme:e}),this._track("tour-popup-show",{theme:e})},e.prototype.closeTour=function(e){this._logEvent("tour-popup-close",{theme:e}),this._track("tour-popup-close",{theme:e})},e.prototype.showTutorial=function(){this._logEvent("tutorial-popup-show"),this._track("tutorial-popup-show")},e.prototype.closeTutorial=function(){this._logEvent("tutorial-popup-close"),this._track("tutorial-popup-close")},e.prototype._getExtraProps=function(e){return e.reason||o.EventProps.fromAny(e)},e.prototype._logUnhandledPromiseRejection=function(e,t,n){var r=this._exceptionLogger.getLogger("unhandled.promiseRejection");("error"===e?r.error:r.warn).bind(r)("Unhandled rejection at promise: "+t,this._getExtraProps(n))},e.prototype._unhandledError=function(e){var t=e.error?e.error.message:e.message,n=i.isExternalException(e),r=n?o.Logging.LogLevel.INFO:o.Logging.LogLevel.ERROR,s=n?"unknownUnhandledError":"unhandledError";this._tsRoot.getCounter(s).increment();var a=e.reason;this._unhandledLogger.log(r,"Unhandled exception at "+e.filename+":"+e.lineno+":"+e.colno+" \n"+t,e.error,a&&{reason:a})},e.prototype._isEventSimulated=function(e){return!1===e.isTrusted},e.prototype._isExternalPromiseRejection=function(e,t){return i.isExternalException(e)||i.isExternalExceptionMessage(t)||this._isEventSimulated(e)},e.prototype._unhandledRejection=function(e){this._rejections.set(e.promise,Date.now());var t=e.reason?e.reason.message:e.message;this._isExternalPromiseRejection(e,t)?this._tsRoot.getCounter("unknownUnhandledPromise").increment():t===this._failedToFetch?this._logUnhandledPromiseRejection(e.reason&&e.reason.isRxFetch?"error":"warn",t,e):(this._logUnhandledPromiseRejection("error",t,e),this._tsRoot.getCounter("unhandledPromise").increment())},e.prototype._rejectionHandled=function(e){var t=this._rejections.get(e.promise);this._rejections.delete(e.promise);var n=e.reason?e.reason.message:e.message;this._exceptionLogger.getLogger("handled.promiseRejection").error("Rejection handled at promise: "+n+" in "+(t?Date.now()-t:NaN)+" ms",e.reason)},e.prototype._visibilityChanged=function(){o.Monitoring.Logging.root.context.add({visibilityState:document.visibilityState})},e.prototype._logEvent=function(e,t){void 0===t&&(t={}),this._eventLogger.info(e,t)},e}();t.EditorTelemetry=s},1414:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.gnar=e}return e.prototype.addToDictionaryButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/addToDictionary-button-click",object:"button",objectId:"addToDictionary",pageId:e})},e.prototype.advancedIssuesButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/advancedIssues-button-click",isDenali:!0,object:"button",objectId:"advancedIssues",pageId:e,placement:t})},e.prototype.advancedIssuesSidebarShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/advancedIssues-sidebar-show",isDenali:!0,object:"sidebar",objectId:"advancedIssues",pageId:e,withItemizedIssues:t})},e.prototype.appsPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/apps-page-show",object:"page",objectId:"apps",pageId:e,url:t})},e.prototype.assistantCloseButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/assistantClose-button-click",isDenali:!0,object:"button",objectId:"assistantClose",pageId:e,placement:t})},e.prototype.assistantOpenButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/assistantOpen-button-click",isDenali:!0,object:"button",objectId:"assistantOpen",pageId:e,placement:t})},e.prototype.assistantSidebarClose=function(e){return this.gnar.track({action:"close",eventName:"desktopEditor/assistant-sidebar-close",isDenali:!0,object:"sidebar",objectId:"assistant",pageId:e})},e.prototype.assistantSidebarShow=function(e){return this.gnar.track({action:"show",eventName:"desktopEditor/assistant-sidebar-show",isDenali:!0,object:"sidebar",objectId:"assistant",pageId:e})},e.prototype.backToClassicButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/backToClassic-button-click",object:"button",objectId:"backToClassic",pageId:e})},e.prototype.bannerCloseButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/bannerClose-button-click",object:"button",objectId:"bannerClose",bannerType:e,pageId:t})},e.prototype.bannerDismissButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/bannerDismiss-button-click",object:"button",objectId:"bannerDismiss",bannerType:e,pageId:t})},e.prototype.bannerMainActionButtonClick=function(e,t,n){return this.gnar.track({action:"click",eventName:"desktopEditor/bannerMainAction-button-click",object:"button",objectId:"bannerMainAction",bannerType:e,cta:t,pageId:n})},e.prototype.bannerNotificationShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/banner-notification-show",object:"notification",objectId:"banner",bannerType:e,pageId:t})},e.prototype.bannerRemindLaterButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/bannerRemindLater-button-click",object:"button",objectId:"bannerRemindLater",bannerType:e,pageId:t})},e.prototype.cancelFutureBillingButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/cancelFutureBilling-button-click",object:"button",objectId:"cancelFutureBilling",pageId:e})},e.prototype.confirmSubscriptionCancelButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/confirmSubscriptionCancel-button-click",object:"button",objectId:"confirmSubscriptionCancel",pageId:e})},e.prototype.contactSupportButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/contactSupport-button-click",object:"button",objectId:"contactSupport",pageId:e})},e.prototype.continueUsingGrammarlyButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/continueUsingGrammarly-button-click",object:"button",objectId:"continueUsingGrammarly",pageId:e})},e.prototype.copyDocumentButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/copyDocument-button-click",object:"button",objectId:"copyDocument",pageId:e})},e.prototype.copyToClipboardButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/copyToClipboard-button-click",isDenali:!0,object:"button",objectId:"copyToClipboard",pageId:e})},e.prototype.deleteAccountButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/deleteAccount-button-click",object:"button",objectId:"deleteAccount",accountType:e,pageId:t})},e.prototype.deleteAccountFormFail=function(e,t,n,r){return this.gnar.track({action:"fail",eventName:"desktopEditor/deleteAccount-form-fail",object:"form",objectId:"deleteAccount",accountType:e,pageId:t,fieldErrors:n,formErrorMessage:r})},e.prototype.deleteAccountFormSuccess=function(e,t){return this.gnar.track({action:"success",eventName:"desktopEditor/deleteAccount-form-success",object:"form",objectId:"deleteAccount",accountType:e,pageId:t})},e.prototype.deleteDocumentButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/deleteDocument-button-click",object:"button",objectId:"deleteDocument",pageId:e})},e.prototype.denaliDocumentPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/document-page-show",isDenali:!0,object:"page",objectId:"document",pageId:e,url:t})},e.prototype.detailedReportDownloadButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/detailedReportDownload-button-click",object:"button",objectId:"detailedReportDownload",pageId:e,reportScore:t})},e.prototype.detailedReportPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/detailedReport-page-show",object:"page",objectId:"detailedReport",pageId:e,url:t})},e.prototype.dismissAllButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/dismissAll-button-click",isDenali:!0,object:"button",objectId:"dismissAll",lensName:e,pageId:t})},e.prototype.documentGenreButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/documentGenre-button-click",object:"button",objectId:"documentGenre",documentGenre:e,pageId:t})},e.prototype.documentPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/document-page-show",object:"page",objectId:"document",pageId:e,url:t})},e.prototype.documentShow=function(e){return this.gnar.track({action:"show",eventName:"desktopEditor/document-show",object:"document",pageId:e})},e.prototype.documentStatisticsButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/documentStatistics-button-click",isDenali:!0,object:"button",objectId:"documentStatistics",pageId:e})},e.prototype.documentTypeUpdate=function(e,t){return this.gnar.track({action:"update",eventName:"desktopEditor/document-type-update",object:"type",objectId:"document",documentType:e,pageId:t})},e.prototype.doneEditingButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/doneEditing-button-click",isDenali:!0,object:"button",objectId:"doneEditing",pageId:e,placement:t})},e.prototype.downloadButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/download-button-click",isDenali:!0,object:"button",objectId:"download",pageId:e})},e.prototype.downloadDocumentButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/downloadDocument-button-click",object:"button",objectId:"downloadDocument",pageId:e})},e.prototype.downloadReceiptButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/downloadReceipt-button-click",object:"button",objectId:"downloadReceipt",pageId:e})},e.prototype.editEmailButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/editEmail-button-click",object:"button",objectId:"editEmail",pageId:e})},e.prototype.editEmailFormFail=function(e,t,n){return this.gnar.track({action:"fail",eventName:"desktopEditor/editEmail-form-fail",object:"form",objectId:"editEmail",pageId:e,fieldErrors:t,formErrorMessage:n})},e.prototype.editEmailFormSuccess=function(e){return this.gnar.track({action:"success",eventName:"desktopEditor/editEmail-form-success",object:"form",objectId:"editEmail",pageId:e})},e.prototype.editNameButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/editName-button-click",object:"button",objectId:"editName",pageId:e})},e.prototype.editNameFormFail=function(e,t,n){return this.gnar.track({action:"fail",eventName:"desktopEditor/editName-form-fail",object:"form",objectId:"editName",pageId:e,fieldErrors:t,formErrorMessage:n})},e.prototype.editNameFormSuccess=function(e){return this.gnar.track({action:"success",eventName:"desktopEditor/editName-form-success",object:"form",objectId:"editName",pageId:e})},e.prototype.editPasswordButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/editPassword-button-click",object:"button",objectId:"editPassword",pageId:e})},e.prototype.editPasswordFormFail=function(e,t,n){return this.gnar.track({action:"fail",eventName:"desktopEditor/editPassword-form-fail",object:"form",objectId:"editPassword",pageId:e,fieldErrors:t,formErrorMessage:n})},e.prototype.editPasswordFormSuccess=function(e){return this.gnar.track({action:"success",eventName:"desktopEditor/editPassword-form-success",object:"form",objectId:"editPassword",pageId:e})},e.prototype.entireDocumentCopy=function(e){return this.gnar.track({action:"copy",eventName:"desktopEditor/entire-document-copy",object:"document",objectId:"entire",pageId:e})},e.prototype.entireDocumentPaste=function(e){return this.gnar.track({action:"paste",eventName:"desktopEditor/entire-document-paste",object:"document",objectId:"entire",pageId:e})},e.prototype.extensionPopupPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/extensionPopup-page-show",object:"page",objectId:"extensionPopup",pageId:e,url:t})},e.prototype.getPremiumButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/getPremium-button-click",isDenali:!0,object:"button",objectId:"getPremium",pageId:e,placement:t})},e.prototype.goalsFormSuccess=function(e,t,n,r,o,i,s){return this.gnar.track({action:"success",eventName:"desktopEditor/goals-form-success",isDenali:!0,object:"form",objectId:"goals",pageId:e,source:t,audience:n,domain:r,emotion:o,intent:i,style:s})},e.prototype.goalsPopupShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/goals-popup-show",isDenali:!0,object:"popup",objectId:"goals",pageId:e,source:t})},e.prototype.installAppButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/installApp-button-click",object:"button",objectId:"installApp",app:e,pageId:t})},e.prototype.keepAccountButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/keepAccount-button-click",object:"button",objectId:"keepAccount",accountType:e,pageId:t})},e.prototype.learnMoreAboutAppButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/learnMoreAboutApp-button-click",object:"button",objectId:"learnMoreAboutApp",app:e,pageId:t})},e.prototype.lensSidebarShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/lens-sidebar-show",isDenali:!0,object:"sidebar",objectId:"lens",lensName:e,pageId:t})},e.prototype.myGrammarlyPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/myGrammarly-page-show",object:"page",objectId:"myGrammarly",pageId:e,url:t})},e.prototype.newDocumentButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/newDocument-button-click",object:"button",objectId:"newDocument",pageId:e})},e.prototype.newDocumentDenaliButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/newDocument-button-click",isDenali:!0,object:"button",objectId:"newDocument",pageId:e})},e.prototype.newTitleButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/newTitle-button-click",isDenali:!0,object:"button",objectId:"newTitle",pageId:e})},e.prototype.notAuthorizedUserSignout=function(e){return this.gnar.track({action:"signout",eventName:"desktopEditor/notAuthorized-user-signout",object:"user",objectId:"notAuthorized",pageId:e})},e.prototype.openLensButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/openLens-button-click",isDenali:!0,object:"button",objectId:"openLens",lensName:e,pageId:t})},e.prototype.plagiarismButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/plagiarism-button-click",isDenali:!0,object:"button",objectId:"plagiarism",pageId:e,placement:t})},e.prototype.printButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/print-button-click",isDenali:!0,object:"button",objectId:"print",pageId:e})},e.prototype.professionalProofreadingButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/professionalProofreading-button-click",isDenali:!0,object:"button",objectId:"professionalProofreading",pageId:e,placement:t})},e.prototype.profileAccountPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/profileAccount-page-show",object:"page",objectId:"profileAccount",pageId:e,url:t})},e.prototype.profileDictionaryPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/profileDictionary-page-show",object:"page",objectId:"profileDictionary",pageId:e,url:t})},e.prototype.profileLanguagePageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/profileLanguage-page-show",object:"page",objectId:"profileLanguage",pageId:e,url:t})},e.prototype.reactivateSubscriptionButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/reactivateSubscription-button-click",object:"button",objectId:"reactivateSubscription",pageId:e})},e.prototype.removeFromDictionaryButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/removeFromDictionary-button-click",object:"button",objectId:"removeFromDictionary",pageId:e})},e.prototype.reportPopupShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/report-popup-show",object:"popup",objectId:"report",pageId:e,reportScore:t})},e.prototype.selectLanguageButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/selectLanguage-button-click",object:"button",objectId:"selectLanguage",language:e,pageId:t})},e.prototype.setGoalsButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/setGoals-button-click",isDenali:!0,object:"button",objectId:"setGoals",pageId:e})},e.prototype.settingToggleClick=function(e,t,n){return this.gnar.track({action:"click",eventName:"desktopEditor/setting-toggle-click",object:"toggle",objectId:"setting",isEnabled:e,pageId:t,settingName:n})},e.prototype.showGoalsNewDocumentFormSuccess=function(e,t,n){return this.gnar.track({action:"success",eventName:"desktopEditor/showGoalsNewDocument-form-success",isDenali:!0,object:"form",objectId:"showGoalsNewDocument",isEnabled:e,pageId:t,source:n})},e.prototype.subscriptionBillingInfoPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/subscriptionBillingInfo-page-show",object:"page",objectId:"subscriptionBillingInfo",pageId:e,url:t})},e.prototype.subscriptionCancelDonePageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/subscriptionCancelDone-page-show",object:"page",objectId:"subscriptionCancelDone",pageId:e,url:t})},e.prototype.subscriptionCancelPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/subscriptionCancel-page-show",object:"page",objectId:"subscriptionCancel",pageId:e,url:t})},e.prototype.subscriptionManagePageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/subscriptionManage-page-show",object:"page",objectId:"subscriptionManage",pageId:e,url:t})},e.prototype.subscriptionSummaryPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/subscriptionSummary-page-show",object:"page",objectId:"subscriptionSummary",pageId:e,url:t})},e.prototype.supportButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/support-button-click",object:"button",objectId:"support",pageId:e})},e.prototype.supportLinkClick=function(e,t){return this.gnar.track({action:"click",eventName:"desktopEditor/support-link-click",object:"link",objectId:"support",pageId:e,placement:t})},e.prototype.switchToDenaliButtonClick=function(e){return this.gnar.track({action:"click",eventName:"desktopEditor/switchToDenali-button-click",object:"button",objectId:"switchToDenali",pageId:e})},e.prototype.tourPopupClose=function(e,t){return this.gnar.track({action:"close",eventName:"desktopEditor/tour-popup-close",object:"popup",objectId:"tour",pageId:e,theme:t})},e.prototype.tourPopupShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/tour-popup-show",object:"popup",objectId:"tour",pageId:e,theme:t})},e.prototype.tutorialPopupClose=function(e){return this.gnar.track({action:"close",eventName:"desktopEditor/tutorial-popup-close",object:"popup",objectId:"tutorial",pageId:e})},e.prototype.tutorialPopupShow=function(e){return this.gnar.track({action:"show",eventName:"desktopEditor/tutorial-popup-show",object:"popup",objectId:"tutorial",pageId:e})},e.prototype.uploadDocumentFormFail=function(e,t,n){return this.gnar.track({action:"fail",eventName:"desktopEditor/uploadDocument-form-fail",object:"form",objectId:"uploadDocument",pageId:e,fieldErrors:t,formErrorMessage:n})},e.prototype.uploadDocumentFormSuccess=function(e){return this.gnar.track({action:"success",eventName:"desktopEditor/uploadDocument-form-success",object:"form",objectId:"uploadDocument",pageId:e})},e.prototype.welcomeTourPopupClose=function(e,t){return this.gnar.track({action:"close",eventName:"desktopEditor/welcomeTour-popup-close",isDenali:!0,object:"popup",objectId:"welcomeTour",pageId:e,theme:t})},e.prototype.welcomeTourPopupShow=function(e,t){return this.gnar.track({action:"show",eventName:"desktopEditor/welcomeTour-popup-show",isDenali:!0,object:"popup",objectId:"welcomeTour",pageId:e,theme:t})},e}();t.GnarSpec=r},1415:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.gnar=e}return e.prototype.addToDictionaryButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/addToDictionary-button-click",object:"button",objectId:"addToDictionary",pageId:e})},e.prototype.advancedIssuesButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/advancedIssues-button-click",isDenali:!0,object:"button",objectId:"advancedIssues",pageId:e,placement:t})},e.prototype.advancedIssuesSidebarShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/advancedIssues-sidebar-show",isDenali:!0,object:"sidebar",objectId:"advancedIssues",pageId:e,withItemizedIssues:t})},e.prototype.appsPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/apps-page-show",object:"page",objectId:"apps",pageId:e,url:t})},e.prototype.assistantCloseButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/assistantClose-button-click",isDenali:!0,object:"button",objectId:"assistantClose",pageId:e,placement:t})},e.prototype.assistantOpenButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/assistantOpen-button-click",isDenali:!0,object:"button",objectId:"assistantOpen",pageId:e,placement:t})},e.prototype.assistantSidebarClose=function(e){return this.gnar.track({action:"close",eventName:"editor/assistant-sidebar-close",isDenali:!0,object:"sidebar",objectId:"assistant",pageId:e})},e.prototype.assistantSidebarShow=function(e){return this.gnar.track({action:"show",eventName:"editor/assistant-sidebar-show",isDenali:!0,object:"sidebar",objectId:"assistant",pageId:e})},e.prototype.backToClassicButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/backToClassic-button-click",object:"button",objectId:"backToClassic",pageId:e})},e.prototype.bannerCloseButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/bannerClose-button-click",object:"button",objectId:"bannerClose",bannerType:e,pageId:t})},e.prototype.bannerDismissButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/bannerDismiss-button-click",object:"button",objectId:"bannerDismiss",bannerType:e,pageId:t})},e.prototype.bannerMainActionButtonClick=function(e,t,n){return this.gnar.track({action:"click",eventName:"editor/bannerMainAction-button-click",object:"button",objectId:"bannerMainAction",bannerType:e,cta:t,pageId:n})},e.prototype.bannerNotificationShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/banner-notification-show",object:"notification",objectId:"banner",bannerType:e,pageId:t})},e.prototype.bannerRemindLaterButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/bannerRemindLater-button-click",object:"button",objectId:"bannerRemindLater",bannerType:e,pageId:t})},e.prototype.cancelFutureBillingButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/cancelFutureBilling-button-click",object:"button",objectId:"cancelFutureBilling",pageId:e})},e.prototype.confirmSubscriptionCancelButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/confirmSubscriptionCancel-button-click",object:"button",objectId:"confirmSubscriptionCancel",pageId:e})},e.prototype.contactSupportButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/contactSupport-button-click",object:"button",objectId:"contactSupport",pageId:e})},e.prototype.continueUsingGrammarlyButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/continueUsingGrammarly-button-click",object:"button",objectId:"continueUsingGrammarly",pageId:e})},e.prototype.copyDocumentButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/copyDocument-button-click",object:"button",objectId:"copyDocument",pageId:e})},e.prototype.copyToClipboardButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/copyToClipboard-button-click",isDenali:!0,object:"button",objectId:"copyToClipboard",pageId:e})},e.prototype.deleteAccountButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/deleteAccount-button-click",object:"button",objectId:"deleteAccount",accountType:e,pageId:t})},e.prototype.deleteAccountFormFail=function(e,t,n,r){return this.gnar.track({action:"fail",eventName:"editor/deleteAccount-form-fail",object:"form",objectId:"deleteAccount",accountType:e,pageId:t,fieldErrors:n,formErrorMessage:r})},e.prototype.deleteAccountFormSuccess=function(e,t){return this.gnar.track({action:"success",eventName:"editor/deleteAccount-form-success",object:"form",objectId:"deleteAccount",accountType:e,pageId:t})},e.prototype.deleteDocumentButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/deleteDocument-button-click",object:"button",objectId:"deleteDocument",pageId:e})},e.prototype.denaliDocumentPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/document-page-show",isDenali:!0,object:"page",objectId:"document",pageId:e,url:t})},e.prototype.detailedReportDownloadButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/detailedReportDownload-button-click",object:"button",objectId:"detailedReportDownload",pageId:e,reportScore:t})},e.prototype.detailedReportPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/detailedReport-page-show",object:"page",objectId:"detailedReport",pageId:e,url:t})},e.prototype.dismissAllButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/dismissAll-button-click",isDenali:!0,object:"button",objectId:"dismissAll",lensName:e,pageId:t})},e.prototype.documentGenreButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/documentGenre-button-click",object:"button",objectId:"documentGenre",documentGenre:e,pageId:t})},e.prototype.documentPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/document-page-show",object:"page",objectId:"document",pageId:e,url:t})},e.prototype.documentShow=function(e){return this.gnar.track({action:"show",eventName:"editor/document-show",object:"document",pageId:e})},e.prototype.documentStatisticsButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/documentStatistics-button-click",isDenali:!0,object:"button",objectId:"documentStatistics",pageId:e})},e.prototype.documentTypeUpdate=function(e,t){return this.gnar.track({action:"update",eventName:"editor/document-type-update",object:"type",objectId:"document",documentType:e,pageId:t})},e.prototype.doneEditingButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/doneEditing-button-click",isDenali:!0,object:"button",objectId:"doneEditing",pageId:e,placement:t})},e.prototype.downloadButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/download-button-click",isDenali:!0,object:"button",objectId:"download",pageId:e})},e.prototype.downloadDocumentButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/downloadDocument-button-click",object:"button",objectId:"downloadDocument",pageId:e})},e.prototype.downloadReceiptButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/downloadReceipt-button-click",object:"button",objectId:"downloadReceipt",pageId:e})},e.prototype.editEmailButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/editEmail-button-click",object:"button",objectId:"editEmail",pageId:e})},e.prototype.editEmailFormFail=function(e,t,n){return this.gnar.track({action:"fail",eventName:"editor/editEmail-form-fail",object:"form",objectId:"editEmail",pageId:e,fieldErrors:t,formErrorMessage:n})},e.prototype.editEmailFormSuccess=function(e){return this.gnar.track({action:"success",eventName:"editor/editEmail-form-success",object:"form",objectId:"editEmail",pageId:e})},e.prototype.editNameButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/editName-button-click",object:"button",objectId:"editName",pageId:e})},e.prototype.editNameFormFail=function(e,t,n){return this.gnar.track({action:"fail",eventName:"editor/editName-form-fail",object:"form",objectId:"editName",pageId:e,fieldErrors:t,formErrorMessage:n})},e.prototype.editNameFormSuccess=function(e){return this.gnar.track({action:"success",eventName:"editor/editName-form-success",object:"form",objectId:"editName",pageId:e})},e.prototype.editPasswordButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/editPassword-button-click",object:"button",objectId:"editPassword",pageId:e})},e.prototype.editPasswordFormFail=function(e,t,n){return this.gnar.track({action:"fail",eventName:"editor/editPassword-form-fail",object:"form",objectId:"editPassword",pageId:e,fieldErrors:t,formErrorMessage:n})},e.prototype.editPasswordFormSuccess=function(e){return this.gnar.track({action:"success",eventName:"editor/editPassword-form-success",object:"form",objectId:"editPassword",pageId:e})},e.prototype.entireDocumentCopy=function(e){return this.gnar.track({action:"copy",eventName:"editor/entire-document-copy",object:"document",objectId:"entire",pageId:e})},e.prototype.entireDocumentPaste=function(e){return this.gnar.track({action:"paste",eventName:"editor/entire-document-paste",object:"document",objectId:"entire",pageId:e})},e.prototype.extensionPopupPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/extensionPopup-page-show",object:"page",objectId:"extensionPopup",pageId:e,url:t})},e.prototype.getPremiumButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/getPremium-button-click",isDenali:!0,object:"button",objectId:"getPremium",pageId:e,placement:t})},e.prototype.goalsFormSuccess=function(e,t,n,r,o,i,s){return this.gnar.track({action:"success",eventName:"editor/goals-form-success",isDenali:!0,object:"form",objectId:"goals",pageId:e,source:t,audience:n,domain:r,emotion:o,intent:i,style:s})},e.prototype.goalsPopupShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/goals-popup-show",isDenali:!0,object:"popup",objectId:"goals",pageId:e,source:t})},e.prototype.installAppButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/installApp-button-click",object:"button",objectId:"installApp",app:e,pageId:t})},e.prototype.keepAccountButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/keepAccount-button-click",object:"button",objectId:"keepAccount",accountType:e,pageId:t})},e.prototype.learnMoreAboutAppButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/learnMoreAboutApp-button-click",object:"button",objectId:"learnMoreAboutApp",app:e,pageId:t})},e.prototype.lensSidebarShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/lens-sidebar-show",isDenali:!0,object:"sidebar",objectId:"lens",lensName:e,pageId:t})},e.prototype.myGrammarlyPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/myGrammarly-page-show",object:"page",objectId:"myGrammarly",pageId:e,url:t})},e.prototype.newDocumentButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/newDocument-button-click",object:"button",objectId:"newDocument",pageId:e})},e.prototype.newDocumentDenaliButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/newDocument-button-click",isDenali:!0,object:"button",objectId:"newDocument",pageId:e})},e.prototype.newTitleButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/newTitle-button-click",isDenali:!0,object:"button",objectId:"newTitle",pageId:e})},e.prototype.notAuthorizedUserSignout=function(e){return this.gnar.track({action:"signout",eventName:"editor/notAuthorized-user-signout",object:"user",objectId:"notAuthorized",pageId:e})},e.prototype.openLensButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/openLens-button-click",isDenali:!0,object:"button",objectId:"openLens",lensName:e,pageId:t})},e.prototype.plagiarismButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/plagiarism-button-click",isDenali:!0,object:"button",objectId:"plagiarism",pageId:e,placement:t})},e.prototype.printButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/print-button-click",isDenali:!0,object:"button",objectId:"print",pageId:e})},e.prototype.professionalProofreadingButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/professionalProofreading-button-click",isDenali:!0,object:"button",objectId:"professionalProofreading",pageId:e,placement:t})},e.prototype.profileAccountPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/profileAccount-page-show",object:"page",objectId:"profileAccount",pageId:e,url:t})},e.prototype.profileDictionaryPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/profileDictionary-page-show",object:"page",objectId:"profileDictionary",pageId:e,url:t})},e.prototype.profileLanguagePageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/profileLanguage-page-show",object:"page",objectId:"profileLanguage",pageId:e,url:t})},e.prototype.reactivateSubscriptionButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/reactivateSubscription-button-click",object:"button",objectId:"reactivateSubscription",pageId:e})},e.prototype.removeFromDictionaryButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/removeFromDictionary-button-click",object:"button",objectId:"removeFromDictionary",pageId:e})},e.prototype.reportPopupShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/report-popup-show",object:"popup",objectId:"report",pageId:e,reportScore:t})},e.prototype.selectLanguageButtonClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/selectLanguage-button-click",object:"button",objectId:"selectLanguage",language:e,pageId:t})},e.prototype.setGoalsButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/setGoals-button-click",isDenali:!0,object:"button",objectId:"setGoals",pageId:e})},e.prototype.settingToggleClick=function(e,t,n){return this.gnar.track({action:"click",eventName:"editor/setting-toggle-click",object:"toggle",objectId:"setting",isEnabled:e,pageId:t,settingName:n})},e.prototype.showGoalsNewDocumentFormSuccess=function(e,t,n){return this.gnar.track({action:"success",eventName:"editor/showGoalsNewDocument-form-success",isDenali:!0,object:"form",objectId:"showGoalsNewDocument",isEnabled:e,pageId:t,source:n})},e.prototype.subscriptionBillingInfoPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/subscriptionBillingInfo-page-show",object:"page",objectId:"subscriptionBillingInfo",pageId:e,url:t})},e.prototype.subscriptionCancelDonePageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/subscriptionCancelDone-page-show",object:"page",objectId:"subscriptionCancelDone",pageId:e,url:t})},e.prototype.subscriptionCancelPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/subscriptionCancel-page-show",object:"page",objectId:"subscriptionCancel",pageId:e,url:t})},e.prototype.subscriptionManagePageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/subscriptionManage-page-show",object:"page",objectId:"subscriptionManage",pageId:e,url:t})},e.prototype.subscriptionSummaryPageShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/subscriptionSummary-page-show",object:"page",objectId:"subscriptionSummary",pageId:e,url:t})},e.prototype.supportButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/support-button-click",object:"button",objectId:"support",pageId:e})},e.prototype.supportLinkClick=function(e,t){return this.gnar.track({action:"click",eventName:"editor/support-link-click",object:"link",objectId:"support",pageId:e,placement:t})},e.prototype.switchToDenaliButtonClick=function(e){return this.gnar.track({action:"click",eventName:"editor/switchToDenali-button-click",object:"button",objectId:"switchToDenali",pageId:e})},e.prototype.tourPopupClose=function(e,t){return this.gnar.track({action:"close",eventName:"editor/tour-popup-close",object:"popup",objectId:"tour",pageId:e,theme:t})},e.prototype.tourPopupShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/tour-popup-show",object:"popup",objectId:"tour",pageId:e,theme:t})},e.prototype.tutorialPopupClose=function(e){return this.gnar.track({action:"close",eventName:"editor/tutorial-popup-close",object:"popup",objectId:"tutorial",pageId:e})},e.prototype.tutorialPopupShow=function(e){return this.gnar.track({action:"show",eventName:"editor/tutorial-popup-show",object:"popup",objectId:"tutorial",pageId:e})},e.prototype.uploadDocumentFormFail=function(e,t,n){return this.gnar.track({action:"fail",eventName:"editor/uploadDocument-form-fail",object:"form",objectId:"uploadDocument",pageId:e,fieldErrors:t,formErrorMessage:n})},e.prototype.uploadDocumentFormSuccess=function(e){return this.gnar.track({action:"success",eventName:"editor/uploadDocument-form-success",object:"form",objectId:"uploadDocument",pageId:e})},e.prototype.welcomeTourPopupClose=function(e,t){return this.gnar.track({action:"close",eventName:"editor/welcomeTour-popup-close",isDenali:!0,object:"popup",objectId:"welcomeTour",pageId:e,theme:t})},e.prototype.welcomeTourPopupShow=function(e,t){return this.gnar.track({action:"show",eventName:"editor/welcomeTour-popup-show",isDenali:!0,object:"popup",objectId:"welcomeTour",pageId:e,theme:t})},e}();t.GnarSpec=r},1416:function(e,t,n){"use strict";function r(){try{var e=localStorage.getItem("pageReloadReason");if(!e)return;localStorage.removeItem("pageReloadReason");var t=JSON.parse(e);(function(e,t){return window.location.href===e&&Date.now()-t<_})(t.location,t.timestamp)&&i.Monitoring.Logging.root.info("Page was reloaded",t)}catch(e){}}function o(){var e=i.TimeSeriesImpl.MetricsStorage.createRoot(s.appConfig.env+"."+s.appConfig.app.nameWeb,s.appConfig.api.felogUrl,a.RxFetch.nativeFetch.bind(window));i.TimeSeriesImpl.MetricsConfig.configure(e);var t=function(){function e(e){var t=this;this._sink=e,this._counters=new Map;var n=i.Monitoring.TimeSeries.root.getMetric("logging.levels");Object.keys(i.Logging.LogLevel).map(function(e){return i.Logging.LogLevel[e]}).filter(function(e){return"number"==typeof e}).forEach(function(e){return t._counters.set(e,n.getCounter(i.Logging.LogLevel[e]))})}return e.prototype.append=function(e){var t=this._counters.get(e.level);return t&&t.increment(),this._sink.append(e)},e}(),n=function(){function e(e){this._sink=e,this._shortRateReporter={name:"short",indicator:new c.RateLimitIndicator(new c.RateLimiter(30,2e3),1e4),counter:i.Monitoring.TimeSeries.root.getCounter("logRates.short")},this._longRateReporter={name:"long",indicator:new c.RateLimitIndicator(new c.RateLimiter(120,24e4),3e4),counter:i.Monitoring.TimeSeries.root.getCounter("logRates.long")},this._counting=i.Monitoring.TimeSeries.root.getCounter("logRates.either"),this._countingStarted=0,this._droppingLimiter=new c.RateLimiter(2,6e4),this._dropped=0}return e.prototype.append=function(t){var n=this._shortRateReporter.indicator.hit(),r=this._longRateReporter.indicator.hit();if((n.wasTriggered||r.wasTriggered)&&(n.wasTriggered&&n.aboveThreshold&&this._shortRateReporter.counter.increment(),r.wasTriggered&&r.aboveThreshold&&this._longRateReporter.counter.increment(),n.aboveThreshold||r.aboveThreshold?this._counts||(this._counting.increment(),this._counts=new u.LRUCache(50),this._countingStarted=Date.now(),this._sink.append(this._createTriggeredEvent(t,"Logging rate is above threshold",{short:n,long:r})).catch(console.warn)):(this._counts=void 0,this._sink.append(this._createTriggeredEvent(t,"Logging rate is back to normal",{dropped:this._dropped})).catch(console.warn))),this._counts){var o=this._eventToString(t),i=this._counts.set(o,function(e){return(e||0)+1})||0;return i/((Date.now()-this._countingStarted)/1e3)>e.DROP_RATE&&i>e.DROP_COUNT&&!this._droppingLimiter.hit()?(this._drop(),Promise.reject("Log message discarded due to rate limiting: "+t.message)):this._sink.append(t)}return this._sink.append(t)},e.prototype._drop=function(){++this._dropped},e.prototype._createTriggeredEvent=function(e,t,n){return new i.LoggingImpl.LogEvent(i.Logging.LogLevel.ERROR,t,"editor.logging.rate",Date.now(),void 0,n,e.context)},e.prototype._eventToString=function(e){return e.level+e.logger+e.message},e.DROP_RATE=.5,e.DROP_COUNT=15,e}(),o=function(e,t){return void 0===t&&(t=!0),new i.LoggingImpl.PostFelogClient(e,s.appConfig.app.nameWeb,s.buildInfo.version,s.appConfig.env,a.RxFetch.request("logs"),t)},_=i.Logging.LogLevel.fromString(s.appConfig.logLevel),y=s.appConfig.collectLogs?new n(new t(new i.LoggingImpl.LogQueue(o(s.appConfig.api.felogUrl+"/log"),g,m))):{append:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Promise.resolve()}},v=s.appConfig.collectCrashLogs?o(s.appConfig.api.felogUrl+"/crash",!1):void 0,b=function(e){return console.error("Error sending logs",e)},w=i.Logging.LogLevel.fromString(s.appConfig.crashLogLevel),E=s.appConfig.app.nameWeb,C=function(e){e.level>=_&&(s.appConfig.copyLogsToConsole&&d.ConsoleLogger.printToConsole(e),y.append(e).catch(b))},S=new d.TreeContext,k=C;if(v){var T=new d.SimpleLogger(E+".crashLogs",w,function(e){return v.append(e).catch(b)},new d.TreeContext(S)),x=new p.CrashLogWrapper(100,i.Logging.LogLevel.ERROR,C,T);k=x.sink,l.registerDebugHelper("printLogs",function(){x.logs.forEach(d.ConsoleLogger.printToConsole)})}var I=new d.SimpleLogger(E,Math.min(_,w),k,S);i.LoggingImpl.LoggingConfig.configure(I);var A=l.StringUtils.alphanumeric(f),D=h.getBrowserInfo(),O=D.browser,N=D.os,M=D.version,P=D.type,R={browser:O,os:N,version:String(M),type:P,raw:navigator.userAgent};i.Monitoring.Logging.root.context.add({userAgent:R,sessionId:A}),i.Monitoring.TimeSeries.root.getCounter("sessions").increment(),r(),i.Monitoring.Logging.root.info("Application starting. HTTP referrer: "+document.referrer),l.registerDebugHelper("kibana",function(){var e=encodeURIComponent("http://kibana.grammarly.io/app/kibana#/discover?_g=(refreshInterval:(display:Off,pause:!f,value:0),time:(from:now-30m,mode:quick,to:now))&_a=(columns:!(_source),filters:!(('$state':(store:appState),meta:(alias:!n,disabled:!f,index:'f-log-editor-*',key:context.sessionId,negate:!f,value:'"+A+"'),query:(match:(context.sessionId:(query:'"+A+"',type:phrase))))),index:'f-log-editor-*',interval:auto,query:(query_string:(analyze_wildcard:!t,lowercase_expanded_terms:!f,query:'*')),sort:!('@timestamp',desc))");fetch("https://private.gram.ly/shorten?url="+e).then(function(e){return e.text()}).then(function(e){return i.Monitoring.Logging.root.info("Kibana URL for this session: ",e)})})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),s=n(76),a=n(202),c=n(1435),u=n(318),l=n(3),d=n(336),p=n(334),h=n(36),f=14,g=100,m=1e4,_=3e5;t.initializeMonitoring=o},1417:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=function(){function e(e,t,n){this._profile=e,this._subscription=t,this._gaClient=n,this._log=r.Monitoring.Logging.getLogger("pixels"),this._counter=r.Monitoring.TimeSeries.root.getCounter("pixels")}return e.doTracking=function(t,n,r,o){n&&n.isPremiumConversion&&new e(t,n,o)._doTracking(r)},e.prototype._doTracking=function(e){var t=this;this._log.info("Forcing premium conversion tracking"),this._counter.increment(),e.ackPremiumConversion().then(function(){t._try(function(){return t._googleAdwordsPixel()},"googleAdwordsPixel"),t._try(function(){return t._universalTracking()},"universalTracking")}).catch(function(e){return t._log.error("ackPremiumConversion failed",e)})},e.prototype._try=function(e,t){try{e()}catch(e){this._log.error("Error while calling tracking pixel "+t,e)}},e.prototype._googleAdwordsPixel=function(){var e,t=this._subscription.currentPlan.periodMonths;switch(t){case 1:e="DWnkCMbLrwkQ4ozj9gM";break;case 3:e="lqBBCL7MrwkQ4ozj9gM";break;case 12:e="w4TvCLbNrwkQ4ozj9gM";break;default:e="-eBYCKTnylgQ4ozj9gM",this._log.error("Unexpected periodMonths "+t)}new Image(1,1).src="https://www.googleadservices.com/pagead/conversion/1054393954/?label="+e+"&guid=ON&script=0"},e.prototype._universalTracking=function(){var e=this._subscription.currentPlan;this._gaClient.ga("require","displayfeatures"),this._gaClient.ga("require","ecommerce"),this._gaClient.ga("send","pageview","/thankyou"),this._gaClient.ga("ecommerce:addTransaction",{id:this._profile.email,affiliation:"",revenue:e.price+"",shipping:"",tax:""}),this._gaClient.ga("ecommerce:addItem",{id:this._profile.email,sku:e.periodMonths+"M",name:e.title+"",category:"Grammarly Subscription",price:e.price+"",quantity:"1"}),this._gaClient.ga("ecommerce:send")},e}();t.PixelTracking=o},1418:function(e,t,n){"use strict";function r(e){return/Unhandled exception at https?:\/\//.test(e)&&!/grammarly|cloudfront/.test(e)}function o(e){return u.test(e)}function i(e){return r(e)||c.test(e)}function s(e){var t=e.reason||e.error,n=t&&t.stack;if(n&&-1!==n.indexOf("denali"))return!1;if(!e.filename||/^javascript:/.test(e.filename))return!0;if(n&&o(n))return!0;try{return i((t?t.message:e.message)||JSON.stringify(t||a.EventProps.fromAny(e)))}catch(e){return!1}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),c=new RegExp(["^(Script error.?|Javascript error: Script error.? on line 0)$","(.*__gCrWeb.autofill.extractForms'\\))","(.*safari-extension.*)|(.*chrome-extension.*)|(.*moz-extension.*)",'Permission denied to access property "'].join("|"),"m"),u=new RegExp(["(.*safari-extension.*)|(.*chrome-extension.*)|(.*moz-extension.*)","<anonymous>"].join("|"),"m");t.containsExternalUrl=r,t.isExternalExceptionStack=o,t.isExternalExceptionMessage=i,t.isExternalException=s},1419:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=n(7),i=n(3),s="wootric-modal",a="wootric-text";!function(e){function t(e){return e&&e.id===a}e.isWootricTextArea=t;var n=function(){function e(e,t,n){var i=this;this._ls=e,this._isWootricTest=t,this._experimentGroup=n,this._log=r.Monitoring.Logging.getLogger("external.wootric"),this._isLoaded=this._isEnabled(),this._runOnLoad=!1,this._containerObserver=new MutationObserver(function(e){e.forEach(function(e){Array.from(e.addedNodes).forEach(function(e){if(e&&e.id===s){i.height.set(0);var t=document.getElementById(s);t&&i._surveyObserver.observe(t,{subtree:!0,attributes:!0,attributeFilter:["style","class"]})}})})}),this._surveyObserver=new MutationObserver(function(e){var t=document.getElementById(s);if(t)if(t.classList.contains("show")){var n=t.getBoundingClientRect();i.height.set(n.height)}else i.height.set(0)}),this.height=o.Atom.create(0)}return e.prototype._isEnabled=function(){return void 0!==window.wootric&&void 0!==window.WootricSurvey},e.prototype.load=function(e,t){var n=this;if(this._containerObserver.observe(document.body,{childList:!0}),this._isEnabled())this._isLoaded=!0;else{this._log.info("Loading Wootric snippet..");var r=document.createElement("script");r.type="text/javascript",r.async=!0;var o={email:e,created_at:Math.floor(t.getOrElse(new Date).getTime()/1e3),modal_footprint:"compact",account_token:"NPS-a6a6ec54",properties:{group:this._experimentGroup}};r.innerHTML="\n        "+(this._isWootricTest?"wootric_survey_immediately = true;":"")+"\n        window.wootricSettings = "+JSON.stringify(o)+";\n        ",document.body.appendChild(r);var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src="https://disutgh7q0ncc.cloudfront.net/beacon.js",i.onload=function(){n._isLoaded=!0,n._runOnLoad&&(n._runOnLoad=!1,n.takeSurvey())},document.body.appendChild(i)}},e.prototype.getAppliedCount=function(){try{var e=this._ls.getItem("wootric_applied_alerts"),t=e?JSON.parse(e):0;return t&&"number"==typeof t?t:0}catch(e){return this._log.warn("Can't get applied alerts count",e),0}},e.prototype.updateAppliedCount=function(e){try{var t=this.getAppliedCount();this._ls.setItem("wootric_applied_alerts",e(t).toString())}catch(e){this._log.warn("Can't set applied alerts count",e)}},e.prototype.takeSurvey=function(){if(this._isLoaded){this._log.info("Wootric run called"),i.invariant(this._isEnabled(),"Wootric snippet should be loaded");try{window.wootric("run")}catch(e){this._log.warn("Can't run survey",e)}}else this._log.info("Wootric run called. Waiting for beacon onload..."),this._runOnLoad=!0},e.prototype.dispose=function(){if(this._isEnabled())try{window.WootricSurvey.stop()}catch(e){this._log.warn("Can't stop survey",e)}var e=document.getElementById(s);e&&e.remove(),this.height.set(0),this._containerObserver.disconnect(),this._surveyObserver.disconnect()},e}();e.WootricListenerModelImpl=n;var c=function(){function e(e,t,n){void 0===n&&(n=5),this._wootricListenerImpl=e,this._appliedAlertsCount=t,this._appliedAlertsLimit=n,this._subs=[],this.height=this._wootricListenerImpl.height}return e.prototype._takeSurvey=function(e){return this._wootricListenerImpl.getAppliedCount()>=this._appliedAlertsLimit&&(e&&this._wootricListenerImpl.takeSurvey(),!0)},e.prototype.init=function(e,t){var n=this;this._wootricListenerImpl.load(e,t),this._takeSurvey(!0)||this._subs.push(this._appliedAlertsCount.take(this._appliedAlertsLimit).subscribe(function(e){n._wootricListenerImpl.updateAppliedCount(function(e){return e+1}),n._takeSurvey(!1)&&(n._subs.forEach(function(e){return e.unsubscribe()}),n._subs=[])}))},e.prototype.dispose=function(){this._subs.forEach(function(e){return e.unsubscribe()}),this._wootricListenerImpl.dispose()},e}();e.WootricViewModelImpl=c}(t.Wootric||(t.Wootric={}))},1420:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(23);!function(e){function t(t,o,i){return r.Observable.merge(n(t,o,i).takeUntil(e.hiddenObservable),e.hiddenObservable.mapTo(o).first())}function n(e,t,n){return r.Observable.create(function(r){function o(a){i||(i=a);var c=a-i;c<n?(r.next(Math.round(e+c/n*(t-e))),s=window.requestAnimationFrame(o)):(r.next(t),r.complete())}var i,s=window.requestAnimationFrame(o);return function(){return window.cancelAnimationFrame(s)}}).distinctUntilChanged()}function o(e){var t=new r.Subject;return{state:e.switchMap(function(e){return e?r.Observable.of("inProgress"):r.Observable.merge(r.Observable.of("fadeOut"),t.mapTo("end"))}),complete:function(){return t.next(!0)}}}function i(e,t){return void 0===t&&(t=!1),r.Observable.create(function(n){function r(){n.next(e.shift()),e.length&&(o=requestAnimationFrame(r))}var o;return t?r():o=requestAnimationFrame(r),function(){return cancelAnimationFrame(o)}})}e.hiddenObservable=r.Observable.fromEvent(document,"visibilitychange").map(function(){return document.hidden}).startWith(document.hidden).filter(Boolean).repeat(1),e.createAnimationObservable=t,e.fadeOutState=o,e.rafSequence=i}(t.Animation||(t.Animation={}))},1421:function(e,t,n){"use strict";function r(e,t){return e.reduce(function(e,n){return t(n)?e[0].push(n):e[1].push(n),e},[[],[]])}function o(e,t,n){if(n>=e.length||t>=e.length)return e;for(var r=new Set,o=Math.floor(t+n>t?Math.random()*(n-t)+1:0);r.size<o;){var i=Math.floor(Math.random()*e.length);r.add(i)}return Array.from(r).map(function(t){return e[t]})}function i(e){for(var t=e.slice(0),n=t.length;n>0;){var r=Math.floor(Math.random()*n);n--,o=[t[r],t[n]],t[n]=o[0],t[r]=o[1]}return t;var o}function s(e,t){for(var n=-1,r=e.length;n+1!==r;){var o=n+(r-n>>1);t(e[o])?n=o:r=o}return n+1}function a(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.sort(function(e,n){return t.reduce(function(t,r){return 0!==t?t:r(e,n)},0)})}function c(e,t,n){for(var r=t;r<e.length;++r)if(n(e[r]))return g.Some({index:r,value:e[r]});return g.None}function u(e,t,n){for(var r=t;r>=0;--r)if(n(e[r]))return g.Some({index:r,value:e[r]});return g.None}function l(e,t,n){return t<0||e.length<=t?g.None:c(e,t+1,n).orElseL(function(){return u(e,t-1,n)})}function d(e,t){for(var n,r=0;r<e.length;++r)!function(r){var o=t.findIndex(function(t){return e[r].equals(t)});-1!==o&&(e.splice(r--,1),t.splice(o,1)),n=r}(r),r=n;return e}function p(e,t){return e.length===t.length&&e.every(function(e,n){return t[n].equals(e)})}function h(e){return e.reduce(function(e,t){return e.concat(t)},[])}function f(e,t){return new Array(e).fill(!0).map(function(e,n){return t(n)})}Object.defineProperty(t,"__esModule",{value:!0});var g=n(14);t.partition=r,t.pickRandom=o,t.shuffle=i,t.lowerBound=s,t.sort=a,t.findIndexFrom=c,t.findLastIndexFrom=u,t.lookAround=l,t.arraySubstract=d,t.equals=p,t.flatMap=h,t.mapNTimes=f},1422:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(23),i=n(156),s=n(83);!function(e){function t(){return{status:C.idle}}function n(e){return{status:C.ok,value:e}}function a(e){return e.status===C.idle}function c(e){return e.status===C.inProgress}function u(e){return e.status===C.ok}function l(e){return e.status===C.error}function d(e){return e.status===C.fatal}function p(e){return u(e)||d(e)}function h(e){return p(e)||l(e)}function f(e,t){return u(e)?t(e.value):e}function g(e,t){return u(e)?n(t(e.value)):e}function m(e){return i.invariant(!c(e),"Can't enter begin state - unexpected status '"+C[e.status]+"'"),{status:C.inProgress}}function _(e,t){return function(n){i.invariant(!p(n),"Can't enter error state - unexpected status '"+C[n.status]+"'");var r=C.error;return t?{status:r,error:e,attempt:t}:{status:r,error:e}}}function y(e){return function(t){return i.invariant(l(t)||c(t),"Can't enter fatal state - unexpected status '"+C[t.status]+"'"),{status:C.fatal,error:e}}}function v(e){return function(t){return i.invariant(!u(t),"Can't enter ok state - unexpected status '"+C[t.status]+"'"),n(e)}}function b(t,n,r,i){return void 0===r&&(r=e.DEFAULT_TIMEOUT_MS),void 0===i&&(i=function(e){return e}),new Promise(function(e,s){n.modify(m);var a=!1;o.Observable.defer(t).last().timeout(r).subscribe(function(t){n.modify(v(i(t))),a=!0,e(t)},function(e){n.modify(_(e)),a=!0,s(e)},function(){if(!a){var e=void 0;n.modify(function(t){return t.status!==C.ok&&t.status!==C.error?_(e=new S)(t):t}),e&&s(e)}})})}function w(e,t,n){var r=e.get();return n().then(function(n){return new Promise(function(n){e.modify(t),n()})}).catch(function(t){return e.set(r),Promise.reject(t)})}function E(e,t,n,r){void 0===r&&(r=!0);var o=e.get();return e.modify(t),n().catch(function(t){return r&&e.set(o),Promise.reject(t)})}var C;!function(e){e[e.idle=0]="idle",e[e.inProgress=1]="inProgress",e[e.ok=2]="ok",e[e.error=3]="error",e[e.fatal=4]="fatal"}(C=e.Status||(e.Status={})),e.defaultValue=t,e.ok=n,e.isIdle=a,e.isInProgress=c,e.isOk=u,e.isError=l,e.isFatal=d,e.isTerminated=p,e.isSomething=h,e.flatMap=f,e.map=g,e.begin=m,e.error=_,e.fatal=y,e.success=v,e.DEFAULT_TIMEOUT_MS=1e4;var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(i.CustomError);e.NoValueReturnedError=S,e.runWithTimeout=b,e.promiseWithTimeout=function(e,t){return o.Observable.from(e).timeout(t).toPromise()},e.modifyRemoteState=w,e.modifyRemoteStateOptimistic=E;!function(t){function n(t,n,a){void 0===a&&(a=r.noRetry);var c=0;n.modify(m);var u=o.Observable.defer(t).catch(function(e){throw n.modify(_(e,++c)),e}).retryWhen(a).catch(function(e){return n.modify(y(e)),o.Observable.never()}).map(v).do(n.modify.bind(n)).first().subscribe(s.noop);return{unsubscribe:function(){e.isTerminated(n.get())||(i.invariant(!u.closed,"cannot abort completed operation"),u.unsubscribe())}}}var r;!function(e){e.noRetry=function(e){return e.switchMap(function(e){return o.Observable.throw(e)}).first()},e.linear=function(e,t){return void 0===t&&(t=1e3),function(n){return n.switchMap(function(n,r){if(r>=e)throw n;return o.Observable.timer(r*t)})}},e.conditional=function(e,t){return function(n){return o.Observable.merge(t(n.takeWhile(e)),n.skipWhile(e).map(function(e){throw e}))}}}(r=t.RetryStrategy||(t.RetryStrategy={})),t.create=n}(e.OperationRetrier||(e.OperationRetrier={}))}(t.Async||(t.Async={}))},1423:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){var t=function(){function e(e){this._predicate=e,this._queueMap=new Set,this._queue=[]}return e.prototype.put=function(e){var t=this,n=new Set,r=e.reduce(function(e,r){return n.has(r.id)||t._queueMap.has(r.id)||!t._predicate(r)||(n.add(r.id),e.push(r)),e},[]);(o=this._queue).push.apply(o,r),r.forEach(function(e){var n=e.id;return t._queueMap.add(n)});var o},e.prototype.take=function(e){for(var t=0,n=[];t<this._queue.length&&n.length<e;){var r=this._queue[t];this._predicate(r)&&n.push(r),this._queueMap.delete(r.id),t++}return this._queue=this._queue.slice(t),n},Object.defineProperty(e.prototype,"nonEmpty",{get:function(){return this._queue.length>0},enumerable:!0,configurable:!0}),e}();e.LazyPredicateUniq=t}(t.Buffer||(t.Buffer={}))},1424:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(23),o=n(7),i=n(36);r.Observable.fromEvent(window,"click").first().subscribe(function(){document.queryCommandSupported("copy")||s.copyApiAvailable.set(!1)});var s=function(){function e(){}return e.copy=function(e){this._clearSelection();var t=this._createHiddenSpan(e);return this.select(t),this._copy(e).then(function(){t.parentElement.removeChild(t)}).catch(function(e){throw t.parentElement.removeChild(t),e})},e.select=function(e){if(window.getSelection&&document.createRange){var t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}else if("createTextRange"in document.body&&"selection"in document){var n=document.body.createTextRange();n.moveToElementText(this),n.select()}},e._clearSelection=function(){var e=window.getSelection?window.getSelection():document.selection;"removeAllRanges"in e?e.removeAllRanges():"empty"in e&&e.empty()},e._createHiddenSpan=function(e){var t=document.createElement("span");return t.setAttribute("style",["all: unset","position: fixed","top -999px","left -999px","opacity: 0","background transparent","white-space: pre","-webkit-user-select: text","-moz-user-select: text","-ms-user-select: text","user-select: text"].join(";")),t.textContent=e,document.body.appendChild(t),t},e._copy=function(e){var t=this;return new Promise(function(n,r){try{("msie"===t._browser?window.clipboardData.setData("text",e):document.execCommand("copy"))?n():r(new Error("Copy API doesn't work"))}catch(e){r(e)}})},e._browser=i.getBrowserInfo().browser,e.copyApiAvailable=o.Atom.create(!0),e}();t.Clipboard=s},1425:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(2),i=n(7),s=n(203);!function(e){e[e.IDLE=0]="IDLE",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED",e[e.TERMINATING=3]="TERMINATING"}(r||(r={}));var a;!function(e){e[e.CONNECT=0]="CONNECT",e[e.CONNECTED=1]="CONNECTED",e[e.TERMINATE=2]="TERMINATE",e[e.TERMINATED=3]="TERMINATED"}(a||(a={}));var c=function(){function e(e,t,n){void 0===n&&(n=i.Atom.create(null));var c=this;this._connector=e,this._terminator=t,this._currentConnection=n,this._create=function(){return o.__awaiter(c,void 0,void 0,function(){var e,t,n;return o.__generator(this,function(r){switch(r.label){case 0:return e=this._connectionParams,[4,this._connector(e)];case 1:return t=r.sent(),n=e===this._connectionParams,n?[4,this._fsm.event(a.CONNECTED,t)]:[3,3];case 2:n=r.sent(),r.label=3;case 3:return n?(this._currentConnection.set(t),[3,6]):[3,4];case 4:return[4,this._terminator(t)];case 5:r.sent(),r.label=6;case 6:return[2]}})})},this._remove=function(){return o.__awaiter(c,void 0,void 0,function(){var e;return o.__generator(this,function(t){switch(t.label){case 0:return e=this._currentConnection.get(),this._currentConnection.set(null),[4,this._terminator(e)];case 1:return t.sent(),[4,this._fsm.event(a.TERMINATED,"removed")];case 2:return t.sent(),[2]}})})},this._processQueue=function(){return c._connectionParams?c._fsm.event(a.CONNECT,c._connectionParams):Promise.resolve(!0)},this._fsm=new s.StateMachine(r.IDLE).from(r.CONNECTED).to(r.TERMINATING).on(a.CONNECT,a.TERMINATE).from(r.IDLE,r.CONNECTING,r.TERMINATING).to(r.CONNECTING).on(a.CONNECT).from(r.CONNECTING).to(r.CONNECTED).on(a.CONNECTED).from(r.TERMINATING).to(r.IDLE).on(a.TERMINATED).on(r.CONNECTING,this._create).on(r.TERMINATING,this._remove).on(r.IDLE,this._processQueue)}return e.prototype.connect=function(e){return void 0===e&&(e="connection"),o.__awaiter(this,void 0,void 0,function(){var t;return o.__generator(this,function(n){switch(n.label){case 0:return(t=e===this._connectionParams&&this._fsm.is(r.CONNECTED,r.CONNECTING))?[3,2]:(this._connectionParams=e,[4,this._fsm.event(a.CONNECT,e)]);case 1:n.sent(),n.label=2;case 2:return[2]}})})},e.prototype.terminate=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(e){switch(e.label){case 0:return this._connectionParams=null,[4,this._fsm.event(a.TERMINATE)];case 1:return e.sent(),[2]}})})},e}();t.ConnectionManager=c},1426:function(e,t,n){"use strict";function r(e){return s.default(e)}function o(e,t,n){s.default(e,t,n)}function i(){var e=new Date(Date.now()+36e5);o("grInstallSource","editor",{domain:a.appConfig.domains.cookie,path:"/",expires:e})}Object.defineProperty(t,"__esModule",{value:!0});var s=n(323),a=n(76);t.getCookie=r,t.setCookie=o,t.setInstallSourceCookie=i},1427:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readabilityDemoText={title:"Readability prototype demo text",text:'ignaling they defeated the wolf Dana falls to the ground from using a lot of her magic engery on the fight as gray runs over to her and picks her up carrying her back to the hotle they were staying at as the rest of them follow\n  "we will head back to the guild tommorrow" erza the red head says as they all go into there seprate rooms in the hotle as night falls they all fall asleep few hours later the sun rises adn they head back to the guild will gray carrying an unconses Lana in his arms as they run back looking for wendy to see if she could tell whats wrong with Lana as they found her they rush her into one of the inferany rooms and wendy starts to heal her but cant\n  "she just used to much of her magic engery she just needs to rest for a few days she will be fine" the young blue haired girl says to the group as they all sit around the infermity bed waiting for Misty to wake up.\n\n  Amplification of ribosomal genes has been observed in other species.\n  "Shadowy Weapon" as a shadow  apears above the wolf and hits it with a weapons making the wolf fall to the ground with a loud thump signaling they defeated the wolf Dana falls to the ground from using a lot of her magic engery on the fight as gray runs over to her and picks her up carrying her back to the hotle they were staying at as the rest of them follow\n  "we will head back to the guild tommorrow" erza the red head says as they all go into there seprate rooms in the hotle as night falls they all fall asleep few hours later the sun rises adn they head back to the guild will gray carrying an unconses Lana in his arms as they run back looking for wendy to see if she could tell whats wrong with Lana as they found her they rush her into one of the inferany rooms and wendy starts to heal her but cant\n  "she just used to much of her magic engery she just needs to rest for a few days she will be fine" the young blue haired girl says to the group as they all sit around the infermity bed waiting for Misty to wake up.\n\n  Amplification of ribosomal genes has been observed in other species.'}},1428:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(948);!function(e){function t(e,t,n){var o=window.Grammarly,i=o&&o.desktopEditor;if(i&&i.openUpgradePage){var s=r(n),a=e.substring(e.indexOf("?")+1),c=t.api.redirect+"?upgrade=1&hash="+s+"&"+a;return i.openUpgradePage(c)}return!1}e.openUpgradeUrl=t}(t.actions||(t.actions={}))},1429:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){function t(e){return{kind:"left",value:e}}function n(e){return{kind:"right",value:e}}function r(e){return"left"===e.kind}function o(e){return"right"===e.kind}function i(e,t){return r(e)?e:t(e.value)}function s(t){return t.then(function(t){return e.right(t)}).catch(function(t){return e.left(t)})}e.left=t,e.right=n,e.isLeft=r,e.isRight=o,e.flatMap=i,e.fromPromise=s}(t.Either||(t.Either={}))},1430:function(e,t,n){"use strict";function r(e,t){return t.reduce(function(t,n){var r=n[e],o=t.get(r);return o||(o=[],t.set(r,o)),o.push(n),t},new Map)}function o(e,t,n){var r=new Map(t);return r.set(e,n),r}function i(e,t){var n=new Map(t);return n.delete(e),n}function s(e,t,n){var r=new Map(e),o=[],i=[];return t.forEach(function(e,t){var s=a.Option.of(r.get(t));n(t,e,s).fold(function(){s.nonEmpty()&&(i.push(s.get()),r.delete(t))},function(e){r.set(t,e),s.isEmpty()&&o.push(e)})}),{newMap:r,addedItems:o,removedItems:i}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(14);t.groupBy=r,t.update=o,t.remove=i,t.patch=s},1431:function(e,t,n){"use strict";function r(e){return e}Object.defineProperty(t,"__esModule",{value:!0});var o=n(114),i=n(396),s=n(14),a=n(302),c=n(156);t.literalArray=r;!function(e){function t(e){return new o.Type("Set<"+e.name+">",function(e){return e instanceof Set},function(t,n){return o.array(e).validate(t,n).map(function(e){return new Set(e)})},function(e){return Array.from(e)})}function n(e){return new o.Type("option:"+e.name,function(e){return e instanceof s.Option},function(t,n){return void 0===t||null===t?i.either.right(s.None):e.validate(t,n).map(s.Some)},function(e){return e.getOrElse(void 0)})}function u(e,t){return o.union(t.map(function(e){return o.literal(e)}),e+":string")}function l(e,t){return new o.Type("withDefault("+JSON.stringify(t)+"):"+e.name,e.is,function(n,r){return e.validate(a.emptyValue(n)?t:n,r)},e.encode)}function d(e,t){return new o.Type("fallback("+JSON.stringify(t)+"):"+e.name,e.is,function(n,r){var o=e.validate(n,r);return o.isLeft()?i.either.right(t):o},e.encode)}function p(e){var t=e.replace(/\w+\(.*?\):/,"");if("{"===t[0]&&"}"===t[t.length-1])return"object";var n=t.split(":").pop();return 0===n.indexOf("Array<")?"Array":0===n.indexOf("Set<")?"Set":(c.invariant(_.indexOf(n)>-1,"unsupported prop type "+e),n)}function h(e,t){var n=p(e);switch(n){case"boolean":return t.getBool();case"string":return t.getStr();case"number":return t.getNum();case"Array":case"Set":return t.getArray();case"object":case"Dictionary":return t.getObject();default:return c.assertNever(n)}}function f(e,t){void 0===t&&(t="("+e.map(function(e){return e.name}).join(" & ")+")");var n=e.length;return new o.IntersectionType(t,function(t){return e.every(function(e){return e.is(t)})},function(t,r){for(var i={},s=[],a=0;a<n;a++){e[a].validate(t,r).fold(function(e){return m(s,e)},function(e){return Object.assign(i,e)})}return s.length?o.failures(s):o.success(i)},function(t){return a.Properties.of.apply(a.Properties,e.map(function(e){return e.encode(t)}))},e)}e.set=t,e.option=n,e.literalUnion=u,e.withDefault=l,e.fallback=d;var g=function(e){return"{ "+Object.keys(e).map(function(t){return t+": "+e[t].name}).join(", ")+" }"},m=function(e,t){return Array.prototype.push.apply(e,t)},_=r(["boolean","string","number","Array","Set","object","Dictionary"]);e.propetries=function(e,t,n){return void 0===t&&(t=""),void 0===n&&(n=g(e)),new o.InterfaceType(n,function(t){if(!(t instanceof a.Properties))return!1;for(var n in e)if(!e[n].is(t[n]))return!1;return!0},function(n,r){if(!Array.isArray(n)||n.some(function(e){return!(e instanceof a.Properties)}))return o.failure(n,r);var i={},s=[];for(var c in e)!function(c){var u=""!==t?t+":"+c:c,l=a.Properties.find.apply(a.Properties,[u].concat(n)),d=e[c],p=h(d.name,l);d.validate(p,o.appendContext(r,c,d)).fold(function(e){return m(s,e)},function(e){i[c]=e})}(c);return s.length?o.failures(s):o.success(i)},function(n){var r={};for(var o in e){var i=""!==t?t+":"+o:o,s=e[o],c=n[o];s.is(c)&&(r[i]=e[o].encode(c))}return a.Properties.of(r)},e)},e.combineProperties=f}(t.Type||(t.Type={}))},1432:function(e,t,n){"use strict";function r(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 0===e.length?i.Properties.of(t.ls):i.Properties.of.apply(i.Properties,e.map(function(e){return n={},n[e]=t.ls.getItem(e),n;var n}))}function o(e){for(var n=0,r=e.entries();n<r.length;n++){var o=r[n],i=o[0],a=o[1];try{var c=a.getStr();c&&t.ls.setItem(i,c)}catch(e){return void s.Monitoring.Logging.getLogger("model.settings.localStorage").warn("Cannot save data to local storage",e)}}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(302),s=n(6),a=n(83),c=n(14);t.ls=window.localStorage||Object.create({getItem:function(e){return null},setItem:function(e,t){return a.noop},removeItem:function(e){return null}}),t.readProperties=r,t.writeProperties=o;!function(e){function t(e){return{getItem:function(t){return c.Option.of(e.getItem(t))},setItem:function(t,n){return e.setItem(t,n)},safeRemoveItem:function(t){try{e.removeItem(t)}catch(e){}},getKeys:function(){return Object.keys(e)},removeItem:function(t){return e.removeItem(t)}}}e.fromLocalStorage=t}(t.DenaliStorage||(t.DenaliStorage={}))},1433:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(14),o=n(83);!function(e){function t(e){return r.Option.of(e).filter(o.notEmpty)}function n(e){return r.Option.of(e).map(function(e){return e.filter(Boolean)}).filter(o.notEmpty)}e.string=t,e.array=n}(t.NotEmpty||(t.NotEmpty={}))},1434:function(e,t,n){"use strict";function r(e){return function(t){return t.map(e)}}function o(e){return function(t){return t.flatMap(e)}}function i(e){return function(t){return t.exists(e)}}function s(e,t){return function(n){return n.map(e).getOrElse(t)}}Object.defineProperty(t,"__esModule",{value:!0}),t.map=r,t.flatMap=o,t.exists=i,t.mapOrDefault=s},1435:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(156),o=function(){function e(e,t){if(this.messageCount=e,this.timeframe=t,e<1)throw new r.IllegalArgumentError("messagesCount should be > 1");if(t<=0)throw new r.IllegalArgumentError("timeframe should be > 0");this._allowance=e,this._lastChecked=Date.now()}return e.prototype.hit=function(){var e=Date.now(),t=e-this._lastChecked;return this._lastChecked=e,this._allowance+=t*(this.messageCount/this.timeframe),this._allowance>this.messageCount&&(this._allowance=this.messageCount),!(this._allowance<1)&&(this._allowance-=1,!0)},e.prototype.toString=function(){return"[ messageCount: "+this.messageCount+", timeframe: "+this.timeframe+", allowance: "+Math.trunc(1e3*this._allowance)/1e3+", _lastCheck: "+this._lastChecked+"]"},e}();t.RateLimiter=o;var i=function(){function e(e,t){if(this._limiter=e,this._cooldownTime=t,this._lastLimiting=0,this._aboveThreshold=!1,t<0)throw new r.IllegalArgumentError("cooldownTime should be non-negative")}return e.prototype.hit=function(){var e=this._limiter.hit(),t=!1;return e?this._aboveThreshold&&Date.now()-this._cooldownTime>this._lastLimiting&&(this._aboveThreshold=!1,t=!0):(this._lastLimiting=Date.now(),this._aboveThreshold||(this._aboveThreshold=!0,t=!0)),{allow:e,aboveThreshold:this._aboveThreshold,wasTriggered:t}},e}();t.RateLimitIndicator=i},1436:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n,r){void 0===r&&(r=20),this._task=e,this._buffer=t,this._run=n,this._batchSize=r,this._sub=null}return e.prototype.put=function(e){this._buffer.put(e),null===this._sub&&this._buffer.nonEmpty&&this._scheduleWork()},e.prototype._scheduleWork=function(){var e=this;this._sub=this._run(function(){e._task(e._buffer.take(e._batchSize)),e._sub=null,e._buffer.nonEmpty&&e._scheduleWork()})},e.prototype.shutdown=function(){this._sub&&(this._sub.unsubscribe(),this._sub=null)},e}();t.Worker=r},1443:function(e,t){e.exports={}},1444:function(e,t){e.exports={countdown:"_6e8ae1-countdown",gutter:"_6e8ae1-gutter",bar:"_6e8ae1-bar"}},1445:function(e,t){e.exports={clearfix:"_568abf-clearfix",proofreading:"_568abf-proofreading",gutter:"_568abf-gutter",pgs:"_568abf-pgs",pgsPlaceholder:"_568abf-pgsPlaceholder",proofitCompleted:"_568abf-proofitCompleted",proofitCancelled:"_568abf-proofitCancelled"}},1446:function(e,t){e.exports={clearfix:"_3e896f-clearfix",header:"_3e896f-header",headOne:"_3e896f-headOne",headSub:"_3e896f-headSub",sub:"_3e896f-sub",link:"_3e896f-link",logoWrapper:"_3e896f-logoWrapper",logo:"_3e896f-logo"}},1447:function(e,t){e.exports={clearfix:"_e36e5b-clearfix",header:"_e36e5b-header",headOne:"_e36e5b-headOne",headSub:"_e36e5b-headSub",sub:"_e36e5b-sub",link:"_e36e5b-link",logoWrapper:"_e36e5b-logoWrapper",logo:"_e36e5b-logo",linkWrapper:"_e36e5b-linkWrapper",back:"_e36e5b-back",home:"_e36e5b-home",support:"_e36e5b-support"}},1448:function(e,t){},1449:function(e,t){},1450:function(e,t,n){n(571),e.exports=n(572)},155:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(13),i=n(24),s=n(14),a=n(7),c=n(6),u=n(405),l=n(49),d=n(1043),p=n(398),h=n(3),f=n(943);t.Location=f.Location;var g=p.default();!function(e){function t(e){return{route:e,href:function(t){return{pathname:u.compile(e.path)(t),exact:e.exact,path:e.path}}}}function n(e,t){return r.__assign({},e.route,{component:t})}var p="nextLocationState",f=function(){function t(){var e=this;this._reloadOnNavigation=!1,this._logger=c.Monitoring.Logging.getLogger("router"),this._nextLocationState=s.Option.empty(),this.location=a.Atom.create(this._parseLocation(g.location)),this.locationState=s.Option.empty(),this.query=new _(g.location.search),this.scheduleReloadOnNavigation=function(){e._reloadOnNavigation=!0,e._logger.info("forceReload.scheduled.onNavigation")},this.forceReloadCurrentLocation=function(){e._logger.info("forceReload.started.fromCurrentLocation"),window.location.reload()};var t=c.Monitoring.Logging.getLogger("router");t.info("Router init",g.location),this.locationState=this._loadLocationState(),g.listen(function(n){t.info("Location change",n),e.location.set(e._parseLocation(n)),e.locationState=e._nextLocationState,e._nextLocationState=s.None})}return t.prototype._parseLocation=function(e){return{pathname:e.pathname}},t.prototype.replace=function(e,t){return this.navigate(e,t,!0)},t.prototype.navigate=function(e,t,n){void 0===n&&(n=!1),t&&(this._nextLocationState=s.Option.of(t)),this._reloadOnNavigation?(this._saveLocationState(e.pathname),this._logger.info("forceReload.started.onNavigation"),window.location.href=e.pathname):n?g.replace(e):g.push(e)},t.prototype.isActive=function(t){return this.location.view(e.isActive(t))},t.prototype._saveLocationState=function(e){try{this._nextLocationState.forEach(function(t){window.localStorage.setItem(p,JSON.stringify({pathname:e,state:t}))})}catch(e){}},t.prototype._loadLocationState=function(){var e=this,t=s.Try.of(function(){var e=JSON.parse(window.localStorage.getItem(p)||"");return{state:e.state,pathname:e.pathname}}).filter(function(t){return t.pathname===e.location.get().pathname}).map(function(e){return e.state}).toOption();return function(){try{window.localStorage.removeItem(p)}catch(e){}}(),t},t}();e.Impl=f;var m=function(){function e(){this.location=a.Atom.create({pathname:"/",query:new URLSearchParams}),this.locationState=s.None,this._query=a.Atom.create(new _("")),this.navigate=h.noop,this.replace=h.noop,this.scheduleReloadOnNavigation=h.noop,this.forceReloadCurrentLocation=h.noop}return Object.defineProperty(e.prototype,"query",{get:function(){return this._query.get()},enumerable:!0,configurable:!0}),e.prototype.isActive=function(){return a.Atom.create(!1)},e.prototype.setQuery=function(e,t){var n=new URLSearchParams;n.set(e,t),this._query.set(new _(n.toString()))},e.prototype.setNextLocationState=function(){throw new Error("Method not implemented.")},e}();e.DummyImpl=m;var _=function(){function e(e){this._searchParam=new URLSearchParams(e)}return e.prototype.has=function(e){return this._searchParam.has(e)},e.prototype.get=function(e){return s.Option.of(this._searchParam.get(e))},e}();e.ContextTypes={appRouter:i.object},e.page=t,e.bindComponent=n,e.isActive=function(e){return function(t){var n=t.pathname;return Boolean(l.matchPath(n,e))}},e.Wrapper=function(e){var t=e.routesMap,n=e.renderer;return o.createElement(l.Router,{history:g},o.createElement(l.Switch,null,h.ObjectUtils.toArray(t).map(function(e){return o.createElement(d.Route,{path:e.path,exact:e.exact,key:e.path,render:function(t){return n(t,e)}})})))},e.Block=function(e){var t=e.when,n=e.message;return o.createElement(a.F.div,null,t.map(function(e){return o.createElement(l.Prompt,{key:"prompt",when:e,message:n})}))},e.routes={documents:t({path:"/",exact:!0,private:!0}),profile:t({path:"/profile",private:!0}),subscription:t({path:"/subscription",private:!0}),apps:t({path:"/apps",private:!0}),new_document:t({path:"/docs/new",exact:!0,private:!0}),editor:t({path:"/docs/:docId",private:!0}),denali_editor:t({path:"/ddocs/:docId",private:!0}),free:t({path:"/free",private:!0}),component_browser:t({path:"/component_browser/:component?"}),card_iframe:t({path:"/card_iframe"}),diagnostic_test:t({path:"/diagnostic-test"}),notFound:t({path:"*"})}}(t.Router||(t.Router={}))},156:function(e,t,n){"use strict";function r(e,t){if(!e)throw new l("string"==typeof t?t:t&&t())}function o(e,t){if(!e)throw new l("string"==typeof t?t:t&&t());return e}function i(e){throw new p(e)}function s(e){if(!u.isObject(e))return!1;var t=e.name,n=e.message;return"FetchError"===t&&n===f||"TypeError"===t&&n===h||"TypeError"===t&&"Failed to fetch"===n}function a(e){return void 0!==e&&(e>=500&&e<=599)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(2),u=n(209);t.CustomError=function(e){void 0===e&&(e="(nomessage)"),Error.call(this,e),this.stack=(new Error).stack,this.message=e,this.name=this.constructor.name},t.CustomError.prototype=Object.create(Error.prototype);var l=function(e){function t(t){return e.call(this,"Invariant condition failed: "+(t||"(unnamed)"))||this}return c.__extends(t,e),t}(t.CustomError);t.InvariantError=l;var d=function(e){function t(t){return e.call(this,t)||this}return c.__extends(t,e),t}(t.CustomError);t.IllegalArgumentError=d;var p=function(e){function t(t){return e.call(this,"Matching not exhaustive"+(t?": unexpected value "+t:""))||this}return c.__extends(t,e),t}(t.CustomError);t.MatchingNotExhaustiveError=p,t.invariant=r,t.expectNonNull=o,t.assertNever=i;var h="NetworkError when attempting to fetch resource.",f="Client fetch error: Failed to fetch";t.isClientFetchError=s,t.isServerErrorCode=a},157:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(14);t.Delta=n(968);!function(e){function n(e,t){return void 0===t&&(t=0),new f(e,t)}function i(e,r,o){return void 0===o&&(o=0),n((new t.Delta).retain(e).insert(r),o)}function s(e,r,o){return void 0===o&&(o=0),n((new t.Delta).retain(e).delete(r),o)}function a(e,r,o){return void 0===r&&(r=0),n((new t.Delta).retain(e,o),r)}function c(e){return new m(e)}function u(e){return c((new t.Delta).insert(e))}function l(){return new g}function d(e){return"delta"===e.kind}function p(e){return"reset"===e.kind}function h(e){return"flush"===e.kind}var f=function(){function e(e,t){this.delta=e,this.prevLen=t,this.kind="delta",this._length=void 0,this._amount=void 0,this._text=void 0}return Object.defineProperty(e.prototype,"length",{get:function(){return this._length||(this._length=o.calcDiffLength(this.delta))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"amount",{get:function(){return this._amount||(this._amount=o.calcAmountLength(this.delta))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){var e=this;return this._text||(this._text=r.Try.of(function(){return e.delta.ops.reduce(function(e,t){if(t.insert)return e+t.insert;throw t.delete?new Error("can not get text on delta with deletes"):new Error("can not get text on delta with retains")},"")}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.delta.ops.length},enumerable:!0,configurable:!0}),e.prototype.compose=function(t){return new e(this.delta.compose(t.delta),this.prevLen)},e.prototype.transform=function(t,n){return void 0===n&&(n=!0),new e(t.delta.transform(this.delta,n),this.prevLen+t.length)},e.prototype.toString=function(){return"Delta("+this.delta+", pl: "+this.prevLen+")"},e}();e.DeltaChangeImpl=f;var g=function(){function e(){this.kind="flush"}return e.prototype.toString=function(){return"Flush()"},e}();e.FlushImpl=g;var m=function(){function e(e){this.delta=e,this.kind="reset"}return Object.defineProperty(e.prototype,"text",{get:function(){var e=this;return this._text||(this._text=r.Try.of(function(){return e.delta.ops.reduce(function(e,t){if(t.insert)return e+t.insert;throw t.delete?new Error("can not get text on delta with deletes"):new Error("can not get text on delta with retains")},"")}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length||(this._length=o.calcDiffLength(this.delta))},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"Reset("+this.delta+")"},e}();e.ResetImpl=m,e.delta=n,e.ins=i,e.del=s,e.ret=a,e.res=c,e.resFromText=u,e.flush=l,e.isDelta=d,e.isReset=p,e.isFlush=h}(t.Change||(t.Change={}));var o;!function(e){function n(e){return e.ops.reduce(function(e,t){return t.insert?e+t.insert.length:t.delete?e-t.delete:e},0)}function r(e){return e.ops.reduce(function(e,t){return t.insert?e+t.insert.length:t.delete?e+t.delete:e},0)}function o(e){return e.reduce(function(e,n){return e.compose(new t.Delta(n))},new t.Delta)}function i(e){return e.reduce(function(e,t){if(t.insert)return e.insert(t.insert);if(t.delete)return e.delete(t.delete);if(t.retain)return e.retain(t.retain);throw new Error("Unknown operation")},new t.Delta)}e.calcDiffLength=n,e.calcAmountLength=r,e.squash=o,e.cleanAttrs=i}(o=t.DeltaUtils||(t.DeltaUtils={}))},158:function(e,t,n){"use strict";function r(e){return e?e[0].toUpperCase()+e.slice(1):""}function o(e){return e?e.replace(/(?:^|[-_\s])(\w)/g,function(e,t){return t?t.toUpperCase():""}):""}function i(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}function s(e,t){if(void 0===e&&(e=""),!e||"undefined"==typeof window)return"";if(!t)return b.sanitize(e);var n=Object.assign({},t.allowedTags?{ALLOWED_TAGS:t.allowedTags}:{},t.sanitizeDom?{SANITIZE_DOM:t.sanitizeDom}:{});return b.sanitize(e,n)}function a(e,t){var n=e.match(t);return n&&n[1]}function c(e){return e.split(/\s+/)[0]}function u(e){if(!e)return 0;var t=e.replace(/[\W\d]/gi," ").replace(/\s+/gi," ").trim().split(" ");return 1===t.length&&""===t[0]?0:t.length}function l(e){return w.decode(e).length}function d(e){return e.replace(/\t/g,"    ")}function p(e,t,n){return 1===e?t:n}function h(e,t){return void 0===t&&(t="en-US"),e.toLocaleString(t,{minimumFractionDigits:2,maximumFractionDigits:2})}function f(e){return e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}function g(e,t,n){return t>>=0,n=String(n||" "),e.length>t?String(e):(t-=e.length,t>n.length&&(n+=n.repeat(t/n.length)),n.slice(0,t)+String(e))}function m(e){var t=document.createElement("div");return t.innerHTML=s(e),t.textContent||t.innerText||""}function _(e){if(!e)return"";var t=document.createElement("a");return t.href=e,t.hostname}function y(e){return e&&(e<48||58===e||59===e||63===e)||!1}function v(e){if(e<0)throw new TypeError("Length should not be negative: "+e);return Array.from({length:e},function(){return E.charAt(Math.random()*E.length)}).join("")}Object.defineProperty(t,"__esModule",{value:!0});var b=n(853),w=n(83);t.nbsp=String.fromCharCode(160),t.capitalize=r,t.camelize=o,t.toTitleCase=i,t.sanitize=s,t.getFirstMatch=a,t.getFirstWord=c,t.wordCount=u,t.charCount=l,t.replaceTabsWithSpaces=d,t.pluralize=p,t.formatPrice=h,t.escapeRegExp=f,t.padStart=g,t.decodeHTMLCodes=m,t.urlToDomain=_,t.isBreakWordChar=y;var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";t.alphanumeric=v},159:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),o=n(1415);t.GnarSpecEditor=o.GnarSpec;var i=n(1414);t.GnarSpecDesktopEditor=i.GnarSpec,t.oldEditorTelemetryContextType={telemetry:r.object},t.telemetryContextType={gnarSpec:r.object,pageId:r.string};var s=n(1413);t.EditorTelemetry=s.EditorTelemetry,t.TelemetryContainerId=s.TelemetryContainerId,t.errorSource=s.errorSource,t.ErrorSourceType=s.ErrorSourceType,t.DocumentTelemetry=s.DocumentTelemetry,t.CheckSettingName=s.CheckSettingName,t.DocumentTelemetryContext=s.DocumentTelemetryContext,t.AccountAndSupportTelemetry=s.AccountAndSupportTelemetry,t.AccountAndSupportTelemetryContext=s.AccountAndSupportTelemetryContext,t.accountType=s.accountType,t.SubscriptionTelemetry=s.SubscriptionTelemetry,t.SubscriptionTelemetryContext=s.SubscriptionTelemetryContext,t.AppsTelemetry=s.AppsTelemetry,t.AppsTelemetryContext=s.AppsTelemetryContext,t.TrackingAppType=s.TrackingAppType,t.TrackingBannerType=s.TrackingBannerType,t.DictionaryAndLanguageTelemetry=s.DictionaryAndLanguageTelemetry,t.DictionaryAndLanguageTelemetryContext=s.DictionaryAndLanguageTelemetryContext,t.DialectStringTelemetry=s.DialectStringTelemetry,t.TourTelemetry=s.TourTelemetry,t.TourTelemetryContext=s.TourTelemetryContext,t.BannersTelemetry=s.BannersTelemetry;var a=n(1417);t.PixelTracking=a.PixelTracking;var c=n(1419);t.Wootric=c.Wootric,t.WootricViewModel=c.WootricViewModel,t.FullWootricViewModel=c.FullWootricViewModel},202:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(6),i=n(23),s=n(3),a=n(401),c=function(e){function t(t){var n=e.call(this,"Client fetch error: "+(t&&t.message||t))||this;return n.name="FetchError",n.cause=t,n}return r.__extends(t,e),t}(s.CustomError);t.FetchError=c;var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="TimeoutWarnError",t}return r.__extends(t,e),t}(s.CustomError);t.TimeoutWarnError=u;var l,d=function(){function e(){}return Object.defineProperty(e,"_logger",{get:function(){return void 0===e.__logger&&(e.__logger=o.Monitoring.Logging.getLogger("RxFetch")),e.__logger},enumerable:!0,configurable:!0}),e.request=function(t){return e._withTargetTag(this._trackedRequest,t)},Object.defineProperty(e,"_trackedRequest",{get:function(){return l||(l=o.Monitoring.TimeSeries.root.getMetric("fetch")),e._request},enumerable:!0,configurable:!0}),e.withTimeout=function(t,n){return function(r,o){return void 0===o&&(o={}),s.Async.promiseWithTimeout(t(r,o),n).catch(function(t){if(t instanceof i.TimeoutError){var n=e._getMeta(r,o),s=n.method,a=n.target;throw e.requestResults.next({type:"timeoutError",url:r,target:a,method:s}),e._extendError(t,r,s,a)}throw t})}},e._withTargetTag=function(t,n){return function(r,o){return"string"==typeof r?(o=o||{},o[e.FETCH_TARGET_TAG_OPTION]=n):r[e.FETCH_TARGET_TAG_OPTION]=n,t(r,o)}},e._withTimeoutWarn=function(t,n){return function(r,o){return i.Observable.merge(t(r,o),i.Observable.interval(n).mapTo(new u)).do(function(t){if(t instanceof u){var n=e._getMeta(r,o),i=n.method,s=n.target;e.requestResults.next({type:"timeoutWarn",url:r,method:i,target:s})}}).filter(function(e){return!(e instanceof u)}).first().toPromise()}},e._extendError=function(e,t,n,r){var o="object"==typeof e?s.isClientFetchError(e)?new c(e):e:new Error(e);return Object.assign(o,{isRxFetch:!0,method:n,target:r,url:"string"==typeof t?t:t.url})},e._getMeta=function(t,n){return{method:e._getMethod(t,n),target:e._getTarget(t,n)}},e._getMethod=function(e,t){return(("string"==typeof e?t&&t.method:e.method)||"get").toLowerCase()},e._getTarget=function(t,n){var r=("string"==typeof t?n&&n[e.FETCH_TARGET_TAG_OPTION]:t[e.FETCH_TARGET_TAG_OPTION])||"unknown";return"logs"===r?void 0:r},e.FETCH_TIMEOUT=15e3,e.FETCH_TARGET_TAG_OPTION="grammarly_target",e.__logger=void 0,e.requestResults=new i.Subject,e.nativeFetch=a.bind(window),e._request=function(t,n){var r=e._getMeta(t,n),o=r.method,i=r.target,s=l.getTimer(o+"."+i+".time").start();return e._withTimeoutWarn(e.nativeFetch,e.FETCH_TIMEOUT)(t,n).then(function(n){return i&&s.stop(),e.requestResults.next(n.ok?{type:"success",method:o,target:i}:{type:"serverError",method:o,response:n,url:t,target:i}),n}).catch(function(n){var r="object"==typeof n?n:new Error(n||"Unknown fetch error");throw e.requestResults.next({type:"clientError",url:t,reason:r,method:o,target:i}),e._extendError(r,t,o,i)})},e}();t.RxFetch=d;var p=!1;d.requestResults.subscribe(function(e){if(e.target)try{l.getCounter(e.method+"."+e.target+"."+e.type).increment(),p||"unknown"!==e.target||(p=!0,d._logger.warn("got unknown fetch target",{result:e}))}catch(e){console.error("Error while reporting timeseries metrics",e)}})},203:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(6),i=function(){function e(e,t,n,r){this.from=e,this.to=t,this.event=n,this.args=r}return e.prototype.toString=function(){return"Transition: From: "+this.from+" to: "+this.to+" (Args: "+this.args+")"},e}();t.EventInfo=i;var s=function(){function e(t,n){this._log=o.Monitoring.Logging.getLogger("coreclients.fsm"),this._parents={},this._transitions={},this._scheduled=[],this._listeners={},this._inTransition=!1,this._verbose=!1,this._id=++e._ids,this._current=t,this._final=n||null}return Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFinal",{get:function(){return this._final===this._current},enumerable:!0,configurable:!0}),e.prototype.transition=function(e,t,n){this._transitions[e<<11|n]=t},e.prototype.parent=function(e,t){this._parents[e]=t},e.prototype.is=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.findIndex(function(t){return t===e._current})>=0},e.prototype.from=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(c.bind.apply(c,[void 0,this].concat(e)))},e.prototype.with=function(e){return new a(this,e)},e.prototype.verbose=function(e,t){return this._verbose=!0,this._states=e,this._events=t,this},e.prototype.on=function(e,t){return this._addCallback(this._listeners,e,t),this},e.prototype.event=function(e,t){return r.__awaiter(this,void 0,void 0,function(){var n=this;return r.__generator(this,function(o){return[2,new Promise(function(o,s){return r.__awaiter(n,void 0,void 0,function(){var n,a,c,u,d;return r.__generator(this,function(p){switch(p.label){case 0:if(this._verbose&&this._trace("Handling event: "+this._eventName(e)),this._current===this._final)return this._trace("Cannot handle event "+e+": FSM is in it's final state"),[2,o(!1)];if(this._inTransition)return this._scheduled.push(new l(e,t,o,s)),[2];n=this._current,a=null,c=function(){var s,c,l,d,p,h,f;return r.__generator(this,function(g){switch(g.label){case 0:if(void 0===(s=u._transitions[n<<11|e]))return[3,10];u._inTransition=!0,c=u._listeners[s]||[],l=new i(u._current,s,e,t),g.label=1;case 1:g.trys.push([1,7,8,9]),u._verbose&&u._trace("Transition from "+u._stateName(l.from)+" to "+u._stateName(l.to)+" on "+u._eventName(e)+" Arguments: "+t),d=c.map(function(e){return Promise.resolve(e(l))}),u._current=s,u._inTransition=!1,p=function(e){return r.__generator(this,function(t){switch(t.label){case 0:return[4,u.event(e.event,e.args).then(function(t){return e.done(t)}).catch(function(t){return e.fail(t)})];case 1:return t.sent(),[2]}})},h=u._scheduled.shift(),g.label=2;case 2:return void 0===h?[3,5]:[5,p(h)];case 3:g.sent(),g.label=4;case 4:return h=u._scheduled.shift(),[3,2];case 5:return[4,Promise.all(d).then(function(e){return o(!0)})];case 6:return g.sent(),[3,9];case 7:return f=g.sent(),a=f,[3,9];case 8:return u._inTransition=!1,[7];case 9:return[2,"break"];case 10:return n=u._parents[n],[2]}})},u=this,p.label=1;case 1:return void 0===n?[3,3]:[5,c()];case 2:return d=p.sent(),"break"===d?[3,3]:[3,1];case 3:return a?s(a):o(!1),[2]}})})})]})})},e.prototype._addCallback=function(e,t,n){var r=e[t];return r||(r=[],e[t]=r),r.push(n),this},e.prototype._eventName=function(e){return void 0===this._events?e:this._events[e]},e.prototype._stateName=function(e){return void 0===this._states?e:this._states[e]},e.prototype._trace=function(e){this._log.trace("FSM#"+this._id+" [VERBOSE]: "+e)},e._ids=0,e}();t.StateMachine=s;var a=function(){function e(e,t){this.hsm=e,this.state=t}return e.prototype.childrenOf=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.forEach(function(t){return e.hsm.parent(e.state,t)}),this.hsm},e.prototype.parentOf=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.forEach(function(t){return e.hsm.parent(t,e.state)}),this.hsm},e}();t.WithBuilder=a;var c=function(){function e(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.hsm=e,this._states=t}return e.prototype.to=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new u(this.hsm,this._states,e)},e}();t.TransitionBuilder=c;var u=function(){function e(e,t,n){this.hsm=e,this.from=t,this.to=n}return e.prototype.on=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.forEach(function(t){return e.from.forEach(function(n){return e.to.forEach(function(r){return e.hsm.transition(n,r,t)})})}),this.hsm},e}();t.EventBuilder=u;var l=function(){function e(e,t,n,r){this.event=e,this.args=t,this.done=n,this.fail=r}return e}()},204:function(e,t,n){"use strict";function r(e,t){if(1005===e&&t){var n=t.toLowerCase();return n.indexOf("user not found")>=0?l.Reconnect.WsCodes.UNAUTHORIZED:n.indexOf("cannot find document")>=0?l.Reconnect.WsCodes.NOT_FOUND:e}return e}Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(2),s=n(203),a=n(620),c=n(43),u=n(6),l=n(77);!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.CONNECTED=1]="CONNECTED",e[e.DISCONNECTED=2]="DISCONNECTED",e[e.CLOSED=3]="CLOSED",e[e.ANY=4]="ANY"}(o=t.States||(t.States={}));var d;!function(e){e[e.CONNECT=0]="CONNECT",e[e.CONNECTED=1]="CONNECTED",e[e.DISCONNECT=2]="DISCONNECT",e[e.SEND=3]="SEND",e[e.CLOSE=4]="CLOSE"}(d=t.Events||(t.Events={})),t.errPrintln=function(e){u.Monitoring.Logging.getLogger("coreclients.errPrintln").error("WebSocket Error",e)},t.logPrintln=function(e){u.Monitoring.Logging.root.isEnabled(u.Logging.LogLevel.TRACE)&&u.Monitoring.Logging.getLogger("coreclients.errPrintln").trace("WebSocket:",{message:e})},t.ignore=function(e){};var p=function(){function e(){var e=this;this._log=u.Monitoring.Logging.getLogger("coreclients.ws"),this._maxDelay=6e4,this._delay=1e3,this._ondisconnect=t.logPrintln,this._onerror=t.errPrintln,this._onmessage=function(t,n){e._log.warn("Default message handler used <<< ",{message:n})},this._isInitialized=function(){return!0},this._read=function(e){try{var t=JSON.parse(e);if(t&&"object"==typeof t&&null!==t)return t}catch(e){}return e},this._write=function(e){return"string"==typeof e?e:JSON.stringify(e)}}return e.create=function(){return new e},e.prototype.setMaxReconnectDelay=function(e){return this._maxDelay=e,this},e.prototype.setInitialReconnectDelay=function(e){return this._delay=e,this},e.prototype.writer=function(e){return this._write=e,this},e.prototype.reader=function(e){return this._read=e,this},e.prototype.onDisconnect=function(e){return this._ondisconnect=e,this},e.prototype.onMessage=function(e){return this._onmessage=e,this},e.prototype.onError=function(e){return this._onerror=e,this},e.prototype.resetReconnectCounterWhen=function(e){return this._isInitialized=e,this},e.prototype.connect=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,r=this;return i.__generator(this,function(i){return t=new s.StateMachine(o.DISCONNECTED,o.CLOSED).with(o.ANY).parentOf(o.CLOSED,o.CONNECTED,o.CONNECTING,o.DISCONNECTED).from(o.CONNECTING).to(o.CONNECTED).on(d.CONNECTED).from(o.CONNECTED,o.CONNECTING).to(o.DISCONNECTED).on(d.DISCONNECT).from(o.DISCONNECTED).to(o.CONNECTING).on(d.CONNECT).from(o.ANY).to(o.CLOSED).on(d.CLOSE).from(o.CONNECTED).to(o.CONNECTED).on(d.SEND).on(o.DISCONNECTED,function(e){return r._ondisconnect(e.args)}),n=new f(this._maxDelay,this._delay,this._reconnect),this._reconnect=n,n.initReconnect(e,function(e){return r._createWebSocket(e,t,n)}),[2,this._createWebSocket(e,t,n)]})})},e.prototype._createWebSocket=function(e,t,n){return i.__awaiter(this,void 0,void 0,function(){var r=this;return i.__generator(this,function(s){return[2,new Promise(function(s,c){return i.__awaiter(r,void 0,void 0,function(){var r,u,p=this;return i.__generator(this,function(f){switch(f.label){case 0:return[4,t.event(d.CONNECT)];case 1:return(r=f.sent())?(this._log.debug("Connecting to "+e),u=new a.w3cwebsocket(e),u.onopen=function(e){return i.__awaiter(p,void 0,void 0,function(){var e,r,a=this;return i.__generator(this,function(i){switch(i.label){case 0:return[4,t.event(d.CONNECTED)];case 1:return(e=i.sent())?(r=new h(u,t,this._write),u.onmessage=function(e){var t=a._read(e.data);a._onmessage(r,t),a._isInitialized(t)&&n.reset()},s(r),[2]):(c(new Error("WebSocket [ERROR] FSM cannot be switched to CONNECTED state from "+o[t.current])),u.close(l.Reconnect.WsCodes.BLOCKED_BY_CLIENT,"WebSocket lib initialized"),[2])}})})},u.onclose=function(r){p._log.debug("Connection to "+e+" closed",{code:r.code,reason:r.reason,fsmState:o[t.current]});var i=new m({status:r.reason,message:"Connection closed: "+r.reason,code:r.code,url:e});t.event(d.DISCONNECT,new g(i,n))},u.onerror=function(r){try{var o=new m({status:"ws_error",message:"WebSocket error",url:e});try{p._onerror(o)}catch(e){p._log.error("OnError handler thrown an error",e)}t.event(d.DISCONNECT,new g(o,n))}finally{c(r)}},[2]):(c(new Error("\n          WebSocket [ERROR] FSM provided cannot be switched to CONNECTING state from "+o[t.current]+"\n        ")),[2])}})})})]})})},e}();t.WS=p;var h=function(){function e(e,t,n){this._ws=e,this._fsm=t,this.write=n}return e.prototype.send=function(t){var n=this;return this._fsm.event(d.SEND).then(function(r){if(!r)throw new Error("WebSocket [ERROR]: Trying to send on invalid connection state: "+o[n._fsm.current]);if(n.state!==e.State.OPEN)throw new Error("WebSocket [ERROR]: Trying to send on invalid websocket state: "+e.State[n.state]);n._ws.send(n.write(t))})},e.prototype.close=function(e){var t=this,n=void 0===e?{}:e,r=n.code,i=void 0===r?1e3:r,s=n.reason;return this._fsm.event(d.CLOSE).then(function(e){if(!e)throw new Error("WebSocket [ERROR]: Trying to close connection which already closed or had invalid state: "+o[t._fsm.current]);t._ws.close(i,s)})},Object.defineProperty(e.prototype,"url",{get:function(){return this._ws.url},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._ws.readyState},enumerable:!0,configurable:!0}),e}();t.WSConnection=h,function(e){!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(e.State||(e.State={}))}(h=t.WSConnection||(t.WSConnection={})),t.WSConnection=h;var f=function(){function e(e,t,n){this._maxDelay=e,this.initialDelay=t,this._log=u.Monitoring.Logging.getLogger("coreclients.wsreconnect"),this._prevDelay=n&&n._prevDelay||0,this._reconnectCounter=n&&n.reconnectCounter||0}return Object.defineProperty(e.prototype,"url",{set:function(e){this._log.info("WebSocket [INFO]: Url was overwritten "+this._url+" to "+e+" after disconnect"),this._url=e},enumerable:!0,configurable:!0}),e.prototype.initReconnect=function(e,t){this._reconnect=t,this._url=e},Object.defineProperty(e.prototype,"delay",{get:function(){return this._prevDelay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reconnectCounter",{get:function(){return this._reconnectCounter},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this._reconnectCounter=0,this._prevDelay=0},Object.defineProperty(e.prototype,"nextDelay",{get:function(){return Math.min(this._maxDelay,Math.max(this.initialDelay,2*this._prevDelay))},enumerable:!0,configurable:!0}),e.prototype.scheduleReconnect=function(e){return void 0===e&&(e=this.nextDelay),i.__awaiter(this,void 0,void 0,function(){var t=this;return i.__generator(this,function(n){if(e<0)throw new Error("WebSocket [ERROR]: Negative delay is not allowed: "+e);return 0===e?[2,this.reconnectNow()]:[2,new Promise(function(n,r){var o=function(){return t.reconnectNow(t._url).then(function(e){n(e)}).catch(function(e){return r(e)})};t._log.debug("Reconnecting to "+t._url+" after timeout "+e),t.cancelReconnect(),t._timer=setTimeout(o,e),t._prevDelay=e})]})})},e.prototype.reconnectNow=function(e){return void 0===e&&(e=this._url),i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(t){if(!this._reconnect)throw new Error("WebSocket [ERROR]: Reconnect is not set, consider setting it before reconnect will be triggered");return this.cancelReconnect(),this._reconnectCounter++,[2,this._reconnect(e)]})})},e.prototype.cancelReconnect=function(){this._timer&&clearTimeout(this._timer)},e}();t.WSReconnect=f;var g=function(){function e(e,t){this._error=e,this.reconnect=t}return e.prototype.toString=function(){return this._error.message},Object.defineProperty(e.prototype,"code",{get:function(){return this._error.code},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reason",{get:function(){return"WebSocket [CLOSE]: statusCode="+this._error.code+" reason: "+this._error.status},enumerable:!0,configurable:!0}),e}();t.WSCloseReason=g;!function(e){function t(e){return void 0!==e&&null!==e&&(void 0!==e.code||void 0!==e.reason)}e.is=t}(t.CloseEventInfo||(t.CloseEventInfo={}));var m=function(e){function t(t){var n=t.code,o=void 0===n?-1:n,i=t.status,s=t.url,a=t.message,c=t.body,u=e.call(this,a)||this;return u.name="WSError",u.url=s,u.code=r(o,a),u.body=c,u.status=i,u}return i.__extends(t,e),t}(c.CustomError);t.WSError=m},205:function(e,t,n){"use strict";function r(){return void 0!==window.GR_EXTENSION_ID}function o(e){return"edge"===e?a.getBrowserInfo().parsedVersion>=15:["chrome","firefox","safari"].indexOf(e)>-1}function i(e){return Array.from(e).some(function(e){return e.indexOf("office-addin")>-1})}Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),a=n(36);!function(e){function t(e){var t=window;try{t.GR_EXTENSION_SEND&&t.GR_EXTENSION_SEND(e)}catch(t){s.Monitoring.Logging.getLogger("utils.extension").error("GR_EXTENSION_SEND("+e+") failed",t)}}function n(){t("editor-fix")}function r(){t("changed-dialect")}function o(){t("cleanup")}e.sendEditorFix=n,e.sendDialectChanged=r,e.sendLogout=o}(t.notifications||(t.notifications={}));!function(e){function t(e){window.top.postMessage({grammarly:!0,action:"open-url",url:e},"*")}e.openUrl=t}(t.actions||(t.actions={})),t.isExtensionInstalled=r,t.isBrowserHasExtension=o,t.isAddinInstalled=i},209:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e){return e&&!Array.isArray(e)&&"object"==typeof e}function i(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function s(e){return Object.keys(e).map(function(t){return e[t]})}function a(e,t){return function(n){var r=e,o=n[r],i=m.__rest(n,["symbol"==typeof r?r:r+""]);return"function"==typeof t?m.__assign((s={},s[e]=t(_.Option.of(o)),s),i):m.__assign((a={},a[e]=t,a),i);var s,a}}function c(e,t,n){var r=t,o=e[r],i=m.__rest(e,["symbol"==typeof r?r:r+""]);return"function"==typeof n?m.__assign((s={},s[t]=n(_.Option.of(o)),s),i):m.__assign((a={},a[t]=n,a),i);var s,a}function u(e,t){return function(n){var r=e,o=n[r],i=m.__rest(n,["symbol"==typeof r?r:r+""]);return("function"==typeof t?t(_.Option.of(o)):t).fold(function(){return i},function(t){return m.__assign((n={},n[e]=t,n),i);var n})}}function l(e,t,n){var r=t,o=e[r],i=m.__rest(e,["symbol"==typeof r?r:r+""]);return("function"==typeof n?n(_.Option.of(o)):n).fold(function(){return i},function(e){return m.__assign((n={},n[t]=e,n),i);var n})}function d(e,t){return p(p({},e),t)}function p(e,t){for(var n in t){var r=e[n]||{},o=t[n];null!=o&&null!=r&&o.constructor===Object&&r.constructor===Object?e[n]=p(r,o):e[n]=o}return e}function h(e,t){return Object.assign({},e,t)}function f(e){return function(t){return h(t,e)}}function g(e){return Object.keys(e)}Object.defineProperty(t,"__esModule",{value:!0});var m=n(2),_=n(14);t.objectWithoutProperties=r,t.isObject=o,t.isEmptyObject=i,t.toArray=s,t.immutableModify=a,t.immutableUpdate=c,t.immutableModifyOption=u,t.immutableUpdateOption=l,t.merge=d,t.update=h,t.modify=f,t.keys=g},210:function(e,t,n){"use strict";function r(e,n){var r=n?t.DefaultAcademicGenresTitleMap[e]:t.GenresTitleMap[e];if(!r)throw new TypeError("Coudn't find title for "+e);return r}function o(e){return{contextualSpelling:e,grammar:e,sentenceStructure:e,punctuation:e,style:e,enhancement:e,plagiarism:e}}function i(e,t){return Object.assign({},e,{plagiarism:t})}Object.defineProperty(t,"__esModule",{value:!0});var s=n(101);t.GenresTitleMap={general:"General (default)",academic:"Academic",academic_general:"General academic",academic_essay:"Essay",academic_report:"Report",academic_case:"Case study",academic_review:"Book/literature review",academic_proposal:"Research proposal",academic_results:"Research results",academic_disser:"Dissertation",academic_letter:"Admission letter",business:"Business",business_other:"General business",business_letter:"Business letter",business_email:"Business email",business_report:"Report",business_memo:"Memo",business_proposal:"Proposal",business_article:"Article/blog post",business_adv:"Ad/website copy",technical:"Technical",technical_other:"General technical",technical_manual:"End-user assistance document",technical_documentation:"Technical documentation",technical_marketing:"Marketing document",medical:"Medical",medical_other:"General medical",medical_regulatory:"Regulatory writing",medical_educational:"Educational writing",creative:"Creative",creative_other:"General creative",creative_nonfiction:"Creative non-fiction",creative_novel:"Novel",creative_script:"Script",creative_story:"Short story",casual:"Casual",casual_other:"General casual",casual_email:"Personal email",casual_blog:"Personal blog post"},t.DefaultAcademicGenresTitleMap=Object.assign({},t.GenresTitleMap,{general:"General",academic_general:"General academic (default)"}),t.getGenreMenuTitle=r,t.createChecksDefaultState=o,t.setPlagiarism=i,t.defaultState={contextualSpelling:!0,grammar:!0,sentenceStructure:!0,punctuation:!0,style:!0,enhancement:!0,plagiarism:!1};var a=function(){function e(e,t,n){this._genre=e,this._checks=t,this._telemetry=n,this.genre=this._genre,this.contextualSpellingEnabled=this._checks.lens("contextualSpelling"),this.grammarEnabled=this._checks.lens("grammar"),this.sentenceStructureEnabled=this._checks.lens("sentenceStructure"),this.punctuationEnabled=this._checks.lens("punctuation"),this.styleEnabled=this._checks.lens("style"),this.enhancementEnabled=this._checks.lens("enhancement"),this.plagiarismEnabled=this._checks.lens("plagiarism"),this.checksEnabled=this._checks}return e.prototype.setGenre=function(e){this._genre.set(e)},e.prototype.toggleFreemiumChecks=function(){var e=[this.contextualSpellingEnabled,this.grammarEnabled,this.punctuationEnabled,this.sentenceStructureEnabled,this.styleEnabled],t=e.some(function(e){return e.get()});e.forEach(function(e){return e.set(!t)}),this._telemetry.settingsToggled(!t,"all")},e.prototype.isAlertGroupEnabled=function(e){var t=this._checks.get();return e===s.AlertGroup.contextualSpelling&&t.contextualSpelling||e===s.AlertGroup.enhancement&&t.enhancement||e===s.AlertGroup.grammar&&t.grammar||e===s.AlertGroup.plagiarism&&t.plagiarism||e===s.AlertGroup.punctuation&&t.punctuation||e===s.AlertGroup.sentenceStructure&&t.sentenceStructure||e===s.AlertGroup.style&&t.style},e}();t.CheckingSettingsModelImpl=a},211:function(e,t,n){"use strict";function r(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60);return{h:t,m:n,s:e-3600*t-60*n}}function o(e){return s.padStart(String(e),2,"0")}function i(e,t){var n=void 0===t?{}:t,i=n.short,a=void 0!==i&&i,c=n.withSec,u=void 0!==c&&c,l=r(e),d=l.h,p=l.m,h=l.s,f=[];return d>0&&f.push(o(d)+" "+(a?"h":s.pluralize(d,"hour","hours"))),(p>0||!u)&&f.push(o(p)+" "+(a?"min":s.pluralize(p,"minute","minutes"))),u&&f.push(o(h)+" "+(a?"sec":s.pluralize(h,"second","seconds"))),f.join(" ")}Object.defineProperty(t,"__esModule",{value:!0});var s=n(158);t.MS_IN_SEC=1e3,t.MS_IN_MIN=60*t.MS_IN_SEC,t.MS_IN_HOUR=60*t.MS_IN_MIN,t.MS_IN_DAY=24*t.MS_IN_HOUR,t.secondsToTime=r,t.formatTime=i,t.convertTimeToShortString=function(e){return e.h?e.h+" hr "+e.m+" min":e.m>0?e.m+" min "+e.s+" sec":e.s+" sec"}},213:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(3);r||(r={});!function(e){!function(e){!function(e){e.MAIN="main",e.IMPORTANT="important"}(e.Type||(e.Type={}))}(e.Edit||(e.Edit={}))}(t.RawTransform||(t.RawTransform={}));!function(e){function t(e,t){return Object.assign({},e,{begin:e.begin+t,end:e.end+t,highlightBegin:e.highlightBegin+t,highlightEnd:e.highlightEnd+t})}function n(e){return"Originality"===e.cardLayout.category}function r(e){return"Readability mismatch"===e.cardLayout.group}function o(e){return!0===e.hidden}function i(e){if(!e)return!1;var t=e;return Number.isInteger(t.rev)&&Number.isInteger(t.begin)&&Number.isInteger(t.end)&&Number.isInteger(t.highlightBegin)&&Number.isInteger(t.highlightEnd)}e.shift=t,e.isPlagiarism=n,e.isReadability=r,e.isHidden=o,e.isRawAlert=i,e.mock={id:"",rev:0,pname:"Spelling/BritishVsAmerican/BrInstOfAm/BrInstOfAm",group:"ContextualSpelling",category:"BritishVsAmerican",categoryHuman:"British vs American",hidden:!1,text:"centralise",todo:"correct",title:"Inconsistent spelling",transforms:["<span class='gr_grammar_del'>centralise</span>→<span class='gr_grammar_ins'>centralize</span>"],details:"<p>One of&nbsp;the most obvious differences between American and British English is&nbsp;the spelling of&nbsp;certain words such as&nbsp;<b>color/colour, learned/learnt,</b> and <b>toward/towards</b>. Typically, the spelling of&nbsp;words like these only varies by&nbsp;one or&nbsp;two letters. In&nbsp;the interest of&nbsp;consistency and clarity, you should use the spelling that will be&nbsp;more familiar to&nbsp;your intended audience.\n",explanation:"<p>The word <b>centralise</b> is&nbsp;a&nbsp;British English spelling. In&nbsp;the interest of&nbsp;consistency, consider replacing it&nbsp;with the American English spelling.\n",examples:'<p><span class="grey">British: I&nbsp;wish you success in&nbsp;all your endeavours.</span><br/><span class="grey">American: I&nbsp;wish you success in&nbsp;all your endeavors.</span><br/><p><span class="grey">British: Sweet yoghurts contain a&nbsp;lot of&nbsp;sugar.</span><br/><span class="grey">American: Sweet yogurts contain a&nbsp;lot of&nbsp;sugar.</span><br/><p><span class="grey">British: Serena moved towards the blinking light.</span><br/><span class="grey">American: Serena moved toward the blinking light.</span><br/>',free:!0,highlightBegin:5092,highlightEnd:5102,highlightText:"",begin:5092,end:5102,replacements:["centralize"],extra_properties:{priority:"2"},cardLayout:{category:"Accuracy",group:"Spelling",groupDescription:"Checks spelling, confused words, capitalization",rank:10}},e.mockPlagiarism={id:"",rev:0,transforms:[],title:"Citation audit",details:"",explanation:"",examples:"",free:!1,hidden:!1,todo:"",cardLayout:{category:"Originality",group:"Unoriginal content",groupDescription:"Unoriginal content from the web",rank:0},category:"Plagiarism",categoryHuman:"Unoriginal content",begin:156,end:697,text:"",group:"Plagiarism",pname:"Plagiarism/Plagiarism/UnoriginalContent",highlightBegin:156,highlightEnd:697,highlightText:"",replacements:[],extra_properties:{}}}(t.RawAlert||(t.RawAlert={}));!function(e){e.NOT_AUTHORIZED="not_authorized",e.SESSION_NOT_INITIALIZED="session_not_initialized",e.BAD_REQUEST="bad_request",e.BACKEND_ERROR="backend_error",e.AUTH_ERROR="auth_error",e.RUNTIME_ERROR="runtime_error",e.ILLEGAL_DICT_WORD="illegal_dict_word",e.TIMEOUT="timeout",e.CANNOT_FIND_SYNONYM="cannot_find_synonym",e.CANNOT_GET_TEXT_STATS="cannot_get_text_stats"}(t.ErrorCode||(t.ErrorCode={}));!function(e){e[e.INFO=0]="INFO",e[e.WARN=1]="WARN",e[e.ERROR=2]="ERROR"}(t.ErrorSeverity||(t.ErrorSeverity={}));!function(e){e.IGNORE="IGNORE",e.IGNORE_ALL="IGNORE_ALL",e.ADD_TO_DICTIONARY="ADD_TO_DICTIONARY",e.REPORT_SUGGESTION="REPORT_SUGGESTION",e.REMOVE_FROM_DICTIONARY="REMOVE_FROM_DICTIONARY",e.LOOKED="LOOKED",e.ACCEPTED="ACCEPTED",e.ACKNOWLEDGED="ACKNOWLEDGED",e.POPUP_OPEN="POPUP_OPEN",e.POPUP_CLOSE="POPUP_CLOSE",e.UNDOED="UNDOED",e.LIKE="LIKE",e.DISLIKE="DISLIKE",e.WRONG_SUGGESTION="WRONG_SUGGESTION",e.OFFENSIVE_CONTENT="OFFENSIVE_CONTENT",e.EXPANDED="EXPANDED",e.DISMISS_BY_LENS="DISMISS_BY_LENS",e.SYNONYM_ACCEPTED="SYNONYM_ACCEPTED"}(t.FeedbackType||(t.FeedbackType={})),t.BIG_TEXT_SIZE=300;!function(e){function t(e,t,n){var r=function(e,t){return Math.max(Math.trunc(e/t),o.rand(e))};return o.ArrayUtils.mapNTimes(r(e,2),function(e){return o.ArrayUtils.mapNTimes(r(t,3),function(t){return{value:Math.random()*n,alertIds:[],footprint:""+(100*e+t)}})})}e.generatePoints=t}(t.TextMaps||(t.TextMaps={}))},214:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.updateBilling=0]="updateBilling",e[e.paymentError=1]="paymentError",e[e.subscriptionUpdated=2]="subscriptionUpdated",e[e.subscriptionCancelled=3]="subscriptionCancelled",e[e.cantUpgradeSubscription=4]="cantUpgradeSubscription",e[e.resumedSubscription=5]="resumedSubscription",e[e.cantResumeSubscription=6]="cantResumeSubscription",e[e.unknownError=7]="unknownError",e[e.unknownOrigin=8]="unknownOrigin",e[e.blobDownloadUnsupported=9]="blobDownloadUnsupported",e[e.mobileCancel=10]="mobileCancel",e[e.paypalSuccess=11]="paypalSuccess",e[e.paypalError=12]="paypalError"}(t.SubscriptionNotificationType||(t.SubscriptionNotificationType={}))},215:function(e,t,n){"use strict";function r(e){if(!e)return"general";switch(e.split("_")[0]){case"academic":return"academic";case"business":return"business";case"technical":case"medical":return"technical";case"creative":return"creative";case"casual":return"casual";default:return"general"}}function o(e){switch(e){case"general":return"general";case"academic":return"academic_general";case"business":return"business_other";case"technical":return"technical_other";case"creative":return"creative_other";case"casual":return"casual_other";default:return e}}function i(e){return s.fromDomain(r(e))}Object.defineProperty(t,"__esModule",{value:!0});var s,a=n(114),c=n(181),u=n(396),l=n(6),d=n(14),p=n(3);!function(e){function t(e,t){return e.domain===t.domain&&p.isSetsEq(e.goals,t.goals)&&p.isOptionsEq(e.audience,t.audience)&&p.isOptionsEq(e.style,t.style)&&p.isOptionsEq(e.emotion,t.emotion)}function n(e){return{goals:new Set,domain:e,audience:d.None,style:d.None,emotion:d.None}}function r(e,t){return t.map(function(t){return"formal"===t?"creative"!==e&&"casual"!==e:"academic"!==e}).getOrElse(!0)}function o(t){var n=e.IOType.decode(t).mapLeft(c.failure).mapLeft(function(e){return l.Monitoring.Logging.getLogger("coreclients.dox.context").warn("failed to parse document context",e),e});return u.either.isLeft(n)?d.Left(n.value):d.Right(n.value)}function i(e){if(void 0!==e)return o(e).fold(function(){},function(e){return e})}function s(t){return e.IOType.encode(t)}e.isEquals=t,e.goals=p.IO.literalArray(["inform","describe","convince","tellStory"]),e.goalsLabels=["Inform","Describe","Convince","Tell A Story"],e.audiences=p.IO.literalArray(["general","knowledgeable","expert"]),e.styles=p.IO.literalArray(["formal","informal"]),e.emotions=p.IO.literalArray(["mild","strong"]),e.domains=p.IO.literalArray(["general","academic","business","technical","creative","casual"]),e.fromDomain=n,e.empty=n("general"),e.isStyleValidWithDomain=r;var h=p.IO.Type.literalUnion("goal",e.goals),f=p.IO.Type.set(h),g=p.IO.Type.literalUnion("audience",e.audiences),m=p.IO.Type.literalUnion("style",e.styles),_=p.IO.Type.literalUnion("emotion",e.emotions),y=p.IO.Type.literalUnion("domain",e.domains);e.IOType=a.interface({goals:f,domain:y,audience:p.IO.Type.option(g),style:p.IO.Type.option(m),emotion:p.IO.Type.option(_)}),e.tryParse=o,e.parse=i,e.serialize=s}(s=t.DocumentContext||(t.DocumentContext={})),t.genreToDomain=r,t.domainToGenre=o,t.genreToDocumentContext=i},216:function(e,t,n){"use strict";function r(e,n){var r="function"==typeof e?e:n,o="function"!=typeof e?e:void 0;return r.contextTypes=t.baseComponentContextTypes,o&&(r.propTypes=o),r}function o(e){return r(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),s=n(13),a=n(24),c=n(23),u=n(7),l=n(159),d=n(75),p=n(567),h=n(217),f=n(3),g=n(155),m=n(311),_={appConfig:a.object},y={screen:a.object},v={visibleOverlays:a.object};t.baseComponentContextTypes=Object.assign({router:a.object},g.Router.ContextTypes,_,l.oldEditorTelemetryContextType,l.telemetryContextType,d.TextResources.ContextTypes,h.notificationsContextTypes,p.Tooltip.ContextTypes,y,m.documentLoaderContext,v);var b=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(n,e),n.contextTypes=t.baseComponentContextTypes,n}(s.Component);t.BaseComponent=b,t.component=r,t.withContext=o;var w=function(){function e(){var e=this;this.resize=c.Observable.fromEvent(window,"resize").share().mapTo(void 0),this.remSize=u.Atom.create(this._getRemSize()),this._subs=[this.resize.subscribe(function(){return e.remSize.set(e._getRemSize())})],f.registerDebugHelper("getRemSize",function(){return e.remSize.get()})}return e.prototype.dispose=function(){this._subs.forEach(function(e){return e.unsubscribe()})},e.prototype.update=function(){var e=this;requestAnimationFrame(function(){return e.remSize.set(e._getRemSize())})},e.prototype._getRemSize=function(){return parseFloat(getComputedStyle(document.documentElement).fontSize||"16")},e}();t.ScreenContextImpl=w},217:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),o=n(7),i=n(6),s=function(){function e(){}return e.prototype.error=function(e){return{type:"error",args:{errorMessage:e},dontRemoveOnAnyAction:!0,denaliShowTimeMs:1/0,denaliCloseOnClick:!0}},e.prototype.documentUploaded=function(e){return{type:"documentUploaded",args:{navigateToDocument:e},showTimeMs:1/0}},e.prototype.denaliDocumentUploaded=function(e){return{type:"denaliDocumentUploaded",args:{navigateToDocuments:e},severity:"info",showTimeMs:1/0}},e.prototype.newDocumentCreated=function(e){return{type:"newDocumentCreated",args:{navigateToDocument:e},showTimeMs:1/0}},e.prototype.documentDeleted=function(e,t,n,r){return void 0===r&&(r=!1),{type:"documentDeleted",args:{documentTitle:t,documentId:e,failedToRestore:r,restoreDocument:n}}},e.prototype.documentTypeUnsupported=function(){return{type:"documentTypeUnsupported"}},e.prototype.trackedChangesIsUnsupported=function(){return{type:"trackedChangesIsUnsupported",showTimeMs:3e4}},e.prototype.documentUploadGeneralError=function(){return{type:"documentUploadGeneralError"}},e.prototype.documentIsEmpty=function(){return{type:"documentIsEmpty"}},e.prototype.generic=function(e,t,n){return{type:"generic",args:{message:e,description:t},severity:n||"info",denaliShowTimeMs:5e3}},e.prototype.documentSizeExceeded=function(){return{type:"documentSizeExceeded"}},e.prototype.changeEmail=function(e){return{type:"changeEmail",args:{email:e}}},e.prototype.logoutError=function(e,t){return{type:"logoutError",args:{forceRetry:e,timeToRetry:t},showTimeMs:1/0,dontCloseOnClick:!0,important:!0,dontRemoveOnAnyAction:!0,severity:"error"}},e.prototype.selfUpdate=function(){return{type:"selfUpdateBlocker",showTimeMs:1/0,denaliShowTimeMs:1/0,dontCloseOnClick:!0,dontRemoveOnAnyAction:!0,severity:"error"}},e.prototype.unauthorizedError=function(){return{type:"unauthorizedError",showTimeMs:1/0,dontCloseOnClick:!0,important:!0,dontRemoveOnAnyAction:!0,severity:"error"}},e.prototype.offline=function(e,t){return{type:"offline",args:{resetClock:e,reconnectTime:t},showTimeMs:1/0,dontCloseOnClick:!0,important:!0,severity:"error"}},e.prototype.slowNetwork=function(){return{type:"slowNetwork",showTimeMs:1/0,dontCloseOnClick:!0,denaliShowTimeMs:5e3,denaliCloseOnClick:!0}},e.prototype.serverError=function(){return{type:"serverError",showTimeMs:1/0,dontCloseOnClick:!0,important:!0,severity:"error"}},e.prototype.unknownConnectionError=function(){return{type:"unknownConnectionError",showTimeMs:1/0,dontCloseOnClick:!0,important:!0,severity:"error"}},e.prototype.connectionWSError=function(){return{type:"connectionWSError",showTimeMs:1/0,dontCloseOnClick:!0,important:!0,severity:"error"}},e.prototype.clientConnectionError=function(){return{type:"clientConnectionError",showTimeMs:1/0,dontCloseOnClick:!0,important:!0,severity:"error"}},e.prototype.checkingIsDown=function(){return{type:"checkingIsDown",showTimeMs:1/0,denaliShowTimeMs:1/0,dontCloseOnClick:!0,denaliCloseOnClick:!0}},e.prototype.extensionInstallFailed=function(){return{type:"extensionInstallFailed"}},e.prototype.copyToClipboardFailed=function(){return{type:"copyToClipboardFailed",denaliShowTimeMs:5e3,denaliCloseOnClick:!0}},e.prototype.alertUndo=function(e,t){return{type:"alertUndo",args:{undoAction:e,action:t},showTimeMs:1/0,size:"flexible",severity:"info"}},e.prototype.denaliAlertUndo=function(e,t,n){return{type:"alertUndoDenali",undoHandler:e,dismissedHandler:t,args:n,denaliShowTimeMs:5e3,size:"flexible",severity:"info",exclusiveTag:"alertUndoDenali"}},e.prototype.proofitPaymentDeclinedError=function(e,t){return{type:"proofitPaymentDeclinedError",denaliCloseOnClick:!0,denaliShowTimeMs:1/0,args:{paymentMethod:e,creditCardSuffix:t}}},e.prototype.proofitEmptyDocumentError=function(){return{type:"proofitEmptyDocumentError",denaliCloseOnClick:!0,denaliShowTimeMs:1/0}},e.prototype.proofitDocumentProofreadError=function(e){return{type:"proofitDocumentProofreadError",denaliCloseOnClick:!0,denaliShowTimeMs:1/0,args:{navigateToDocuments:e}}},e.prototype.proofitCancelled=function(){return{type:"proofitCancelled",denaliCloseOnClick:!0,denaliShowTimeMs:1/0}},e.prototype.proofitCompleted=function(e,t,n){return{type:"proofitCompleted",severity:"info",denaliCloseOnClick:!0,denaliShowTimeMs:1/0,args:{email:e,documentTitle:t,documentDownloadUrl:n}}},e.prototype.proofitInProgress=function(e){return{type:"proofitInProgress",args:{email:e}}},e.prototype.alertsNothingFound=function(){return{type:"alertsNothingFound",severity:"info"}},e.prototype.isTemporaryDownloadError=function(){return{type:"isTemporaryDownloadError"}},e.prototype.downloadDocumentNotFoundError=function(){return{type:"downloadDocumentNotFoundError"}},e.prototype.documentNotFoundError=function(e){return{type:"documentNotFoundError",showTimeMs:1/0,dontCloseOnClick:!0,important:!0,severity:"error",args:{navigateToDocuments:e}}},e.prototype.blobDownloadUnsupported=function(){return{type:"blobDownloadUnsupported",showTimeMs:1/0,denaliShowTimeMs:1/0,denaliCloseOnClick:!0}},e.prototype.downloadProofread=function(){return{type:"downloadProofread"}},e}();t.EditorNotificationFactory=s,t.defaultState={items:[],counterId:0};var a=function(){function e(e){this._getNotification=e}return e.prototype.show=function(e){return this._getNotification().show(e)},e.prototype.showMessage=function(e){return this._getNotification().showMessage(e)},e.prototype.showError=function(e,t){return this._getNotification().showError(e,t)},e.prototype.hide=function(e){return this._getNotification().hide(e)},Object.defineProperty(e.prototype,"create",{get:function(){return this._getNotification().create},enumerable:!0,configurable:!0}),e}();t.ProxyShowNotificationsModel=a;var c=function(){function e(e){this._state=e,this._items=this._state.lens("items"),this.items=this._items.view(),this.create=new s}return e.prototype.show=function(e){return i.Monitoring.Logging.getLogger("notifications").log("error"===e.type?i.Logging.LogLevel.WARN:i.Logging.LogLevel.INFO,"Notification shown: "+e.type,i.EventProps.fromAny(e)),this._addNotifications(this._state,e).id},e.prototype.showMessage=function(e,t){return this.show(this.create.generic(e,t))},e.prototype.showError=function(e){return this.show(this.create.error(e))},e.prototype.hide=function(e){this._hideNotification(this._state,e)},e.prototype.expire=function(e){this._hideNotification(this._state,e)},e.prototype.cleanup=function(){this._items.modify(this._cleanup)},e.prototype._addNotifications=function(e,t){var n=this,r=(e.get().counterId||0)+1,o=Object.assign({},t,{id:r});return e.modify(function(e){var t=n._cleanup(e&&e.items||[]),i=t.filter(function(e){return e.important}),s=t.filter(function(e){return!e.important});return{counterId:r,items:i.concat([o],s)}}),o},e.prototype._cleanup=function(e){return e.filter(function(e){return e&&!e.expired&&e.dontRemoveOnAnyAction})},e.prototype._hideNotification=function(e,t){e.lens("items").lens(o.Lens.find(function(e){return t===e.id})).lens(o.Lens.create(function(e){return e&&e.expired},function(e,t){return t?Object.assign({},t,{expired:e}):t})).set(!0)},e}();t.NotificationsModelImpl=c,t.notificationsContextTypes={notifications:r.object}},3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);r.__exportStar(n(156),t),r.__exportStar(n(83),t);var o=n(1422);t.Async=o.Async;var i=n(1420);t.Animation=i.Animation;var s=n(1425);t.ConnectionManager=s.ConnectionManager;var a=n(1424);t.Clipboard=a.Clipboard;var c=n(1429);t.Either=c.Either;var u=n(1436);t.Worker=u.Worker;var l=n(1423);t.Buffer=l.Buffer;var d=n(585);t.DOM=d;var p=n(158);t.StringUtils=p;var h=n(586);t.ReactUtils=h;var f=n(211);t.DateUtils=f;var g=n(1432);t.LocalStorage=g;var m=n(1426);t.Cookie=m;var _=n(205);t.Extension=_;var y=n(36);t.BrowserInfo=y;var v=n(209);t.ObjectUtils=v;var b=n(1421);t.ArrayUtils=b;var w=n(1434);t.OptionUtils=w;var E=n(315);t.RxUtils=E;var C=n(1428);t.DesktopEditor=C;var S=n(1430);t.ImmutableMap=S;var k=n(1431);t.IO=k;var T=n(1433);t.NotEmpty=T.NotEmpty;var x=n(600);t.Fullstory=x.Fullstory},300:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),o=n(68),i=function(){function e(e,t,n,i,s,a){var c=this;this._url=e,this._fetch=t,this._clientType=n,this._clientVersion=i,this._fingerprints=s,this._token=a,this._headersAppender=o.createHeadersAppender({"X-Client-Version":this._clientVersion,"X-Client-Type":function(){return c._clientType},"X-Container-Id":this._fingerprints.containerId,"X-CSRF-Token":this._fingerprints.csrfToken}),this._cookiesAppender=o.createCookiesAppender({grauth:function(){return c._token},"csrf-token":this._fingerprints.csrfToken}),this._ajax=r.Ajax.factory(this._fetch,void 0,r.RequestBuilder.Extender.compose(this._headersAppender,this._cookiesAppender))}return e.prototype._setToken=function(e){this._token=e},e.prototype.orAnonymous=function(){var e=r.RequestBuilder.get(this._url,"user/oranonymous").queryParam("app",this._clientType);return this._ajax(e)},e.prototype.login=function(e,t){var n=r.RequestBuilder.post(this._url,"api/login").json({email_login:{email:e,password:t}});return this._ajax(n)},e.prototype.logout=function(){var e=r.RequestBuilder.post(this._url,"/logout");return this._ajax(e,r.Ajax.toVoid)},e.prototype.changeName=function(e){var t=r.RequestBuilder.post(this._url,"/user").json({name:e});return this._ajax(t,r.Ajax.toVoid)},e.prototype.changeEmail=function(e,t){var n=r.RequestBuilder.post(this._url,"/user/email/change").json({newEmail:e,password:t});return this._ajax(n,r.Ajax.toVoid)},e.prototype.changePassword=function(e,t,n){var o=r.RequestBuilder.post(this._url,"/user/password/change").formParam("email",e).formParam("new_pwd",n).formParam("old_pwd",t);return this._ajax(o,r.Ajax.toVoid)},e.prototype.getUser=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=r.RequestBuilder.get(this._url,"user").queryParam("app",this._clientType);return e.forEach(function(e){return n.queryParam("field",e)}),this._ajax(n)},e.prototype.getSettings=function(){var e=r.RequestBuilder.get(this._url,"/user/settings");return this._ajax(e)},e.prototype._setSettings=function(e){var t=r.RequestBuilder.post(this._url,"/user/settings").json(e);return this._ajax(t)},e.prototype.setSettings=function(e){var t=this;return this.getSettings().then(function(n){return t._setSettings(Object.assign({},n,e))})},e.prototype.enableSandbox=function(e){var t=r.RequestBuilder.put(this._url,"user").json({id:e,customFields:{"sandbox.payments":"Yes"}});return this._ajax(t,r.Ajax.toVoid)},e.prototype.addInstitution=function(e,t){var n=r.RequestBuilder.put(this._url,"user").json({id:e,institutionId:t});return this._ajax(n,r.Ajax.toVoid)},e.targetTag="auth",e}();t.Auth=i;!function(e){e.email="EMAIL",e.google="GOOGLE",e.facebook="FACEBOOK"}(t.LoginType||(t.LoginType={}));!function(e){e.webChrome="webeditor_chrome",e.webFirefox="webeditor_firefox",e.webSafari="webeditor_safari",e.webIE="webeditor_ie",e.webEdge="webeditor_edge",e.desktop="desktopeditor",e.webTest="webeditor_test",e.unknown="webeditor_unknown"}(t.ClientType||(t.ClientType={}))},301:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_FILE_SIZE=4194304},302:function(e,t,n){"use strict";function r(e){return"null"===e||"undefined"===e||null===e||void 0===e}function o(e){if(null===e||"null"===e||"boolean"==typeof e)return null;var t=Number(e);return Number.isNaN(t)?null:t}function i(e){return r(e)?null:"true"===e||"false"!==e&&"0"!==e&&Boolean(e)}function s(e,t){return r(e)?t:"true"===e||"false"!==e&&"0"!==e&&Boolean(e)}function a(e){try{return JSON.parse(decodeURI(e))}catch(e){return null}}Object.defineProperty(t,"__esModule",{value:!0});var c=n(53),u=n(68);t.emptyValue=r;var l=function(){function e(e){this._value=e}return e.prototype.getStr=function(){return r(this._value)?null:String(this._value)},e.prototype.getNum=function(){return o(this._value)},e.prototype.getBool=function(){return i(this._value)},e.prototype.getBoolOrDefault=function(e){return s(this._value,e)},e.prototype.getObject=function(){return a(this._value)},e.prototype.getArray=function(){return a(this._value)},e.prototype.getObjProp=function(e){return this._value.hasOwnProperty(e)?this._value[e]:null},e}();t.Property=l;var d=function(){function e(){}return e.prototype.getStr=function(e){return this.hasOwnProperty(e)?String(this[e]):null},e.prototype.getNum=function(e){return this.hasOwnProperty(e)?o(this[e]):null},e.prototype.getBool=function(e){return this.hasOwnProperty(e)?i(this[e]):null},e.prototype.getObject=function(e){return this.hasOwnProperty(e)?a(this[e]):null},e.prototype.has=function(e){return this.hasOwnProperty(e)},e.prototype.ifPresent=function(e,t){this[e]&&t&&t.apply(this[e])},e.of=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=new e,o=0,i=t;o<i.length;o++){var s=i[o];for(var a in s){var c=s[a];r[a]="object"==typeof c?encodeURI(JSON.stringify(c)):c}}return r},e.prototype.entries=function(){var e=this;return Object.keys(this).map(function(t){return[t,new l(e[t])]})},e.find=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t.find(function(t){return t.has(e)});return new l(r&&r[e])},e}();t.Properties=d;var p=function(){function e(e,t,n){var r=this;this._token=n,this._endpoints={props:"props/v2",mimic:"mimic"},this._cookiesAppender=u.createCookiesAppender({grauth:function(){return r._token}}),this._url=c.RequestBuilder.join(e,"api"),this._ajax=c.Ajax.factory(t,void 0,this._cookiesAppender)}return e.prototype.load=function(){return this._execute(c.RequestBuilder.get(this._url,this._endpoints.props)).then(d.of)},e.prototype.get=function(e){return this._execute(c.RequestBuilder.get(this._url,this._endpoints.props,e),c.Ajax.parseText).then(function(t){return d.of((n={},n[e]=t||null,n));var n})},e.prototype.save=function(e){return this._execute(c.RequestBuilder.post(this._url,this._endpoints.props).json(e),c.Ajax.toVoid)},e.prototype.getMimic=function(e){return this._execute(c.RequestBuilder.get(this._url,this._endpoints.mimic).cookie("gnar_containerId",e))},e.prototype.getMimicWithProps=function(e){return this._execute(c.RequestBuilder.get(this._url,this._endpoints.mimic,"withProps").cookie("gnar_containerId",e)).then(function(e){var t=e.groups,n=e.properties;return{experiments:new Set(t),properties:d.of(n)}})},e.prototype._execute=function(e,t){return this._ajax(e,t)},e.targetTag="dapi",e}();t.Dapi=p},303:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(14),i=n(6),s=n(3),a=n(305),c=n(157),u=n(43),l=n(100),d=n(1380),p=n(304),h=n(321),f=n(556),g=n(77),m=function(e){function t(n,i,a,d,p,h){void 0===p&&(p=t.Queue.create({})),void 0===h&&(h=500);var m=e.call(this,n)||this;return m._originalUrl=n,m._changesQueue=p,m._sendDelay=h,m._nextId=1,m._revision=-1,m._clientId=-1,m._idleRestore=o.None,m._forceSend=!1,m._proofitPlansRequester=new u.ValueRequester(function(e){return m._sendInbandCommand(e)},15e3,"ProofitPlans"),m._proofitCreateJobRequester=new u.ValueRequester(function(e){return m._sendInbandCommand(e)},15e3,"ProofitCreateJob"),m._disconnectHandler=function(e,t,n){return r.__awaiter(m,void 0,void 0,function(){var i,s;return r.__generator(this,function(r){switch(r.label){case 0:return e.reconnect.url=this._originalUrl+(-1===this._revision?"":"?sinceVersion="+this._revision),(i=this._changesQueue.isEmpty,"idle"!==(s=g.Reconnect.getReconnectAction(e,{canGoIdle:i,isInitialized:!0})))?[3,1]:(u.invariant(!this._changesQueue.isStaging,"queue should be not in staging state"),this._log.debug("Disconnected due to timeout. Waiting for changes to reconnect."),this._idleRestore=o.Some(function(){return n(0)}),[3,3]);case 1:return this._changesQueue.isStaging&&(this._log.debug("We got disconnect while trying send changed"),this._changesQueue.unstage()),[4,this._handler.disconnectHandler(e,t,n,s)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},m._resolvePendingFlushPromise=s.noop,m._handler=new t.DefaultHandler(d,m._log),m._initHandler=i,m._failHandler=a,m._fsm.from(f.States.READY).to(f.States.WAIT_ACK).on(f.Events.SEND).from(f.States.WAIT_ACK).to(f.States.READY).on(f.Events.ACK,f.Events.RESET).from(f.States.WAIT_ACK).to(f.States.DISCONNECTED).on(f.Events.DISCONNECT).from(f.States.WAIT_ACK).to(f.States.CLOSED).on(f.Events.CLOSE).on(f.States.READY,function(e){return m._trySendAfterTimeout()}).on(f.States.CLOSED,function(e){var t=e.args?e.args:l.DoxErrors.CLOSED_ERROR;m._failInit(t),m._changesQueue.drop("connection closed")}),m._fsm.event(f.Events.CONNECT).catch(),s.registerDebugHelper("doxReset",function(e){if(void 0===e)throw new Error("provide text!");m._handleResetMessage({op:"reset",id:m._nextId++,doc:(new c.Delta).insert(e),vsn:m._revision+10,clientId:m._clientId})}),s.registerDebugHelper("doxState",m),s.registerDebugHelper("closeDoxSocket",function(e,t){void 0===e&&(e=1e3),m._conn._ws.close(e,t)}),m}return r.__extends(t,e),t.getWsDocumentUrl=function(e,t){return e+(void 0===t?"/documents/ws":"/documents/"+t+"/ws")},t.create=function(e,n,r,o){return new Promise(function(i,s){return new t(e,i,s,n,r,o)})},Object.defineProperty(t.prototype,"isInitialRevision",{get:function(){return 1===this._revision},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inSync",{get:function(){return!this._changesQueue.isStaging&&this._changesQueue.isEmpty},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fsmState",{get:function(){return f.States[this._fsm.current]},enumerable:!0,configurable:!0}),t.prototype.getProofitPlans=function(){return this._proofitPlansRequester.request(new d.Message.ProofitOptionsMessage(this._nextId++))},t.prototype.placeProofitOrder=function(e){return this._proofitCreateJobRequester.request(new d.Message.ProofitPlaceOrderMessage(this._nextId++,a.Proofit.PlanType[e]))},t.prototype.pushChanges=function(e){if(c.Change.isDelta(e))return this._checkIdle(),this._changesQueue.pushChanges(e);if(c.Change.isReset(e))throw new Error("Invalid change. Reset changes are not supported by dox");return-1},t.prototype.updateMetadata=function(e){return this._checkIdle(),this._changesQueue.pushMeta(e)},t.prototype._handleMessage=function(e){return r.__awaiter(this,void 0,void 0,function(){var t;return r.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this._messageHandler(e)];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),this._log.warn("fail on processing incoming message",t),this._failInit(t),this._conn._ws.close(g.Reconnect.WsCodes.CLIENT_MALFUNCTION,"Unexpected failure on: "+t.message),[3,3];case 3:return[2]}})})},t.prototype._messageHandler=function(e){return r.__awaiter(this,void 0,void 0,function(){var t;return r.__generator(this,function(n){switch(n.label){case 0:switch(this._log.isEnabled(i.Logging.LogLevel.TRACE)&&this._log.trace("Message <<<",{message:JSON.stringify(e)}),t=e.op){case"init":return[3,1];case"patch":return[3,3];case"reset":return[3,9];case"vsn":return[3,11];case"mongodb_change":return[3,12];case"document_metadata_changed":return[3,13];case"proofit_turnaround_options":return[3,14];case"proofit_create_job":return[3,15]}return[3,16];case 1:return[4,this._handleInitMessage(e)];case 2:return n.sent(),[3,17];case 3:return this._fsm.is(f.States.READY)||this._fsm.is(f.States.WAIT_ACK)&&this._clientId===e.cl?[4,this._handlePatchMessage(e)]:[3,5];case 4:return n.sent(),[3,8];case 5:return this._fsm.is(f.States.WAIT_ACK)?(this._log.warn("got change while waiting ack for other change"),[4,this._handlePatchMessage(e)]):[3,7];case 6:return n.sent(),[3,8];case 7:this._log.warn("got unexpected patch message",{currentState:f.States[this._fsm.current]}),n.label=8;case 8:return[3,17];case 9:return[4,this._handleResetMessage(e)];case 10:return n.sent(),[3,17];case 11:case 12:return[3,17];case 13:return this._handleMetaChangeMessage(e),[3,17];case 14:return this._proofitPlansRequester.onValue(e.id,a.Proofit.processOptions(e)),[3,17];case 15:return this._proofitCreateJobRequester.onValue(e.id,a.Proofit.parseCreateJobResult(e)),[3,17];case 16:e.error||(this._log.warn("Unexpected message",{message:e}),this._failInit(e)),n.label=17;case 17:return[2]}})})},t.prototype._handleInitMessage=function(e){return r.__awaiter(this,void 0,void 0,function(){var n,o,i,a,u,l;return r.__generator(this,function(r){switch(r.label){case 0:return[4,this._fsm.event(f.Events.INITIALIZE)];case 1:return(n=r.sent())?(o=void 0!==e.deltas?e.deltas:[],o.length>0?(this._log.debug("Got changes on init. Skipping reset"),i=s.ArrayUtils.flatMap(o.map(function(e){return e.deltas})),a=o[0].doc_len,u=o[0].rev,[4,this._handlePatchMessage(new d.Message.PatchMessage(-1,-1,u,a,i,e.vsn),e.doc_len)]):[3,3]):[3,5];case 2:r.sent(),r.label=3;case 3:return l=new c.Delta(e.doc),this._initHandler?(this._initHandler({initialDelta:c.Change.res(l),remoteDocument:this,meta:t.Meta.parse(e)}),this._initHandler=null,this._failHandler=null,this._clear(e)):0===o.length&&e.vsn!==this._revision?(this._log.debug("Remote has unknown revision, goto reset"),this._handleResetMessage({id:-1,op:"reset",clientId:e.clientId,vsn:e.vsn,doc:l})):this._clear(e),[4,this._fsm.event(f.Events.INITIALIZED)];case 4:return r.sent(),[3,5];case 5:return[2]}})})},t.prototype.isInitialized=function(e){return void 0!==e&&void 0===e.error},t.prototype._handlePatchMessage=function(e,t){return r.__awaiter(this,void 0,void 0,function(){var n,o,s,a,l;return r.__generator(this,function(r){switch(r.label){case 0:return(n=e.cl===this._clientId)?(this._log.trace("get patch from same client"),[4,this._fsm.event(f.Events.ACK)]):[3,2];case 1:return r.sent()?(this._log.trace("got ack for patch"),this._changesQueue.ack()):this._log.debug("got patch message from same client, but we are in unexpected state",{state:f.States[this._fsm.current]}),[3,3];case 2:this._log.trace("get patch from other client"),u.assert(this._revision,e.rev,"incoming patch should be on known revision"),this._handler.changeHandler(this,c.Change.flush()),o=c.DeltaUtils.squash(e.deltas),s=c.Change.delta(new c.Delta(o),e.doc_len),void 0!==t&&u.assert(t,s.length+s.prevLen,"validated doc_len should match"),this._log.isEnabled(i.Logging.LogLevel.TRACE)&&!this._changesQueue.isEmpty&&this._log.trace("received incoming change, while has outgoing changes",JSON.stringify(s)),a=this._changesQueue.transformChangeAgainstQueue(s),s.prevLen!==a.prevLen&&(this._log.debug("incoming delta changed prev_len after transform on queue",{was:s.prevLen,now:a.prevLen}),this._log.trace("incoming delta transformed to",a)),this._handler.changeHandler(this,a),r.label=3;case 3:this._revision=n?e.rev:void 0===e.revAfterApply?e.rev+1:e.revAfterApply,r.label=4;case 4:return r.trys.push([4,6,,7]),[4,this._conn.send(new d.Message.VersionMessage(this._nextId++,e.rev))];case 5:return r.sent(),[3,7];case 6:return l=r.sent(),this._log.debug("fail onsend vsn ack",l),[3,7];case 7:return[2]}})})},t.prototype._handleResetMessage=function(e){return r.__awaiter(this,void 0,void 0,function(){var t;return r.__generator(this,function(n){switch(n.label){case 0:return this._log.warn("Got RESET message."),t=this._fsm.is(f.States.READY),t?[3,2]:[4,this._fsm.event(f.Events.RESET)];case 1:t=n.sent(),n.label=2;case 2:return t?(this._changesQueue.isStaging&&(this._log.debug("We got reset while trying send changed"),this._changesQueue.unstage()),this._changesQueue.drop("got reset"),this._clear(e),this._handler.changeHandler(this,c.Change.res(new c.Delta(e.doc)))):this._log.warn("can not enter reset state, how it can happen?"),[2]}})})},t.prototype._handleMetaChangeMessage=function(e){this._changesQueue.drop("got incoming meta","meta");var n=t.Meta.parse(e);this._handler.metadataChangeHandler(this,n)},t.prototype._failInit=function(e){this._failHandler&&(this._failHandler(e),this._initHandler=null,this._failHandler=null)},t.prototype._checkIdle=function(){var e=this;this._idleRestore=this._idleRestore.flatMap(function(t){return e._log.debug("We are idle... reconnecting before push."),t(),o.None})},t.prototype._clear=function(e){var t=e.vsn,n=e.clientId;this._nextId=1,this._clientId=n,this._revision=t},t.prototype.flush=function(){var e=this;if(this._changesQueue.isEmpty)return this._resolvePendingFlushPromise(),Promise.resolve();if(!this._flushPromise){var t,n=function(){e._flushPromise=void 0,e._forceSend=!1,e._resolvePendingFlushPromise=s.noop,t&&clearTimeout(t)};this._flushPromise=new Promise(function(n,r){e._forceSend=!0,e._resolvePendingFlushPromise=n,t=window.setTimeout(r,4e3)}).then(n,function(e){throw n(),e}),this._timeout&&(clearTimeout(this._timeout),this._timeout=void 0,this._trySendAfterTimeout())}return this._flushPromise},t.prototype._trySendAfterTimeout=function(){var e=this;this._timeout||(this._timeout=setTimeout(function(){e._timeout=void 0,e._fsm.is(f.States.READY)&&(e._changesQueue.isEmpty||e._changesQueue.isStaging?(e._changesQueue.isEmpty&&e._resolvePendingFlushPromise(),e._trySendAfterTimeout()):e._send().catch(function(t){return e._log.warn("unexpected error onsend",t)}))},this._changesQueue.size>1||this._forceSend?this._changesQueue.isStaging?250:0:this._sendDelay))},t.prototype._send=function(){return r.__awaiter(this,void 0,void 0,function(){var e,t,n=this;return r.__generator(this,function(o){switch(o.label){case 0:return[4,this._fsm.event(f.Events.SEND)];case 1:return(e=o.sent())?(t=this._changesQueue.poll(),[4,t.map(function(e){return r.__awaiter(n,void 0,void 0,function(){var t,n,o;return r.__generator(this,function(r){switch(r.label){case 0:t=h.ChangesQueue.isChange(e),n=this._createMessage(e),this._log.isEnabled(i.Logging.LogLevel.TRACE)&&this._log.trace("Message >>>",{message:JSON.stringify(n)}),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,this._conn.send(n)];case 2:return r.sent(),t?[3,4]:[4,this._fsm.event(f.Events.ACK)];case 3:r.sent()?this._changesQueue.ack():this._log.debug("can not do ack for non change msg because we are in unexpected state",{state:f.States[this._fsm.current]}),r.label=4;case 4:return[3,6];case 5:return o=r.sent(),this._log.debug("Got error on ws send",{error:o}),[3,6];case 6:return[2]}})})})]):[3,3];case 2:return o.sent(),[3,5];case 3:return this._log.debug("we are can not send, goto connect"),[4,this._fsm.event(f.Events.CONNECT)];case 4:o.sent(),o.label=5;case 5:return[2]}})})},t.prototype._sendInbandCommand=function(e){this._checkIdle();var t=this._changesQueue.isEmpty;return this._changesQueue.pushCommand(e),t&&this._fsm.is(f.States.READY)&&(this._log.trace("Q.isEmpty, sending command immidiately",e),this._send()),e.id},t.prototype._createMessage=function(e){switch(e.kind){case"change":return this._createPatchMessage(e.change);case"meta":return this._createUpdateMetaMessage(e.meta);case"cmd":return e.cmd;default:return s.assertNever(e)}},t.prototype._createPatchMessage=function(e){return new d.Message.PatchMessage(this._nextId++,this._clientId,this._revision,e.prevLen,[e.delta])},t.prototype._createUpdateMetaMessage=function(e){var t=e.title,n=e.errors,r=e.settings;return new d.Message.UpdateDocumentMetadata(this._nextId++,t,n,void 0!==r?r.toJSON():void 0)},t}(f.Remote);t.DoxRemoteDocument=m,function(e){!function(e){function t(e){var t=e.title,n=e.errors,r=e.extra_params,i=e.proofit;return{title:t,errors:n,settings:p.DoxDocumentSettings.Holder.fromJSON(r),proofit:o.Option.of(i).map(a.Proofit.parseResult)}}e.parse=t}(e.Meta||(e.Meta={}));var t=function(){function e(e,t){this._handler=e,this._logger=t,this.changeHandler=this._handler.changeHandler||s.noop,this.metadataChangeHandler=this._handler.metadataChangeHandler||s.noop,this.disconnectHandler=this._handler.disconnectHandler||g.Reconnect.getDefaultReconnect(this._logger,g.Reconnect.ClientType.dox)}return e}();e.DefaultHandler=t;!function(e){var t=function(){function e(e){this._handler=e,this.acceptedMsgHandler=this._handler.acceptedMsgHandler||function(){},this.droppedMsgsHandler=this._handler.droppedMsgsHandler||function(){}}return e}();e.DefaultHandler=t,e.create=function(e){var n=new t(e),r=n.acceptedMsgHandler,o=n.droppedMsgsHandler;return new h.DoxQueue(r,o)}}(e.Queue||(e.Queue={}))}(m=t.DoxRemoteDocument||(t.DoxRemoteDocument={})),t.DoxRemoteDocument=m},304:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(14),i=n(215);!function(e){function t(e){var t=e.checks,n=e.genre,r=e.context,o=e.extraSettings;return{apps:t.map(c).getOrElse(void 0),genre:n.getOrElse(void 0),context:r.map(i.DocumentContext.serialize).getOrElse(void 0),extraSettings:o.getOrElse(void 0)}}function n(t){return t?o.Try.of(function(){return{checks:o.Option.of(u(t.apps)),genre:o.Option.of(t.genre),context:o.Option.of(i.DocumentContext.parse(t.context)),extraSettings:o.Option.of(t.extraSettings)}}).getOrElse(e.empty):e.empty}function s(e,t){return{checks:e.checks,extraSettings:p.merge(e.extraSettings,t.extraSettings),genre:o.Option.of(t.genre).orElse(e.genre),context:o.Option.of(t.context).orElse(e.context)}}function a(e){return e.context.orElse(e.genre.map(i.genreToDocumentContext)).getOrElse(i.DocumentContext.empty)}function c(e){return e?{ContextualSpelling:{active:e.contextualSpelling},Enhancement:{active:e.enhancement},Grammar:{active:e.grammar},Plagiarism:{active:e.plagiarism},Punctuation:{active:e.punctuation},SentenceStructure:{active:e.sentenceStructure},Style:{active:e.style}}:null}function u(e){return e&&l(e)?{contextualSpelling:e.ContextualSpelling.active,grammar:e.Grammar.active,sentenceStructure:e.SentenceStructure.active,punctuation:e.Punctuation.active,style:e.Style.active,enhancement:e.Enhancement.active,plagiarism:e.Plagiarism.active}:null}function l(e){return!!e&&![e.ContextualSpelling,e.Enhancement,e.Grammar,e.Plagiarism,e.Punctuation,e.SentenceStructure,e.Style].map(function(e){return e&&"object"==typeof e&&"boolean"==typeof e.active}).some(function(e){return!e})}e.update=s,e.contextOrGenre=a,e.empty={checks:o.None,genre:o.None,context:o.None,extraSettings:o.None};var d=function(){function e(e){this._settings=e}return e.fromJSON=function(t){return new e(n(t))},Object.defineProperty(e.prototype,"genre",{get:function(){var e=this;return this._settings.genre.orElseL(function(){return e._settings.context.map(function(e){return i.domainToGenre(e.domain)})})},enumerable:!0,configurable:!0}),e.prototype.changeGenre=function(e){var t={genre:o.Some(e)};return this._settings.context.forEach(function(){t.context=o.Some(i.DocumentContext.fromDomain(i.genreToDomain(e)))}),this._update(t)},Object.defineProperty(e.prototype,"checks",{get:function(){return this._settings.checks},enumerable:!0,configurable:!0}),e.prototype.changeChecks=function(e){var t={checks:o.Some(e)};return this._update(t)},Object.defineProperty(e.prototype,"context",{get:function(){var e=this;return this._settings.context.orElseL(function(){return e._settings.genre.map(i.genreToDocumentContext)})},enumerable:!0,configurable:!0}),e.prototype.changeContext=function(e){var t={context:o.Some(e)};return this._settings.genre.forEach(function(){t.genre=o.Some(i.domainToGenre(e.domain))}),this._update(t)},Object.defineProperty(e.prototype,"extraSettings",{get:function(){return this._settings.extraSettings},enumerable:!0,configurable:!0}),e.prototype.changeExtra=function(e){var t={extraSettings:o.Some(e)};return this._update(t)},e.prototype.toJSON=function(){return t(this._settings)},e.prototype._update=function(t){return new e(r.__assign({},this._settings,t))},e}();e.Holder=d;var p;!function(e){function t(e,t){return e.fold(function(){return o.Option.of(t)},function(e){return o.Option.of(Object.assign({},e,t))})}e.empty={},e.merge=t}(p=e.Extra||(e.Extra={})),e.fromCheckingSettings=c,e.toCheckingSettings=u}(t.DoxDocumentSettings||(t.DoxDocumentSettings={}))},305:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(14),i=n(53),s=n(100),a=n(68),c="1",u=function(){function e(e,t,n,r,o){void 0===r&&(r="web");var u=this;this._doxUrl=e,this._fetch=t,this._fingerprints=n,this._clientType=r,this._token=o,this._headersAppender=a.createHeadersAppender({"X-API-Version":c,"X-Client-Type":function(){return u._clientType},"X-CSRF-Token":this._fingerprints.csrfToken}),this._cookiesAppender=a.createCookiesAppender({grauth:function(){return u._token},"csrf-token":this._fingerprints.csrfToken}),this._ajax=i.Ajax.factory(this._fetch,void 0,i.RequestBuilder.Extender.compose(this._headersAppender,this._cookiesAppender),s.DoxErrors.doxErrorMapper)}return e.prototype._processOptions=function(t){var n=t.words,r=t.turnaroundOptions;return r&&r.length||(r=[]),{words:n,turnaroundOptions:r.map(function(t){return{enabled:t.enabled,label:t.label,minutesToProcess:t.minutesToProcess,perWord:t.perWord,price:t.price,turnaround:e.parsePlanOption(t.turnaround)}})}},e.prototype.getOptions=function(e){var t=i.RequestBuilder.get(this._doxUrl,"documents/"+e+"/proofit/turnaroundOptions");return this._ajax(t).then(this._processOptions)},e.prototype.createJob=function(t){var n=t.docId,r=t.turnaround,o=e.PlanType[r],s=i.RequestBuilder.post(this._doxUrl,"documents/"+n+"/proofit/job").queryParam("turnaround",o);return this._ajax(s).then(e.parseCreateJobResult)},e.targetTag="proofit",e}();t.Proofit=u,function(e){function t(e){switch(e){case"New":return l.newJob;case"Building":return l.building;case"paymentError":return l.paymentError;case"duplicate":return l.duplicate;case"emptyDocument":return l.emptyDocument;case"Completed":return l.completed;case"Cancelled":return l.cancelled;default:return l.unknown}}function n(e){switch(e){case"Instant":return d.Instant;case"ThreeHours":return d.ThreeHours;case"TwentyFourHours":return d.TwentyFourHours;default:throw new Error("Unknown plan option "+e)}}function i(e){if(!e)return null;try{e.match(/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/)&&(e=e.replace(/\s/,"T"));return new Date(e).getTime()}catch(e){return null}}function s(e){return{submitted:i(String(e.submitted)),corrections:e.corrections,due:i(String(e.due)),price:e.price,name:e.name,completed:o.Option.of(i(String(e.completed))),id:e.id,status:t(e.status),is_dox_applied:e.is_dox_applied}}function a(e){var n=e.data;return{jobId:n.jobId,status:t(n.status),token:n.token}}function c(e,t){if(e||t){if(!e&&t||e&&!t)return!1;var n=e,r=t;return n.id===r.id&&n.status===r.status&&n.completed.equals(r.completed)}return!0}function u(e){return r.__assign({},p,e)}var l;!function(e){e.paymentError="paymentError",e.duplicate="duplicate",e.emptyDocument="emptyDocument",e.newJob="newJob",e.building="building",e.completed="completed",e.cancelled="cancelled",e.unknown="unknown"}(l=e.JobStatus||(e.JobStatus={}));var d;!function(e){e[e.Instant=0]="Instant",e[e.ThreeHours=1]="ThreeHours",e[e.TwentyFourHours=2]="TwentyFourHours"}(d=e.PlanType||(e.PlanType={})),e.processOptions=function(e){var t=e.data;return{words:t.words,turnaroundOptions:(t.turnaroundOptions||[]).map(function(e){return{enabled:e.enabled,label:e.label,minutesToProcess:e.minutesToProcess,perWord:e.perWord,price:e.price,turnaround:n(e.turnaround)}})}},e.parseStatus=t,e.parsePlanOption=n,e.parseResult=s,e.parseCreateJobResult=a,e.isProofitEqual=c;var p={corrections:null,price:null,submitted:null,due:null,name:"proofit-document-1474459282219.docx",completed:null,id:15696089,status:l.newJob,is_dox_applied:!0};e.mockResult=u}(u=t.Proofit||(t.Proofit={})),t.Proofit=u},306:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(13),i=n(7),s=n(3),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._subs=null,t}return r.__extends(t,e),t.prototype._setupTitle=function(){return s.RxUtils.toObservable(this.props.title).filter(function(e){return null!==e}).subscribe(function(e){return document.title=e})},t.prototype.componentWillMount=function(){this._subs=this._setupTitle()},t.prototype.componentWillUnmount=function(){this._subs&&this._subs.unsubscribe(),this._subs=null},t.prototype.render=function(){return o.Children.only(this.props.children)},t}(o.Component);t.BasePage=a,function(e){e.PageWrapper=function(e){var t=e.children;return o.createElement(i.F.div,{key:"page-wrapper"},t)}}(a=t.BasePage||(t.BasePage={})),t.BasePage=a},307:function(e,t,n){"use strict";function r(e,t,n,r){switch(t.kind){case"common":return new i.CommonCardModelImpl(e,t,n,r);case"plagiarism":return new i.PlagiarismCardModelImpl(e,t,n);case"enhancement":return new i.EnhancementCardModelImpl(e,t,n,r);case"synonym":return new i.SynonymsCardModelImpl(e,t,n);default:var o=t;throw new a.MatchingNotExhaustiveError(o)}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),i=n(313),s=n(597),a=n(3);t.defaultState={cardHeights:{},cardStates:{}};var c=function(){function e(e,t,n){var r=this;this._state=e,this._editor=t,this._features=n,this._cardsHeights=this._state.lens("cardHeights"),this._cardsState=this._state.lens("cardStates"),this.positions=o.Atom.combine(this._editor.alerts,this._cardsHeights,function(e,t){return s.getCardsPositions(Object.keys(e).reduce(function(n,r){return n[r]={alert:e[r],cardHeight:t[r]||i.DEFAULT_CARD_HEIGHT},n},{}))}),this.focusedCardHeight=this._editor.focusedAlert.switchMap(function(e){return r._cardsHeights.view(function(t){return e.id?t[e.id]:null})}),this.guideId=o.Atom.combine(this._editor.highlightedAlert,this._editor.focusedAlert,function(e,t){if(!e)return null;var n=t.id&&r._cardsState.get()[t.id];return e===t.id&&!n||n&&n.transientVisualState!==i.VisualState.applied?null:e})}return e.prototype.setCardHeight=function(e,t){this._cardsHeights.modify(function(n){return Object.assign({},n,(r={},r[e]=t,r));var r})},e.prototype.getOrCreateCardModel=function(e){var t=this._editor.alerts.get()[e];a.invariant(null!==t,"expect alert #"+e+" to exist");var n="synonym"===t.alert.kind?i.defaultSynonymState:i.defaultState;return this._cardsState.modify(function(t){return t[e]?t:Object.assign({},t,(r={},r[e]=n,r));var r}),r(this._cardsState.lens(o.Lens.key(e).compose(o.Lens.withDefault(n))),t.alert,this._editor,this._features)},e.prototype.removeCardModelState=function(e){this._cardsState.modify(function(t){return a.ObjectUtils.objectWithoutProperties(t,[e])})},e}();t.CardsModelImpl=c},308:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r;!function(e){e[e.words=0]="words",e[e.characters=1]="characters",e[e.speakingTime=2]="speakingTime",e[e.readingTime=3]="readingTime"}(r=t.TextStatsView||(t.TextStatsView={})),t.defaultState={textStatsView:r.words};var o=[r.words,r.characters,r.readingTime,r.speakingTime],i=function(){function e(e){this._state=e,this.textStatsView=this._state.lens("textStatsView")}return e.prototype.toggleTextStatsView=function(){this.textStatsView.set(o[(o.indexOf(this.textStatsView.get())+1)%o.length])},e}();t.TextStatsModelImpl=i},309:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(43),i=n(54);t.PaymentPlan=i.PaymentPlan,t.PaymentMethod=i.PaymentMethod;var s=n(7),a=n(6),c=n(3),u=n(214),l=n(1408),d=n(1409),p=n(36),h=n(593),f=n(75);t.defaultState=c.Async.defaultValue();var g=function(){function e(n,r,a,p,h,g,m,_){var y=this;this.state=n,this._subscriptionApi=r,this._subscribeUrl=a,this._upgradeBaseUrl=p,this._browserType=h,this._telemetry=g,this._appConfig=m,this._userId=_,this._notification=s.Atom.create(null),this._operation=null,this._getSubscription=function(){return y._subscriptionApi.getStatus().then(function(e){return e.plans||(e.plans=[]),e})},this._updateSubscriptionState=function(){return y._getSubscription().then(function(e){return y.state.set(c.Async.ok(e)),e})},this._diagnostics=new i.Diagnostics(""+this._appConfig.api.diagnosticsUrl,f.RxFetch.request(i.Diagnostics.targetTag)),this.notification=this._notification,this.braintreeApi=new l.BraintreeModelImpl(this,this._subscriptionApi,this._updateSubscriptionState),this.paypalApi=new d.PayPalModelImpl(this,this._subscriptionApi,this._updateSubscriptionState),this.browserType=this._browserType,this.ensureHasSubscription=function(){o.invariant(null!==y._operation,"operation must be created"),y._operation=y._operation;var e=y.state.get();c.Async.isOk(e)||c.Async.isInProgress(e)||(c.Async.isError(e)&&y._operation.unsubscribe(),y._operation=null,y.state.set(t.defaultState),y._createOperation())},this.setNotification=function(e,t){requestAnimationFrame(function(){return y._notification.set({type:e,planName:t})})},this._createOperation(),this.state.subscribe(function(t){c.Async.isError(t)&&1===t.attempt?e._log.warn("cant get user subscription",t.error):c.Async.isFatal(t)&&(e._log.error("cant get user subscription",t.error),y.setNotification(u.SubscriptionNotificationType.unknownError))})}return e.prototype.clearNotification=function(){this._notification.set(null)},e.prototype.changePlan=function(t){var n=this;return this.clearNotification(),this._subscriptionApi.changePlan(t).then(this._updateSubscriptionState).then(function(e){n.setNotification(u.SubscriptionNotificationType.subscriptionUpdated,e.queuedPlan&&e.queuedPlan.title||e.currentPlan.title)}).catch(function(t){n.setNotification(u.SubscriptionNotificationType.cantUpgradeSubscription),e._log.error("changePlan: cantUpgradeSubscription",t)})},e.prototype.cancelSubscription=function(){var t=this;return this._telemetry.confirmSubscriptionCancelClicked(),this.clearNotification(),this._subscriptionApi.cancelSubscription().then(this._updateSubscriptionState).then(function(){return t.setNotification(u.SubscriptionNotificationType.subscriptionCancelled)}).catch(function(n){t.setNotification(u.SubscriptionNotificationType.unknownError),e._log.error("cancelSubscription: unknownError",n)})},e.prototype.renewSubscription=function(){var t=this;return this._telemetry.reactivateSubscriptionClicked(),this.clearNotification(),this._subscriptionApi.renewSubscription().then(this._updateSubscriptionState).then(function(){return t.setNotification(u.SubscriptionNotificationType.resumedSubscription)}).catch(function(n){t.setNotification(u.SubscriptionNotificationType.cantResumeSubscription),e._log.error("renewSubscription: cantResumeSubscription",n)})},e.prototype.navigateToSubscribeUrl=function(){document.location.href=this._subscribeUrl},e.prototype.navigateToUpgradeUrl=function(e,t,n){var r=h.getUpgradeUrl(this._upgradeBaseUrl,e,t,n);window.parent===window?c.DesktopEditor.actions.openUpgradeUrl(r,this._appConfig,this._userId)||(document.location.href=r):c.Extension.actions.openUrl(r)},e.prototype.downloadBillingReceipts=function(){return r.__awaiter(this,void 0,void 0,function(){var t,n=this;return r.__generator(this,function(r){switch(r.label){case 0:return this._notification&&this.clearNotification(),p.isFetchBlobDownloadSupported?[4,this._diagnostics.checkOrigin().catch(function(t){return e._log.error("orginDiagnostics: cantCheck",t),{isOkay:!1,url:"unable to verify"}})]:[3,7];case 1:return t=r.sent(),t.isOkay?(this._telemetry.downloadReceiptButtonClicked(),[4,this._subscriptionApi.downloadBillingReceipts().then(i.RawFile.saveToFS).catch(function(t){n.setNotification(u.SubscriptionNotificationType.unknownError),e._log.error("originDiagnostics: unknownError",t),n._telemetry.downloadReceiptError(t)})]):[3,3];case 2:return r.sent(),[3,6];case 3:return[4,this.setNotification(u.SubscriptionNotificationType.unknownOrigin)];case 4:return r.sent(),[4,e._log.error("originDiagnostics: unknownOrigin",{origin:t.url})];case 5:r.sent(),r.label=6;case 6:return[3,8];case 7:this.setNotification(u.SubscriptionNotificationType.blobDownloadUnsupported),r.label=8;case 8:return[2]}})})},e.prototype._createOperation=function(){o.invariant(null===this._operation,"cant create another operation"),this._operation=c.Async.OperationRetrier.create(this._getSubscription,this.state,c.Async.OperationRetrier.RetryStrategy.conditional(function(e){return 401!==e.code},c.Async.OperationRetrier.RetryStrategy.linear(3,3e3)))},e._log=a.Monitoring.Logging.getLogger("model.subscription"),e}();t.SubscriptionModelImpl=g},310:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(13),i=n(7),s=n(868);t.Spinner=function(e){var t=e.className,n=void 0!==t&&t,a=e.size,c=void 0===a?18:a,u=e.color,l=void 0===u?"#666":u,d={width:c+"px",height:c+"px",backgroundColor:l};return o.createElement("div",r.__assign({},i.classes(s.spinner,n)),o.createElement("div",{style:d,className:s.item}),o.createElement("div",{style:d,className:s.item}),o.createElement("div",{style:d,className:s.item}))}},311:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(2),i=n(14),s=n(7),a=n(24);!function(e){!function(e){e.checking="checking",e.checkingIn="checkingIn",e.checkingOut="checkingOut"}(e.Type||(e.Type={}));!function(e){e.loading="loading",e.processing="processing"}(e.TextType||(e.TextType={}));!function(t){function n(e){var t=e.lens.filter(function(e){return"checkingOut"!==e}).nonEmpty()?"on":"off",n=e.navigation.filter(function(e){return"checkingOut"!==e}).nonEmpty()?"on":"off";return"text: "+e.text.getOrElse("off")+"; lens: "+t+"; nav: "+n}t.idle={text:i.None,lens:i.None,navigation:i.None},t.text={text:i.Some(e.TextType.loading),lens:i.None,navigation:i.None},t.processing={text:i.Some(e.TextType.processing),lens:i.Some(e.Type.checking),navigation:i.Some(e.Type.checking)},t.lensAndNavigationProcessing=o.__assign({},t.processing,{text:i.None}),t.loading={text:i.Some(e.TextType.loading),lens:i.Some(e.Type.checking),navigation:i.Some(e.Type.checking)},t.toString=n}(e.State||(e.State={}));!function(e){function t(e,t,n){return void 0===n&&(n="hidden"),e.lens(s.Lens.create(function(e){return"hidden"!==e&&"forceHidden"!==e},function(e){return e?t:n}))}e.toVisible=t}(e.SetGoalsVisibilitySource||(e.SetGoalsVisibilitySource={}))}(r=t.DocumentLoader||(t.DocumentLoader={}));var c=function(){function e(){this.state=s.Atom.create(r.State.idle),this.setGoalsVisibilityState=s.Atom.create("hidden")}return e}();t.DocumentLoaderContextImpl=c,t.documentLoaderContext={documentLoader:a.object}},312:function(e,t,n){"use strict";function r(e){return e.view(function(e){return{enabled:!e.enabled}})}Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(7),s=n(579),a=n(298),c=n(14),u=n(558),l=n(125),d=n(122),p=n(3),h=new Date(15259968e5),f=new Date(15263316e5);!function(e){function t(e){return e===n.migration||e===n.welcome}!function(e){e.AA="AA",e.BB="BB",e.CC="CC",e.UNKNOWN_TS="UNKNOWN_TS",e.UNKNOWN_DN="UNKNOWN_DN"}(e.WootricGroup||(e.WootricGroup={}));!function(e){e.simple="simple",e.tripleLoader="tripleLoader",e.goalsLoader="goalsLoader"}(e.OpenOnPasteOrUploadMode||(e.OpenOnPasteOrUploadMode={}));!function(e){e.small="small",e.large="large"}(e.CounterType||(e.CounterType={}));var n;!function(e){e.migration="migration",e.welcome="welcome"}(n=e.TourType||(e.TourType={})),e.isTourType=t}(o=t.DenaliFeatures||(t.DenaliFeatures={}));var g;!function(e){e[e.CRITICAL_ADVANCED=0]="CRITICAL_ADVANCED",e[e.FREE_PREMIUM=1]="FREE_PREMIUM"}(g=t.AlertGroupNames||(t.AlertGroupNames={}));var m=function(){function e(e,t,n,r,o,s,a,c){var u=this;this._userProfile=e,this._settings=t,this._router=n,this._experiments=r,this._appConfig=o,this._browser=s,this._isFreeUser=a,this._isEduUser=c,this._denaliPreLaunchGroup="denali_partial_test1",this._denali50="denali_50_denali",this._denali50Control="denali_50_denali_control",this._denali2={AAGroups:["denali_2_editor_control_1","denali_2_editor_control_2"],BBHalfSidebarGroups:["denali_2_denali_sidebar_1","denali_2_denali_sidebar_2"],CCTheGreenButtonGroups:["denali_2_denali_green_btn_1","denali_2_denali_green_btn_2"]},this._denali3={AGroups:p.ArrayUtils.mapNTimes(2,function(e){return"denali_3_a_control_"+(e+1)}),BGroupsTheGreenBtn:p.ArrayUtils.mapNTimes(8,function(e){return"denali_3_b_the_green_button_"+(e+1)}),CGroupsPrettyBtn:p.ArrayUtils.mapNTimes(8,function(e){return"denali_3_c_pretty_button_"+(e+1)}),DGroupsImprovedSidebar:p.ArrayUtils.mapNTimes(8,function(e){return"denali_3_d_improved_sidebar_"+(e+1)})},this._denali4={AGroupsAdvanced:["denali_4_advanced_1","denali_4_advanced_2"],BGroupsPremium:["denali_4_premium_1","denali_4_premium_2"]},this._forceEditorTs=this._router.query.get("denali").exists(function(e){return"false"===e}),this.appInitedFromDenaliPage=this._router.isActive(d.Router.routes.denali_editor.href({docId:"*"})).get(),this.wootricTest=this._router.query.get("wootric").exists(function(e){return"test"===e}),this.showSwitchToDenaliBtn={enabled:"prod"!==this._appConfig.env||this._userProfile.get().email.includes("@grammarly.com")},this.isDenaliDocument=function(e){return u.enabled?u._settings.getDocumentMode(e).view(function(e){return e===l.DocumentMode.Denali}):i.Atom.create(!1)}}return e.prototype._isExperiment=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.some(function(t){return e._experiments.get().has(t)})},e.prototype._isQueryExperiment=function(e){return this._router.query.get("exp").contains(e)},Object.defineProperty(e.prototype,"_isDenali4A_NormalWording",{get:function(){return this._isExperiment.apply(this,this._denali4.AGroupsAdvanced)||this._isQueryExperiment("4a")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_isDenali4B_AlternativeWording",{get:function(){return this._isExperiment.apply(this,this._denali4.BGroupsPremium)||this._isQueryExperiment("4b")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_isExperiment4",{get:function(){return this._isDenali4A_NormalWording||this._isDenali4B_AlternativeWording},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wootric",{get:function(){return c.None},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fromDenaliExperiments",{get:function(){return this._isExperiment(this._denaliPreLaunchGroup,this._denali50,this._denali50Control)||this._isExperiment.apply(this,this._denali2.BBHalfSidebarGroups.concat(this._denali2.CCTheGreenButtonGroups))||this._isExperiment.apply(this,this._denali3.BGroupsTheGreenBtn.concat(this._denali3.CGroupsPrettyBtn,this._denali3.DGroupsImprovedSidebar))||this._isExperiment4},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"migratedFromClassic",{get:function(){return this._userProfile.get().email.indexOf("@grammarly.com")>-1||!this.fromDenaliExperiments&&(!this._settings.forcedDenaliUI.get()&&(!this._userProfile.get().email.startsWith("editor_ts")&&(this._userProfile.get().email.indexOf("@bh.exacttarget.com")>-1||!!this._userProfile.get().registrationDate.fold(function(){return!1},function(e){return e<f}))))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){if(this._forceEditorTs)return!1;if("msie"===this._browser)return!1;if(this._settings.forcedDenaliUI.get())return!0;if(this._isEduUser)return!1;var e=this._userProfile.get().email;return e.indexOf("@bh.exacttarget.com")>-1?!e.startsWith("editor_ts"):e.indexOf("@grammarly.com")>-1||(this.fromDenaliExperiments,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"halfSidebar",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalToolbar",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"emptyTitle",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showNothingFoundNotification",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alertGroupNames",{get:function(){return this._isFreeUser?g.FREE_PREMIUM:g.CRITICAL_ADVANCED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openOnPasteAndUploadMode",{get:function(){return c.Some(o.OpenOnPasteOrUploadMode.goalsLoader)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"counterType",{get:function(){return c.Some(o.CounterType.small)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"denaliGroup",{get:function(){return this.enabled?Array.from(this._experiments.get()).find(function(e){return e.startsWith("denali_")&&!e.startsWith("denali_1")})||"forced_denali":null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tour",{get:function(){return this._router.query.get("tour").filter(o.isTourType).orElse(this._settings.seenDenaliWelcome.get()||(this.fromDenaliExperiments||this._settings.forcedDenaliUI.get())&&!this._userProfile.get().registrationDate.exists(function(e){return e>h})?c.None:c.Some(this._settings.seenWelcome.get()?o.TourType.migration:o.TourType.welcome))},enumerable:!0,configurable:!0}),e}();t.DenaliFeaturesImpl=m;var _=function(){function e(e,t,n,o,c,l,d,h){var f=this;this._experiments=e,this._subscription=t,this._userProfile=n,this._settings=o,this._institution=c,this._browser=l,this._router=d,this._appConfig=h,this._isPhoenixEduUser=this._institution.view(function(e){return{enabled:f._router.query.get("edu").fold(function(){return null!==e&&/Phoenix University/i.test(e.name)},function(e){return"phoenix"===e})}}),this._eduUserFeature=this._institution.view(function(e){return{enabled:f._router.query.has("edu")||null!==e}}),this._nonEduUserFeature=r(this._eduUserFeature),this._usertestingGroups=["usertesting_2_002_usertesting","usertesting_3_003_usertesting","usertesting_4_004_usertesting"],this.isUserTesting=this._isUserTesting(this._usertestingGroups),this.isUserTesting1=this._isUserTesting(["usertesting_2_002_usertesting"]),this.isUserTesting2=this._isUserTesting(["usertesting_3_003_usertesting"]),this.isUserTesting3=this._isUserTesting(["usertesting_4_004_usertesting"]),this.showOnboarding=this._router.query.get("onboarding").exists(function(e){return"show"===e}),this.hideOnboarding=this._userProfile.get().email.indexOf("@bh.exacttarget.com")>-1||this._router.query.get("onboarding").exists(function(e){return"hide"===e}),this.isFree=this._userProfile.view(function(e){return e.type===u.UserType.free&&!e.isFreebie}).get()||this._router.query.has("isFree"),this.isPremium=this._userProfile.view(function(e){return e.type===u.UserType.premium}).get()&&!this._router.query.has("isFree"),this.isDesktopEditor=p.BrowserInfo.isDesktopEditor(this._browser),this.eduUserFeature=this._eduUserFeature,this.denali=new m(this._userProfile,this._settings,this._router,this._experiments,this._appConfig,this._browser,this.isFree,this._eduUserFeature.get().enabled),this.proofit=i.Atom.combine(this._subscription.view(function(e){return p.Async.isOk(e)&&!!e.value.paymentMethod}),this._institution,this._settings.disableProofit,function(e,t,n){return{enabled:!1===f.demoMode&&null!==t?t.proofit:e&&!n}}),this.proofitToolbarItem=i.Atom.combine(this.proofit,this._institution,this._userProfile,this._settings.disableProofit,function(e,t,n,r){return{enabled:e.enabled||!n.isFreebie&&null===t&&!r}}),this.proofitTest=this._router.query.get("proofit"),this.plagiarism=this._institution.view(function(e){return{enabled:!(!1!==f.demoMode||e&&e.plagiarismDisabled)}}),this.banners=this.isDesktopEditor?i.Atom.create({enabled:!1}):this._nonEduUserFeature,this.navTutotial=this._eduUserFeature,this.tour=this._nonEduUserFeature,this.deleteAccount=r(this._isPhoenixEduUser),this.usernameUnderLogout=this._nonEduUserFeature,this.showChangeEmail=this._nonEduUserFeature,this.eduAdminPanelLink=this._institution.view(function(e){return{enabled:e&&e.admin}}),this.subscription=i.Atom.combine(this._userProfile,this._institution,function(e,t){return{enabled:null===t&&f.isPremium&&!e.isFreebie}}),this.goPremium={enabled:this.isFree},this.premiumBadge={enabled:this.isPremium},this.premiumCounter={enabled:!this.isFree},this.upgradeButton={enabled:this.isFree},this.appsSection=i.Atom.create({enabled:!this.isDesktopEditor}),this.desktopApps=r(this._isPhoenixEduUser),this.score=this._institution.view(function(e){return{enabled:!e||!e.scoreDisabled}}),this.copyPasteMenuItems={enabled:!this.isDesktopEditor},this.quickReplacementsInCard=this._institution.view(function(e){return{enabled:!e||e.quickReplacement}}),this.hideTitleInEDUCard=this._institution.view(function(e){return{enabled:!e||!e.quickReplacement}}),this.showFullCards=this._institution.view(function(e){return{enabled:e&&e.fullCards}}),this.profileLink=r(this._isPhoenixEduUser),this.defaultAcademicGenre=i.Atom.create({enabled:!1}),this.enableTrackingOnDownload=this._isPhoenixEduUser.view(function(e){return!e}),this.phoenixReportBtn=this._isPhoenixEduUser,this.phoenixSupportLink=this._isPhoenixEduUser,this.phoenixTutorial=this._isPhoenixEduUser,this.phoenixTerms=i.Atom.combine(this._isPhoenixEduUser,this._settings.acceptedTermsVersion,function(e,t){var n=s.TermsOfService.termsVersion,r=a.valid(t)&&a.valid(n)&&a.gt(n,t)||!a.valid(t)||f._router.query.has("terms");return e.enabled&&r}),this.phoenixTour=this._isPhoenixEduUser,this.showTour=i.Atom.combine(this.phoenixTour,this._settings.seenWelcome,function(e,t){return!t&&!e.enabled&&!f.denali.enabled})}return e.prototype._isUserTesting=function(e){var t=this;return this._experiments.view(function(t){return e.some(function(e){return t.has(e)})}).view(function(e){return t._router.query.has("hasUserTesting")||e&&!t._router.query.has("skipUserTesting")}).get()},Object.defineProperty(e.prototype,"isReadabilityPrototypeDemoUser",{get:function(){return"readability_proto@bh.exacttarget.com"===this._userProfile.get().email},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInternalUser",{get:function(){var e=this._userProfile.get().email;return e.indexOf("@grammarly.com")>-1||e.indexOf("@bh.exacttarget.com")>-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showDiscoverabilityOnExit",{get:function(){return this._router.query.get("onexit").exists(function(e){return"show"===e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preventAnimation",{get:function(){return this._router.query.get("preventAnimation").exists(function(e){return"true"===e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasSwitchToDenaliUI",{get:function(){return this.denali.enabled&&this.denali.migratedFromClassic},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"demoMode",{get:function(){return this.isUserTesting||this.isReadabilityPrototypeDemoUser},enumerable:!0,configurable:!0}),e}();t.FeaturesModel=_,function(e){var t=function(){function e(e,t,n,r,o,i){this.halfSidebar=e,this.emptyTitle=t,this.horizontalToolbar=n,this.openOnPasteAndUploadMode=r,this.counterType=o,this.showNothingFoundNotification=i,this.migratedFromClassic=!1,this.tour=c.None,this.enabled=!0,this.wootric=c.None,this.wootricTest=!1,this.denaliGroup=null,this.alertGroupNames=g.CRITICAL_ADVANCED,this.appInitedFromDenaliPage=!1}return e.prototype.isDenaliDocument=function(){return i.Atom.create(!0)},e}();e.DenaliFeaturesMock=t;var n=function(){function e(e,t){this.isFree=e,this.denali=t}return e}();e.DenaliPageFeaturesMock=n}(_=t.FeaturesModel||(t.FeaturesModel={})),t.FeaturesModel=_},313:function(e,t,n){"use strict";function r(e){var t=e.category,n=e.extraProperties,r=e.todo;return"Unknown"===t?"Unknown word":"Misspelled"===t?"":n.isDidYouMean||n.isShowTitle?"Check word usage":r}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(7),s=n(6),a=n(101),c=n(583);t.CommonHeaderModel=c.CommonHeaderModel;var u=n(314),l=n(3);t.DEFAULT_CARD_HEIGHT=36;var d;!function(e){e[e.expanded=0]="expanded",e[e.expandedMore=1]="expandedMore",e[e.collapsed=2]="collapsed",e[e.applied=3]="applied",e[e.hidden=4]="hidden"}(d=t.VisualState||(t.VisualState={})),t.defaultState={hovered:!1,expandButtonHovered:!1,undoButtonHovered:!1,transientVisualState:d.collapsed},t.defaultSynonymState={hovered:!1,expandButtonHovered:!1,undoButtonHovered:!1,transientVisualState:d.expanded};var p=function(){function e(e,t){this._state=e,this._focused=t,this._transientVisualState=this._state.lens("transientVisualState"),this.visualState=i.Atom.combine(this._transientVisualState,this._focused,function(e,t){return t?e===d.collapsed?d.expanded:e:e===d.expanded||e===d.expandedMore?d.collapsed:e}),this.isExpanded=this._transientVisualState.view(function(e){return e===d.expanded}),this.isExpandedMore=this._transientVisualState.view(function(e){return e===d.expandedMore}),this.isApplied=this._transientVisualState.view(function(e){return e===d.applied}),this.isHidden=this._transientVisualState.view(function(e){return e===d.hidden}),this.isActive=this._transientVisualState.view(function(e){return e===d.expanded||e===d.expandedMore}),this.isExpandButtonHovered=this._state.lens("expandButtonHovered"),this.isUndoButtonHovered=this._state.lens("undoButtonHovered"),this.isCardHovered=this._state.lens("hovered")}return e.prototype._transitionState=function(e,t){var n,r,o=this;if(this._transientVisualState.modify(function(t){var i=o.visualState.get(),s=e.find(function(e){return void 0!==e.from.find(function(e){return i===e})});if(s)return n=i,r=s.to,s.to;throw new TypeError("Can't transition Card from "+d[i])}),void 0===n||void 0===r)throw new l.InvariantError("Expected modify to complete by this point");t&&t(n,r)},e}();t.CardModelStateImpl=p;var h=function(e){function t(t,n,r){var o=e.call(this,t,r.isFocused(n.id))||this;return o._editorEngine=r,o.replace=function(e){o._applyThisAlert({action:"replace",replacementText:e,isSynonym:!1})},o.id=n.id,o.title=n.title,o}return o.__extends(t,e),t.prototype.toggleExpand=function(){var e=this.visualState.get()===d.collapsed;e?this._editorEngine.setFocusedAlert(this.id,"click"):(this._editorEngine.setHighlightedAlert(null),this._editorEngine.setFocusedAlert(null,null)),this._transitionState([{from:[d.expanded,d.expandedMore],to:d.collapsed},{from:[d.collapsed],to:d.expanded}]),e&&t._cardExpandCounter.increment()},t.prototype.hoverExpandButton=function(){this.isExpandButtonHovered.set(!0)},t.prototype.unhoverExpandButton=function(){this.isExpandButtonHovered.set(!1)},t.prototype.hoverUndoButton=function(){this.isUndoButtonHovered.set(!0)},t.prototype.unhoverUndoButton=function(){this.isUndoButtonHovered.set(!1)},t.prototype.hoverCard=function(){this._editorEngine.setHighlightedAlert(this.id),this.isCardHovered.set(!0)},t.prototype.unhoverCard=function(){this._editorEngine.setHighlightedAlert(null),this.isCardHovered.set(!1)},t.prototype.toggleMore=function(){this._transitionState([{from:[d.expanded],to:d.expandedMore},{from:[d.expandedMore],to:d.expanded}])},t.prototype.expand=function(){this._transitionState([{from:[d.collapsed],to:d.expanded}])},t.prototype.collapse=function(){this._transitionState([{from:[d.expanded,d.expandedMore],to:d.collapsed}])},t.prototype.showMore=function(){this._transitionState([{from:[d.expanded],to:d.expandedMore}])},t.prototype.showLess=function(){this._transitionState([{from:[d.expandedMore],to:d.expanded}])},t.prototype.hide=function(){this._transitionState([{from:[d.applied],to:d.hidden}])},t.prototype._applyThisAlert=function(e){this._editorEngine.applyAlert(this.id,e),this._transitionState([{from:[d.expanded,d.expandedMore,d.collapsed],to:d.applied}]),t._cardApplyCounter.getCounter(e.action).increment()},t.prototype.ignore=function(){this._applyThisAlert({action:"ignore"})},t.prototype.acknowledge=function(){this._applyThisAlert({action:"acknowledge"})},t.prototype.addToDictionary=function(){this._applyThisAlert({action:"addToDictionary"})},t.prototype.undoInteraction=function(){this._editorEngine.undoLastAlertAction(),this.unhoverUndoButton(),this._transitionState([{from:[d.applied],to:d.collapsed}])},t._cardExpandCounter=s.Monitoring.TimeSeries.root.getCounter("cards.expand"),t._cardApplyCounter=s.Monitoring.TimeSeries.root.getCounter("cards.apply"),t}(p);t.CardModelBaseImpl=h;var f=function(e){function t(t,n,r,o){var i=e.call(this,t,n,r)||this;return i._alert=n,i._features=o,i.kind="common",i.highlightText=i._alert.highlightText,i.isTextCard=u.isNoReplacement(i._alert.replacements),i.isUnknowWord="Unknown"===i._alert.category,i.details=i._alert.details,i.examples=i._alert.examples,i.explanation=i._alert.explanation,i.extraProperties=i._alert.extraProperties,i.hasReplacementsInContent=!u.isNoReplacement(i._alert.replacements)&&!!i.extraProperties.isShowTitle,i.hasAcknowledgeButton=0===i._alert.replacements.length&&i._alert.group!==a.AlertGroup.contextualSpelling,i.hasAddToDictionary=!!i._alert.extraProperties.hasAddToDictionary,i.showFullCard=i._features.showFullCards.get().enabled,i.isShowMore=Boolean(!i.showFullCard&&(i.details||i.examples&&i.examples.length)),i.hideTitleInEDUCard=i._features.hideTitleInEDUCard.get().enabled,i}return o.__extends(t,e),t.prototype.getHeader=function(e,t){return new c.CommonHeaderModelImpl(this.title,this._alert.todo,this._alert.replacements,e,t,this._alert.extraProperties,this._features.quickReplacementsInCard.get().enabled,this.replace)},t.prototype.getFooterProps=function(){return{hasAcknowledgeButton:this.hasAcknowledgeButton,hasAddToDictionary:this.hasAddToDictionary,isShowMore:this.isShowMore}},t.prototype.getReplacements=function(){var e=this._alert,t=e.category,n=e.extraProperties,o=e.todo;return u.getReplacementListModel({title:r({category:t,extraProperties:n,todo:o}),replacements:this._alert.replacements,onReplace:this.replace})},t}(h);t.CommonCardModelImpl=f;var g=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o._alert=n,o.kind="plagiarism",o.url=o._alert.url,o.description=o._alert.description,o.reference=o._alert.reference,o}return o.__extends(t,e),t.prototype.getHeader=function(e,t){return new c.PlagiarismHeaderModelImpl(this.title,e,t,this._alert.url)},t}(h);t.PlagiarismCardModelImpl=g;var m=function(e){function t(t,n,r,o){var i=e.call(this,t,n,r)||this;return i._alert=n,i._features=o,i.kind="enhancement",i.details=i._alert.details,i.examples=i._alert.examples,i.explanation=i._alert.explanation,i.hasReplacements=!u.isNoReplacement(i._alert.replacements),i.hasAcknowledgeButton=!i.hasReplacements,i.hasAddToDictionary=!1,i.showFullCard=i._features.showFullCards.get().enabled,i.isShowMore=Boolean(!i.showFullCard&&(i.details||i.examples&&i.examples.length)),i.isVisibleQuickReplacement=i._features.quickReplacementsInCard.get().enabled,i}return o.__extends(t,e),t.prototype.getReplacements=function(){var e=this._alert,t=e.category,n=e.extraProperties,o=e.todo;return u.getReplacementListModel({title:r({category:t,extraProperties:n,todo:o}),replacements:this._alert.replacements,onReplace:this.replace})},t.prototype.getHeader=function(e,t){return new c.EnhancementHeaderModelImpl(this.title,e,t,this.isVisibleQuickReplacement)},t.prototype.getFooterProps=function(){return{hasAcknowledgeButton:this.hasAcknowledgeButton,hasAddToDictionary:this.hasAddToDictionary,isShowMore:this.isShowMore}},t}(h);t.EnhancementCardModelImpl=m;var _=function(e){function t(t,n,r){var o=e.call(this,t,r.isFocused(n.id))||this;return o._alert=n,o._editorEngine=r,o.kind="synonyms",o.visualState=o._transientVisualState,o.replace=function(e){o._applyThisAlert({action:"replace",replacementText:e,isSynonym:!0})},o.id=o._alert.id,o.title=o._alert.title,o.explanation="",o.details="",o.examples=[],o.meanings=o._alert.meanings.map(function(e){return{title:e.title,list:u.getReplacementFlatListModel({title:e.title,replacements:e.replacements,onReplace:function(e){return o.replace(e)}})}}),o.isAnyMeanings=Boolean(o.meanings.length),o}return o.__extends(t,e),t.prototype._applyThisAlert=function(e){this._editorEngine.applyAlert(this.id,e),this._transitionState([{from:[d.expanded,d.expandedMore,d.collapsed],to:d.applied}])},t.prototype.hide=function(){this._transitionState([{from:[d.applied],to:d.hidden}])},t.prototype.collapse=function(){this._transientVisualState.get()!==d.hidden&&this._transitionState([{from:[d.expanded],to:d.hidden}])},t.prototype.undoInteraction=function(){this._editorEngine.undoLastAlertAction(),this._transitionState([{from:[d.applied],to:d.expanded}])},t.prototype.select=function(){this._editorEngine.setHighlightedAlert(this.id)},t.prototype.deselect=function(){this._editorEngine.setHighlightedAlert(null)},t}(p);t.SynonymsCardModelImpl=_},314:function(e,t,n){"use strict";function r(e){return e.map(function(e){return e.transform}).every(function(e){return e.every(function(e){return"delete"!==e.type})})&&2===e.length}function o(e){return 1===e.length}function i(e){return e.reduce(function(e,t){return e+("arrow"!==t.type?t.text.length:0)},0)>35}function s(e){var t=e.filter(function(e){return"delete"===e.type});if(0===t.length)return!1;var n=t[0],r=n.text.replace(/,/g,"").split(" ").filter(Boolean)||[];return n.text.match(/^,(.*?),$/)&&n.text.length>2&&r.length>1}function a(e){return!e||0===e.length}function c(e){var t=e.isDidYouMean,n=e.isActive,c=e.replacements,u=e.todo,l=e.onReplace;if(a(c))return new h;var y="Click to "+u;return t?new m(y,c[0],l):r(c)?new d(y,c[0],c[1],l):i(c[0].transform)?new _(y,c,l):s(c[0].transform)?new g(y,c[0],l):o(c)?new f(y,c[0],l):new p(y,n,c,l)}Object.defineProperty(t,"__esModule",{value:!0});var u,l=n(2);!function(e){e[e.or=0]="or",e[e.single=1]="single",e[e.list=2]="list",e[e.flatList=3]="flatList",e[e.multi=4]="multi",e[e.multiExpanded=5]="multiExpanded",e[e.long=6]="long",e[e.didYouMean=7]="didYouMean",e[e.sideCommas=8]="sideCommas",e[e.empty=9]="empty"}(u=t.CardReplacementTemplate||(t.CardReplacementTemplate={})),t.isOrReplacement=r,t.isSingleReplacement=o,t.isLongReplacement=i,t.isSideCommasReplacement=s,t.isNoReplacement=a;var d=function(){function e(e,t,n,r){var o=this;this.tooltipText=e,this._replacement1=t,this._replacement2=n,this._onReplace=r,this.template=u.or,this.transform1=this._replacement1.transform,this.transform2=this._replacement2.transform,this.onReplace1=function(){return o._onReplace(o._replacement1.newText)},this.onReplace2=function(){return o._onReplace(o._replacement2.newText)}}return e}();t.CardReplacementOr=d;var p=function(){function e(e,t,n,r){var o=this;this.tooltipText=e,this.isExpanded=t,this.replacements=n,this._onReplace=r,this.getOnReplace=function(e){return function(){return o._onReplace(e.newText)}},this.template=this.isExpanded?u.multiExpanded:u.multi}return e.prototype.getTitleReplacement=function(){return new f(this.tooltipText,this.replacements[0],this._onReplace)},e}();t.CardReplacementMulti=p;var h=function(){function e(){this.template=u.empty,this.tooltipText=""}return e}();t.EmptyReplacement=h;var f=function(){function e(e,t,n){var r=this;this.tooltipText=e,this._replacement=t,this._onReplace=n,this.transform=this._replacement.transform,this.onReplace=function(){return r._onReplace(r._replacement.newText)},this.template=u.single}return e}();t.CardReplacementSingle=f;var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.template=u.sideCommas,t}return l.__extends(t,e),t}(f);t.CardReplacementSideCommas=g;var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.template=u.didYouMean,t}return l.__extends(t,e),t}(f);t.CardReplacementDidYouMean=m;var _=function(){function e(e,t,n){var r=this;this.tooltipText=e,this.replacements=t,this._onReplace=n,this.getOnReplace=function(e){return function(){return r._onReplace(e.newText)}},this.template=u.long}return e}();t.CardReplacementLong=_;var y=function(){function e(e,t,n){var r=this;this.headerText=e,this.replacements=t,this._onReplace=n,this.template=u.list,this.tooltipText="",this.getOnReplace=function(e){return function(){return r._onReplace(e.newText)}}}return e}();t.CardReplacementList=y;var v=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o.headerText=t,o.template=u.flatList,o}return l.__extends(t,e),t}(y);t.CardReplacementFlatList=v,t.getReplacementModel=c,t.getReplacementListModel=function(e){var t=e.title,n=e.replacements,r=void 0===n?[]:n,o=e.onReplace;return new y(t,r,o)},t.getReplacementFlatListModel=function(e){var t=e.title,n=e.replacements,r=void 0===n?[]:n,o=e.onReplace;return new v(t,r,o)}},315:function(e,t,n){"use strict";function r(e){return"view"in e?e.view(function(e){return!e}):e.map(function(e){return!e})}function o(e){return e instanceof l.Observable?e:l.Observable.of(e)}function i(e,t){return e instanceof l.Observable?e.map(t):t(e)}function s(e){return l.Observable.fromPromise(e().then(function(e){return u.Some(u.Right(e))}).catch(function(e){return u.Some(u.Left(e))})).startWith(u.None)}function a(e){return function(t,n){return n.catch(e.handler(t+" exception").error).retry(3).subscribe()}}function c(e,t,n){return void 0===n&&(n=!0),l.Observable.merge(e.mapTo(n),e.debounceTime(t).mapTo(!n)).distinctUntilChanged()}Object.defineProperty(t,"__esModule",{value:!0});var u=n(14),l=n(23),d=n(83);t.voidValue=void 0,t.toVoid=function(){return t.voidValue},t.invert=r,t.toOptionValueOnly=function(e){return e.fold(function(){return l.Observable.empty()},function(e){return l.Observable.of(e)})},t.toAtom=function(e){return function(t){return e.set(t)}},t.orEmpty=function(e){return d.choose(e,l.Observable.empty())},t.orEmptyRight=function(e){return d.choose(l.Observable.empty(),e)},t.delay=function(e,t){return l.Observable.of(e).delay(t)},t.toObservable=o,t.mapMaybeObservable=i,t.promiseToStream=s,t.createRetrySubscriber=a,t.toBooleanWithDebounce=c;!function(e){function t(t){return"requestIdleCallback"in window?function(e){var n=window;return l.Observable.create(function(r){var o=n.requestIdleCallback(function(){return r.next(e)},{timeout:t});return function(){return n.cancelIdleCallback(o)}})}:e.rafScheduler}function n(e){return l.Observable.create(function(t){var n=requestAnimationFrame(function(){return t.next(e)});return function(){return cancelAnimationFrame(n)}})}function r(t){return t.switchMap(e.rafScheduler)}function o(t,n){return t.switchMap(e.ricScheduler(n))}e.ricScheduler=t,e.rafScheduler=n,e.inRaf=r,e.inRic=o}(t.Scheduler||(t.Scheduler={}))},316:function(e,t,n){"use strict";function r(e){switch(e){case"red":return o.red;case"green":return o.green;case"yellow":return o.yellow;default:return o.grey}}Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(3);!function(e){e[e.red=0]="red",e[e.green=1]="green",e[e.yellow=2]="yellow",e[e.grey=3]="grey"}(o=t.AlertExampleColor||(t.AlertExampleColor={}));!function(e){e[e.italic=0]="italic",e[e.plain=1]="plain"}(t.AlertExampleTextType||(t.AlertExampleTextType={})),t.getColor=r;t.parseExamples=function(e){return e?e.replace(/^<p>/,"").split("<p>").map(function(e){var t=e.match(/<span.*?<\/span><br\/>/g);return t&&t.length?t.map(function(e){var t=r(i.StringUtils.getFirstWord(i.StringUtils.getFirstMatch(e,/^<span.*?class="(.+?)".*?>/)||"")),n=i.StringUtils.getFirstMatch(e,/^<span.*?>(.+?): /)||"Comment",o=i.StringUtils.getFirstMatch(e,/^<span.*?>(?:.+?: )?(.+?)<\/span><br\/>/);return o?{color:t,type:n,text:o}:null}).filter(function(e){return!!e}):[]}).filter(function(e){return e.length}):[]}},317:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardBaseClassName="cardBaseClassName";!function(e){function t(e,t){return{kind:"single",alertId:e,action:t}}function n(e){return{kind:"batchIgnore",alertIds:e}}function r(e){return"single"===e.kind}function o(e){return"batchIgnore"===e.kind}e.createSingle=t,e.createBatchIgnore=n,e.isSingle=r,e.isBatchIgnore=o}(t.AppliedAlertAction||(t.AppliedAlertAction={}));!function(e){e[e.idle=0]="idle",e[e.inProgress=1]="inProgress",e[e.finished=2]="finished"}(t.CheckingStatus||(t.CheckingStatus={}))},318:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.capacity=e,this.size=0,this._keymap={}}return e.prototype.put=function(e,t){var n={key:e,value:t};if(this._keymap[e]=n,this._tail?(this._tail.newer=n,n.older=this._tail):this._head=n,this._tail=n,this.size===this.capacity)return this.shift().value;++this.size},e.prototype.get=function(e){var t=this._getImpl(e);return t&&t.value},e.prototype.peek=function(e){var t=this._keymap[e];return t&&t.value},e.prototype.set=function(e,t){var n=this._getImpl(e),r=t(n&&n.value);return r?n?n.value=r:this.put(e,r):n&&this.remove(e),r},e.prototype.getRef=function(e){return this._getImpl(e)},e.prototype.remove=function(e){var t=this._keymap[e];if(t)return delete this._keymap[e],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this._head=t.newer):t.older?(t.older.newer=void 0,this._tail=t.older):this._head=this._tail=void 0,--this.size,t.value},e.prototype.forEach=function(e){for(var t in this._keymap)e(t,this._keymap[t].value)},e.prototype.shift=function(){var e=this._head;return this._head&&(this._head.newer?(this._head=this._head.newer,this._head.older=void 0):this._head=void 0,e.newer=e.older=void 0,delete this._keymap[e.key]),e},e.prototype._getImpl=function(e){var t=this._keymap[e];if(t)return t===this._tail?t:(t.newer&&(t===this._head&&(this._head=t.newer),t.newer.older=t.older),t.older&&(t.older.newer=t.newer),t.newer=void 0,t.older=this._tail,this._tail&&(this._tail.newer=t),this._tail=t,t)},e}();t.LRUCache=r},319:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(212),o=n(6),i=function(){function e(e,t){var n=this;this._gnarClient=e,this._appConfig=t,this._cookieStorage=new r.CookieStorage(this._appConfig.domains.cookie),this.csrfToken=function(){return n._cookieStorage.safeGetValue("csrf-token").then(function(e){return e||o.Monitoring.Logging.root.getLogger("base.fingerprints").warn("Missing CSRF token"),e})},this.containerId=this._gnarClient.getContainerId()}return e}();t.DenaliFingerprintsImpl=i},320:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(2),i=n(14),s=n(43),a=n(213),c=n(3);r||(r={});var u;!function(e){function t(e){return"change"===e.kind}function n(e){return"cmd"===e.kind}function r(e){return"cmdIncRevision"===e.kind}e.isChange=t,e.isCmd=n,e.isCmdIncRevision=r}(u=t.ChangesQueue||(t.ChangesQueue={}));var l=function(e){function t(t){var n=e.call(this,"The message was dropped from the queue")||this;return n.reason=t,n}return o.__extends(t,e),t.prototype.toString=function(){return"The message was dropped from the queue due to: "+this.reason},t.isDroppedFromQueueError=function(e){return e instanceof t},t}(c.CustomError);t.DroppedFromQueueError=l;var d=function(){function e(e,t,n){var r=this;this._shouldIncreaseRevision=e,this._acceptHandler=t,this._dropHandler=n,this._changes=[],this._staged=[],this._stagedAmount=0,this._acceptMessage=function(e){r._updateCheckedTextSize(e),r._acceptHandler(e)},this._dropMessages=function(e,t){e.forEach(r._updateCheckedTextSize),r._dropHandler(e,t)},this._updateCheckedTextSize=function(e){u.isChange(e)?r._changeStagedAmount(-e.change.amount):r._shouldIncreaseRevision(e.cmd)&&r._changeStagedAmount(-a.BIG_TEXT_SIZE)},this.clear("init")}return e.prototype.pushChanges=function(e){var t=this;return(this.isEmpty?i.None:this._tail().filter(u.isChange)).fold(function(){var n=++t._queuedId,r=++t._revision;return t._changeStagedAmount(e.amount),t._changes.push({kind:"change",change:e,id:n,rev:r}),n},function(n){var r=n.change.compose(e);if(t._replaceChange(t._changes.length-1,r),n.change.isEmpty){var o=t._changes.pop();setTimeout(function(){return t._acceptMessage(o)},0)}return n.id})},e.prototype.pushCommand=function(e){var t=++this._queuedId;return this._shouldIncreaseRevision(e)?(this._changeStagedAmount(a.BIG_TEXT_SIZE),this._changes.push({kind:"cmdIncRevision",cmd:e,id:t,rev:++this._revision})):this._changes.push({kind:"cmd",cmd:e,id:t,rev:this._revision}),t},Object.defineProperty(e.prototype,"isStaging",{get:function(){return this._staged.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this._changes.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localRevision",{get:function(){return this._revision},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stagedAmount",{get:function(){return this._stagedAmount},enumerable:!0,configurable:!0}),e.prototype.pollAll=function(){var e=this._changes;this._changes=[];var t=c.ArrayUtils.partition(e,u.isCmd),n=t[0],r=t[1];return n.forEach(this._acceptMessage),(o=this._staged).push.apply(o,r),e;var o},e.prototype.ack=function(e){this._ackedRevisions.add(e),this._cleanStaged()},e.prototype.transformAlertAgainstQueue=function(e){for(var t=this._staged.filter(function(t){return t.rev>e.rev}).concat(this._changes).filter(u.isChange).map(function(e){return e.change.delta}),n=0,r=t;n<r.length;n++){var o=r[n],s={begin:o.transformPosition(e.begin,!0),end:o.transformPosition(e.end,!0),highlightBegin:o.transformPosition(e.highlightBegin,!0),highlightEnd:o.transformPosition(e.highlightEnd,!0)};if(s.end-s.begin!=e.end-e.begin||s.highlightEnd-s.highlightBegin!=e.highlightEnd-e.highlightBegin)return i.None;e=c.ObjectUtils.update(e,s)}return i.Some(e)},e.prototype.clear=function(e){var t=this._changes.concat(this._staged);this._changes=[],this._staged=[],this._ackedRevisions=new Set,this._queuedId=-1,this._revision=-1,t.length>0&&this._dropMessages(t,e)},e.prototype._tail=function(){return i.Option.of(this._changes[this._changes.length-1])},e.prototype._replaceChange=function(e,t){var n=this._changes[e];s.invariant(u.isChange(n),"queued change should exist"),this._changeStagedAmount(-n.change.amount+t.amount),n.change=t},e.prototype._cleanStaged=function(){for(;void 0!==this._staged[0]&&this._ackedRevisions.has(this._staged[0].rev);){var e=this._staged.shift();this._ackedRevisions.delete(e.rev),this._acceptMessage(e)}},e.prototype._changeStagedAmount=function(e){this._stagedAmount+=e},e}();t.CapiQueue=d},321:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(14),i=n(43),s=n(3);r||(r={});var a;!function(e){function t(e){return"change"===e.kind}function n(e){return"cmd"===e.kind}function r(e){return"meta"===e.kind}e.isChange=t,e.isCmd=n,e.isMeta=r}(a=t.ChangesQueue||(t.ChangesQueue={}));var c=function(){function e(e,t,n){void 0===n&&(n=[]),this._acceptHandler=e,this._dropHandler=t,this._changes=n,this._staging=!1,this._queuedId=0}return e.prototype.pushChanges=function(e){var t=this;return(this.isEmpty||this._staging&&1===this._changes.length?o.None:this._tail().filter(a.isChange)).fold(function(){var n=t._queuedId++;return t._changes.push({kind:"change",change:e,id:n}),n},function(n){var r=n.change.compose(e);if(t._replaceChange(t._changes.length-1,r),n.change.isEmpty){var o=t._changes.pop();setTimeout(function(){return t._acceptHandler(o)},0)}return n.id})},e.prototype.pushMeta=function(e){var t=this;return(this.isEmpty||this._staging&&1===this._changes.length?o.None:this._tail().filter(a.isMeta)).fold(function(){var n=t._queuedId++;return t._changes.push({kind:"meta",meta:e,id:n}),n},function(t){return Object.assign(t.meta,e),t.id})},e.prototype.pushCommand=function(e){var t=this._queuedId++;return this._changes.push({kind:"cmd",cmd:e,id:t}),t},Object.defineProperty(e.prototype,"isStaging",{get:function(){return this._staging},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this._changes.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._changes.length},enumerable:!0,configurable:!0}),e.prototype.poll=function(){var e=this;i.invariant(!this._staging,"Should not be in staging mode");var t=o.Option.of(this._changes[0]);return t.forEach(function(){e._staging=!0}),t},e.prototype.pop=function(){i.invariant(!this._staging,"Should not be in staging mode");var e=o.Option.of(this._changes.shift());return e.forEach(this._acceptHandler),e},e.prototype.unstage=function(){i.invariant(this._staging,"Should be in staging mode"),i.invariant(void 0!==this._changes[0],"Staging change should exist"),this._staging=!1},e.prototype.ack=function(){this.unstage(),this.pop()},e.prototype.transformChangeAgainstQueue=function(e){var t=this;return this._changes.reduce(function(e,n,r){if(a.isChange(n)){var o=n.change,i=o.transform(e,!1);return t._replaceChange(r,i),e.transform(o)}return e},e)},e.prototype.drop=function(e,t){if(!this.isEmpty){var n=void 0===t?[this._changes,[]]:s.ArrayUtils.partition(this._changes,function(e){return e.kind===t}),r=n[0],o=n[1];this._changes=o,r.length>0&&this._dropHandler({messages:r,reason:e})}},e.prototype.toJSON=function(){return{changes:this._changes}},e.prototype._tail=function(){return o.Option.of(this._changes[this._changes.length-1])},e.prototype._replaceChange=function(e,t){var n=this._changes[e];i.invariant(a.isChange(n),"queued change should exist"),n.change=t},e}();t.DoxQueue=c},36:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(218),o=n(300),i=n(218);t.Browser=i.Browser,t.PlatformInfo=i.PlatformInfo,t.BrowserType=i.BrowserType,t.OS=i.OS,t.browserInfo=function(e){if(e){var t=e.match(/^Grammarly\s+Desktop\s+Editor\s(.*\s)?(\d+\.\d+\.\d+).*-(osx|windows)$/);if(t){var n=parseFloat(t[2]);return{browser:"desktop-editor",version:t[2],parsedVersion:isNaN(n)?0:n,os:"osx"===t[3]?"mac":"windows",type:"desktop",supported:function(){return!1}}}}}(navigator.userAgent)||r(),t.getBrowserInfo=function(){return t.browserInfo},t.isDesktopEditor=function(e){return"desktop-editor"===e},t.isDownloadAttrSupported="chrome"===t.getBrowserInfo().browser,t.isFetchBlobDownloadSupported=!("safari"===t.getBrowserInfo().browser&&Number(t.getBrowserInfo().version)<10),t.hotkeyLabel=function(e,t){return("mac"===t||"ios"===t?"⌘+":"Ctrl+")+e},t.isMac=function(e){return"mac"===e||"ios"===e},t.isIEorEdge=function(){var e=t.getBrowserInfo().browser;return"msie"===e||"edge"===e},t.getClientType=function(){var e=t.getBrowserInfo().browser;if(t.isDesktopEditor(e))return o.ClientType.desktop;switch(t.getBrowserInfo().browser){case"chrome":return o.ClientType.webChrome;case"firefox":return o.ClientType.webFirefox;case"safari":return o.ClientType.webSafari;case"msie":return o.ClientType.webIE;case"edge":return o.ClientType.webEdge;default:return o.ClientType.unknown}}},385:function(e,t){e.exports={spinner:"_51ca9a4d-editor-core-spinner",desktopEditorPreventSelection:"_a3ef96c1-editor-core-desktopEditorPreventSelection"}},43:function(e,t,n){"use strict";function r(e,t){if(!e)throw new Error("Invariant condition failed: "+(t?"string"==typeof t?t:t():"(unnamed)"))}function o(e,t,n){if(e!==t)throw new g(e,t,n)}function i(e){var t=new Date(e);return isNaN(t.getTime())?null:t}function s(e){return l.__awaiter(this,void 0,void 0,function(){return l.__generator(this,function(t){return[2,new Promise(function(t){return setTimeout(t,e)})]})})}function a(e,t,n){return void 0===t&&(t=10),void 0===n&&(n=1e3),l.__awaiter(this,void 0,void 0,function(){var r;return l.__generator(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,4]),[4,e()];case 1:return[2,o.sent()];case 2:if(r=o.sent(),t<=1||!(r instanceof m))throw r;return d.Monitoring.Logging.root.isEnabled(d.Logging.LogLevel.TRACE)&&d.Monitoring.Logging.root.getLogger("coreclients.utils").trace("retryWithDelay: count "+t+", timeout: "+n,r),[4,s(n)];case 3:return o.sent(),[2,a(e,t-1,1.3*n)];case 4:return[2]}})})}function c(e){var t=0;return function(){return t++<e}}function u(e,t){return new Promise(function(n,r){e().catch(function(n){if(t(n))return e();throw n}).then(n).catch(r)})}Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),d=n(6),p=n(14),h=n(953);t.invariant=r;var f=function(){function e(e){var t=new Error(e);this.message=t.message,this.stack=t.stack}return e}();t.CustomError=f;var g=function(e){function t(t,n,r){var o=e.call(this,"AssertionError: "+r)||this;return o.expected=t,o.actual=n,o.name="AssertionError",o}return l.__extends(t,e),t.prototype.toString=function(){return this.message+"\nExpected: "+this.expected+"\nActual: "+this.actual},t}(f);t.AssertionError=g,t.assert=o;var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="RetryError",t}return l.__extends(t,e),t}(f);t.RetryError=m,t.stringToDate=i,t.delay=s,t.retryWithDelay=a,t.retryCountPredicate=c,t.promiseRetrier=u;var _=function(){function e(e,t,n,r){void 0===t&&(t=5e3),void 0===n&&(n=""),void 0===r&&(r=new Error("Timeout")),this._doRequest=e,this._timeout=t,this._timeoutError=r,this._requests=new Map,this._log=d.Monitoring.Logging.getLogger("ValueRequester"+(n.length>0?"."+n:""))}return e.prototype.request=function(e){return this._startRequest(e).promise},e.prototype.onValue=function(e,t){this._stopRequest(e,p.Right(t))},e.prototype.onError=function(e,t){this._stopRequest(e,p.Left(t))},e.prototype._startRequest=function(e){var t=this,n=this._doRequest(e),r={};return r.promise=new Promise(function(e,t){r.resolve=e,r.reject=t}),r.timer=setTimeout(function(){return t._stopRequest(n,p.Left(t._timeoutError))},this._timeout),this._requests.set(n,r),r},e.prototype._stopRequest=function(e,t){var n=this._requests.get(e);void 0===n?this._log.error("Got unrequested result or request has already expired."):(clearTimeout(n.timer),t.fold(n.reject,n.resolve),this._requests.delete(e))},e}();t.ValueRequester=_,t.fetchWithOrigin=function(e,t,n){void 0===n&&(n="https://app.grammarly.com");var r=l.__assign({},t.headers||{},{Origin:n});return h(e,l.__assign({},t,{headers:r}))}},53:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(658),i=n(43),s="application/json",a="application/x-www-form-urlencoded";t.HTTPMethods=["get","post","put","options","head","trace","delete","connect"];var c=function(){function e(){}return e.factory=function(t,n,o,i){return void 0===n&&(n="include"),void 0===o&&(o=d.Extender.identity),void 0===i&&(i=e.mapToHTTPError),function(s,a,c){return void 0===a&&(a=e.parseJSON),void 0===c&&(c=i),o(s).then(function(e){return e.build()}).then(function(e){return{url:e.url,body:e.body,method:e.method,headers:e.headers,mode:"cors",credentials:n}}).then(function(e){var n=e.url,o=r.__rest(e,["url"]);return t(n,o)}).then(e._checkStatus(c)).then(a)}},e._checkStatus=function(e){return function(t){return t.ok?Promise.resolve(t):t.text().then(function(n){throw e(n,t)})}},e.mapToHTTPError=function(e,t){return new u({code:t.status,status:t.statusText,url:t.url,body:e})},e.assertMimeType=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n=t.headers.get("Content-Type")||t.headers.get("content-type");if(!n)throw new Error("get empty Content-Type, but expected: "+e);if(e.every(function(e){return-1===n.indexOf(e)}))throw new i.AssertionError(e.join(),n,"Unexpected Content-Type")}},e.parseJSON=function(t){return r.__awaiter(this,void 0,void 0,function(){return r.__generator(this,function(n){return e.assertMimeType("application/json")(t),[2,t.json()]})})},e.parseBlobResponse=function(t){return r.__awaiter(this,void 0,void 0,function(){var n;return r.__generator(this,function(r){switch(r.label){case 0:return e.assertMimeType("text/plain","application/octet-stream","application/vnd","application/pdf")(t),n={title:o.parse(t.headers.get("Content-Disposition")||"downloadedDocument").parameters.filename},[4,t.blob()];case 1:return[2,(n.data=r.sent(),n)]}})})},e.parseText=function(e){return e.text()},e.toVoid=function(){},e}();t.Ajax=c;var u=function(e){function t(t){var n=t.code,r=t.status,o=t.url,i=t.message,s=t.body,a=e.call(this,i||r||s||"HTTPError")||this;return a.name="HTTPError",a.url=o,a.code=n,a.body=s,a.status=r,a}return r.__extends(t,e),t.prototype.toString=function(){return"Message: "+this.message+"\nStatus: "+this.status+"\nCode: "+this.code+"\nUrl: "+this.url},t}(i.CustomError);t.HTTPError=u;var l=function(){function e(e,t,n,r,o){this._url=e,this._method=t,this._headers=n,this._mime=r,this._body=o}return e.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d.get.apply(d,e).build()},e.post=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d.post.apply(d,e).build()},e.put=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d.put.apply(d,e).build()},e.del=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d.del.apply(d,e).build()},e.head=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d.head.apply(d,e).build()},Object.defineProperty(e.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"method",{get:function(){return this._method},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headers",{get:function(){return this._headers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mime",{get:function(){return this._mime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return this._body},enumerable:!0,configurable:!0}),e}();t.Request=l;var d=function(){function e(e,t,n,r,o,i,s,a){void 0===e&&(e=""),void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===o&&(o={}),this._url=e,this._queryParams=t,this._formParams=n,this._cookies=r,this._headers=o,this._method=i,this._mime=s,this._body=a}return e.join=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=[].slice.call(t.filter(function(e){return e.length>0}),0).join("/");return e._normalize(r)},e._normalize=function(e){return e=e.replace(/:\//g,"://"),e=e.replace(/([^:\s])\/+/g,"$1/"),e=e.replace(/\/(\?|#)/g,"$1")},e.get=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.url.apply(e,t).method("get")},e.post=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.url.apply(e,t).method("post")},e.put=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.url.apply(e,t).method("put")},e.del=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.url.apply(e,t).method("delete")},e.head=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.url.apply(e,t).method("head")},e.url=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new e(e.join.apply(e,t))},e.prototype.url=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(""!==this._url)throw new Error("URL already set to "+this._url+", use join(string) to add additional parts to it");return this.join(e.join.apply(e,t))},e.create=function(){return new e},e.prototype.method=function(e){if(-1===t.HTTPMethods.indexOf(e.toLowerCase()))throw new Error("unknown method was passed as an argument: "+e);if(this._method&&this._method!==e)throw new Error("Method already set to "+this._method+", but was overwritten by "+e);return this._method=e,this},e.prototype.join=function(t){return this._url=e.join(this._url,t),this},e.prototype.pathParam=function(t){return this._url=e.join(this._url,encodeURIComponent(t)),this},e.prototype.body=function(e){if(this._body)throw new Error("Body already set to "+this._body+", but was overwritten by "+e);return this._body=e,this},e.prototype.isBodyPresent=function(){return this._body},e.prototype.formParam=function(e,t){return this._formParams.push(this._encodeParam(e,t)),this},e.prototype.header=function(e,t){return this._headers[e]=t,this},e.prototype.queryParam=function(e,t){return this._queryParams.push(this._encodeParam(e,t)),this},e.prototype.cookie=function(e,t){return this._cookies.push(e+"="+t),this},e.prototype.mime=function(e){if(this._mime&&this._mime!==e)throw new Error("MIME already set to "+this._mime+", but was overwritten by "+e);return this._mime=e,this},e.prototype.json=function(e){return e?this.body(e).mime(s):this.mime(s)},e.prototype.build=function(){if(!this._url||0===this._url.length)throw new Error("URL cannot be empty");if(this._url=this._url.replace(/\/$/,""),this._queryParams.length>0&&(this._url+="?"+this._queryParams.join("&")),this._body&&this._formParams.length>0)throw new Error("User formParam() OR body() methods to specify request content, not both");if(this._formParams.length>0){if(this._mime&&this._mime!==a)throw new Error("Only application/x-www-form-urlencoded can be used for form requests, don't specify it mandatory in mime() method");this._mime=a,this._body=this._formParams.join("&")}if(this._mime===s&&this._body&&(this._body=JSON.stringify(this._body)),!this._method)throw new Error("HTTP method was not set");if(this._method=this._method.toLocaleLowerCase(),("get"===this._method||"delete"===this._method)&&this._body)throw new Error("Body is not supported for GET, DELETE requests");if(this._mime&&(this._headers["Content-Type"]=this._mime),this._cookies.length>0){this._headers.Cookie=this._cookies.join("; ")}return new l(this._url,this._method,this._headers,this._mime||null,this._body)},e.prototype._encodeParam=function(e,t){return encodeURIComponent(e)+"="+encodeURIComponent(t)},e}();t.RequestBuilder=d,function(e){!function(e){e.identity=function(e){return Promise.resolve(e)},e.compose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n){return t.reduce(function(e,t){return e.then(t)},e.identity(n))}}}(e.Extender||(e.Extender={}))}(d=t.RequestBuilder||(t.RequestBuilder={})),t.RequestBuilder=d},54:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(575);t.CAPI=o;var i=n(302);t.Dapi=i.Dapi,t.Properties=i.Properties;var s=n(300);t.Auth=s.Auth,t.User=s.User,t.UserType=s.UserType,t.LoginType=s.LoginType;var a=n(1385);t.SubscriptionClient=a.SubscriptionClient,t.SubscriptionStatus=a.SubscriptionStatus,t.PaymentPlan=a.PaymentPlan,t.PaymentMethod=a.PaymentMethod,t.CreditCard=a.CreditCard;var c=n(1384);t.Irbis=c.Irbis;var u=n(53);t.Ajax=u.Ajax,t.MimeType=u.MimeType,t.Request=u.Request,t.RequestBuilder=u.RequestBuilder,t.HTTPError=u.HTTPError;var l=n(204);t.WSError=l.WSError;var d=n(1376);t.Diagnostics=d.Diagnostics,t.OriginStatus=d.OriginStatus;var p=n(43);t.CustomError=p.CustomError;var h=n(305);t.Proofit=h.Proofit;var f=n(1382);t.RawFile=f.RawFile,r.__exportStar(n(301),t);var g=n(215);t.DocumentContext=g.DocumentContext,t.genreToDomain=g.genreToDomain,t.domainToGenre=g.domainToGenre;var m=n(1377);t.Dictionary=m.Dictionary;var _=n(1383);t.Institution=_.Institution},549:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),o=n(36),i=n(3);t.textResources={base:{tooltipDownloadProofreadVersion:"Download proofread version",tooltipDownloadOriginalVersion:"Download original version",tooltipDownload:"Download",uploadText:"Upload",tooltipUploadElementInput:"Click here to upload document",menuDownloadText:"Download",documentPlaceholderText:"Upload a document to save original formatting.",modalUploadingDocumentText:"Uploading document",notificationUploadFileText:"Upload a file in one of the following formats",copyToClipboardIsNotAvailable:"Click and copy with "+o.hotkeyLabel("C",o.getBrowserInfo().os),error500page:{title:"Sorry, we’re down for maintenance",description:"Grammarly is temporarily unavailable while we make upgrades\n      to improve the service for you. Please try again in a minute."}},denali:{notEnoughTextToGetScore:r.createElement("p",null,"Write away! Grammarly needs at least 30",r.createElement("br",null),"words to score your text."),noIssuesFound:"No issues found",rankTooltip:function(e){return r.createElement("p",null,"Your text scores higher than ",e,"% ",r.createElement("br",null),"of all texts checked by Grammarly ",r.createElement("br",null),"where comparable goals were set")},rank:"Rank",hideAssistant:"Hide Assistant",tour:{welcomeNewUserTitle:"Ready to write something brilliant?",welcomeNewUserContent:"The Grammarly Editor helps you turn your\nideas into clear, compelling writing.",welcomeOldUserTitle:"Welcome to the new Grammarly Editor",welcomeOldUserContent:"All the features you love, plus a few new ones, wrapped up in a fresh new look.",startTour:"Start a quick tour",skipTour:"Skip the tour",fastApplyHeader:"Editing made easy",fastApplyDescription:"Get detailed feedback on your\nwriting and apply suggestions\nwith just one click.",assistantHeader:"Become a better writer",assistantDescription:"See your feedback organized into categories that help you identify where your writing is strong and where you can make it stronger.",checkTypesHeader:"Go beyond grammar",checkTypesDescription:"Make your writing clear, compelling, and concise with suggestions customized to your writing goals.",goalsHeader:"Set your goals",goalsDescription:"Adjust Grammarly’s feedback based on your objectives, your target audience, your writing style, and more.",finalTitle:"Enjoy\nthe Grammarly Editor",finalContent:"You’re ready to start writing! You can also copy and paste or upload some existing text to the Grammarly Editor.",startWriting:"Start writing",notReady:function(e){return r.createElement("span",null,"Not ready? You can return to Grammarly Classic anytime via the ",e," icon")}},documentStats:{notEnoughTextToCalculateStats:"Write away! Grammarly needs at least 30 words to calculate document statistics.",uniqueWords:"Measures vocabulary diversity by calculating\nthe number of unique words.",rareWords:"Measures depth of vocabulary by identifying words that are\nnot among the 5,000 most common English words.",readability:"In the Flesch reading-ease test, higher scores\nindicate material that is easier to read.",uniqueWordsTitle:"Unique words",rareWordsTitle:"Rare words",wordLengthTitle:"Word length",sentenceLengthTitle:"Sentence length",notEnoughTextToGenerateReport:"We need at least 30 words to calculate document statistics and generate your report.",intentTooltip:"Setting your intent helps train our\nartificial intelligence to provide\nmore targeted feedback.",emotionTooltip:"Setting your intended emotion helps\ntrain our artificial intelligence\nto provide more targeted feedback.",report:{plagiarismDescription:function(e,t){return e+"% of your text matches "+t+" sources on the web\nor in archives of academic publications"},downloadPdfReport:"Download PDF report",preparingPdfReport:"Preparing PDF report...",readingEase:"reading ease",readingEaseDescription:"Rates the text by the number of years of\neducation needed to understand it",readingEaseMeasure:"grade level",uniqueWordsDescription:"Measures vocabulary diversity by calculating\nthe percentage of words used only once in your\ndocument",wordLengthDescription:"Measures average word length",wordLengthMeasure:"characters per word",sentenceLengthDescription:"Measures average sentence length",sentenceLengthMeasure:"words per sentence"}},sidebar:{openLabel:"start assistant",fixErrorsLabel:"Correct with Assistant",checkingLabel:"checking …",criticalIssue:"Critical issue",criticalIssues:"Critical issues",critical:"Critical",advanced:"Advanced",advancedIssue:"Advanced issue",advancedIssues:"Advanced\nissues",premium:"Premium",free:"Alerts",premiumAlerts:"Premium\nalerts"},successLens:{emptyText:{title:"Nothing to check yet",firstLine:"Start writing or upload a document\nto see Grammarly’s feedback."},smallText:{title:"No issues found",firstLine:"Grammarly ran hundreds of checks\non your text and found no writing issues.",secondLine:"Check back in when you’re ready to write some more."},largeText:{title:"No issues found",firstLine:"Grammarly ran hundreds of checks\non your text and found no writing issues."},fixedText:{titles:["You made that look easy!","That’s quite an improvement!","Nothing can stop you now!","You must have been practicing!","Looking good!","Give yourself a pat on the back!","Great job!","Everything’s clear and polished.","To err is human; to edit, divine."]}},uploadMenuItem:"Upload document",uploadDropZone:"Drag a text file here to upload",uploadDropZoneTypes:"Microsoft Word (.doc, .docx), OpenOffice (.odt), TXT and RTF are welcome",downloadMenuItem:"Download",uploadNotificationTitle:"The document was uploaded successfully",goals:{header:r.createElement("span",null,"The more Grammarly knows about the context",r.createElement("br",null)," of your writing, the more customized and",r.createElement("br",null)," ","helpful suggestions it will propose."),upgradeHookTitle:r.createElement("span",null,"Get the most accurate and relevant corrections",r.createElement("br",null),"for your specific writing situation")},plagiarism:{lensDescription:function(e,t,n,o){return r.createElement("span",null,r.createElement("em",null,e,"%")," of your text matches"," ",r.createElement("em",null,t," ",i.StringUtils.pluralize(t,"fragment","fragments"))," ","from"," ",r.createElement("em",null,n," ",i.StringUtils.pluralize(n,"source","sources"))," ","on the web or in academic databases. Cite them in ",r.createElement(o,{type:"MLA"}),","," ",r.createElement(o,{type:"APA"}),", or ",r.createElement(o,{type:"Chicago"})," format, or in another style you prefer.")},title:"Plagiarism",description:"Finds unoriginal text by checking against academic databases and over 16 billion web pages.",originalText:r.createElement("span",null,"Looks like your text is 100% original. ",r.createElement("br",null),"We found no matching text in our databases or on the Internet.")},documentPerformanceRankText:function(e){return r.createElement("span",null,"Great job! Your text is expected to ",r.createElement("br",null),"perform ",r.createElement("b",null,"better than ",e,"%")," of comparable ",r.createElement("br",null),"texts written by other Grammarly users.")},proofitTitle:"Human Proofreading",proofitDescription:"Our professional proofreaders are ready to check your document right now.",card:{less:"Less",more:"More",dismiss:"Dismiss",addToDict:"Add to dictionary",like:"I'll address this",dislike:"Not helpful",wrong:"Incorrect suggestion",offensive:"Offensive content"},placeholder:{typeOrPasteText:"Type or paste ("+o.hotkeyLabel("V",o.getBrowserInfo().os)+") your text here.",upload:"Upload a document to save original formatting."},toolbar:{loading:"Loading...",processing:"Processing your document..."}}}},550:function(e,t,n){"use strict";function r(e,t){return o(o({},e),t)}function o(e,t){for(var n in t){var r=e[n]||{},i=t[n];null!=i&&null!=r&&i.constructor===Object&&r.constructor===Object?e[n]=o(r,i):e[n]=i}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.sec=1e3,t.min=60*t.sec,t.hr=60*t.min,t.merge=r},551:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(77),o=function(){},i=function(){function e(e){this._logger=e,this.onSessionStarted=o,this.onStartMessageAcknowledged=o,this.beforeAlert=o,this.onAlert=o,this.onRemove=o,this.onSynonyms=o,this.onPlagiarism=o,this.onAsyncCheckFinish=o,this.onError=o,this.onBeforeFinish=o,this.onFinish=o,this.onStats=o,this.onPong=o,this.onDebugInfo=o,this.onDisconnect=r.Reconnect.getDefaultReconnect(this._logger,r.Reconnect.ClientType.capi),this.onQueueMsgAccepted=o,this.onQueueMsgDropped=o}return e}();t.DefaultCAPIEventHandler=i},552:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(2),i=n(6),s=n(14),a=n(3),c=n(203),u=n(157),l=n(215),d=n(83),p=n(204),h=n(43),f=n(213),g=n(553),m=n(554),_=n(551),y=n(320),v=n(77);!function(e){e[e.DISCONNECTED=0]="DISCONNECTED",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED",e[e.STARTED=3]="STARTED",e[e.ANY=4]="ANY",e[e.CLOSED=5]="CLOSED"}(r||(r={}));var b;!function(e){e[e.CONNECT=0]="CONNECT",e[e.CONNECTED=1]="CONNECTED",e[e.DISCONNECT=2]="DISCONNECT",e[e.START=3]="START",e[e.CLOSE=4]="CLOSE"}(b||(b={}));var w=5,E=function(){function e(e){var t=e.url,n=e.handler,a=e.context,f=void 0===a?l.DocumentContext.empty:a,m=e.dialect,v=void 0===m?"undefined":m,E=e.client,k=void 0===E?"web":E,T=e.clientVersion,x=void 0===T?"":T,I=e.extDomain,A=void 0===I?"":I,D=e.sendDelay,O=void 0===D?1e3:D,N=e.docid,M=void 0===N?"":N,P=e.token,R=void 0===P?"":P,j=this;this._log=i.Monitoring.Logging.getLogger("coreclients.capi",i.Logging.LogLevel.DEBUG),this._nextId=0,this._textSize=0,this._idleRestore=s.None,this._runtimeErrorCounter=new C,this._asyncChecksManager=new S,this._sendCmd=function(e){return s.Option.of(e).map(function(e){return j._sendInbandCommand(e)}).getOrElse(-1)},this._statsRequester=new h.ValueRequester(this._sendCmd,15e3,"DocStats"),this._synonymsRequester=new h.ValueRequester(this._sendCmd,15e3,"Synonyms"),this._getTextRequester=new h.ValueRequester(this._sendCmd,15e3,"Text"),this._startSession=function(){j._sendMessage(j._createStartMessage()),j._handler.onSessionStarted({kind:"session_started"})},this._send=function(){if(j._resetTimer(),j._log.trace("send("+r[j._fsm.current]+")"),j._fsm.is(r.STARTED)&&!j._changesQueue.isEmpty)try{j._changesQueue.pollAll().map(j._processQueueMessage).forEach(j._sendMessage)}catch(e){j._log.warn("unexpected error on sending",e)}else j._trySend(j._fsm.current)},this._processQueueMessage=function(e){return y.ChangesQueue.isChange(e)?new g.Message.SubmitOt(e.id,e.rev,e.change.prevLen,[e.change.delta]):j._shouldHaveSeparateRevision(e.cmd)?o.__assign({},e.cmd,{rev:e.rev,id:e.id}):o.__assign({},e.cmd,{id:e.id})},this._sendMessage=function(e){j._log.isEnabled(i.Logging.LogLevel.TRACE)&&j._log.trace("Sending >>> "+JSON.stringify(e).replace("\n"," ").substring(0,300)),j._conn.send(e).catch(function(e){return j._log.debug("fail on send",e)})},this._resetTimer=function(){void 0!==j._timeout&&(clearTimeout(j._timeout),j._timeout=void 0)},this._onQueueMsgAccepted=function(e){j._handler.onQueueMsgAccepted({kind:"queue_msg_accepted",message:e})},this._onQueueMsgDropped=function(e,t){"runtime_error"===t&&e.some(y.ChangesQueue.isChange)&&(j._runtimeErrorCounter.count>w?(j._log.debug("too frequent runtime errors, goto idle"),j._conn._ws.close(1e3)):(j._log.debug("runtime error on delta send, restart session",{tries:j._runtimeErrorCounter.count}),j._startSession())),e.filter(y.ChangesQueue.isCmd).forEach(function(e){switch(e.cmd.action){case"get_text_stats":j._statsRequester.onError(e.id,new y.DroppedFromQueueError(t));break;case"synonyms":j._synonymsRequester.onError(e.id,new y.DroppedFromQueueError(t));break;case"get_debug_info":j._getTextRequester.onError(e.id,new y.DroppedFromQueueError(t))}}),j._handler.onQueueMsgDropped({kind:"queue_msgs_dropped",messages:e,reason:t})},this._handler=Object.assign(new _.DefaultCAPIEventHandler(this._log),n||{}),this._url=t,this._context=f,this._dialect=v,this._client=k,this._clientVersion=x,this._extDomain=A,this._sendDelay=O,this._docid=M,this._token=R,this._changesQueue=new y.CapiQueue(this._shouldHaveSeparateRevision,this._onQueueMsgAccepted,this._onQueueMsgDropped),this._fsm=new c.StateMachine(r.DISCONNECTED,r.CLOSED).with(r.ANY).parentOf(r.CONNECTED,r.CONNECTING,r.DISCONNECTED,r.STARTED).from(r.ANY).to(r.CLOSED).on(b.CLOSE).from(r.DISCONNECTED).to(r.CONNECTING).on(b.CONNECT).from(r.CONNECTING).to(r.CONNECTED).on(b.CONNECTED).from(r.CONNECTED,r.STARTED,r.CONNECTING).to(r.DISCONNECTED).on(b.DISCONNECT).from(r.CONNECTED).to(r.STARTED).on(b.START).on(r.CONNECTED,this._startSession).on(r.STARTED,function(e){return j._trySend(e.to)}).on(r.DISCONNECTED,function(e){return j._clear(e.args)}).on(r.CLOSED,function(){return j._close()}),this._log.isEnabled(i.Logging.LogLevel.TRACE)&&this._fsm.verbose(r,b),this._ws=p.WS.create().onMessage(function(e,t){return j._handleMessage(t)}).onDisconnect(function(e){return j._handleDisconnect(e)}).resetReconnectCounterWhen(function(e){return j._isInitialized(e)}).onError(p.errPrintln),this._tryConnect(),d.registerDebugHelper("closeCapiSocket",function(e,t){void 0===e&&(e=1e3),j._conn._ws.close(e,t)}),d.registerDebugHelper("capiState",this),d.registerDebugHelper("capiRuntimeError",function(){var e=u.Change.ins(0,"test",100500);j.pushChanges(e)})}return e.prototype.setText=function(e){this._log.debug("setText(...)");return this._clear("setText"),this._fsm.is(r.STARTED)&&this._sendMessage(this._createStartMessage()),this.pushChanges(u.Change.ins(0,e))},e.prototype.pushChanges=function(e){if(this._checkIdle(),u.Change.isDelta(e)){var t=this._changesQueue.pushChanges(e);return this._textSize=e.prevLen+e.length,this._asyncChecksManager.stage(this._changesQueue.localRevision),this._trySend(this._fsm.current),t}if(u.Change.isReset(e)){var t=this.setText(e.text.get());return this._trySend(this._fsm.current),t}return this._changesQueue.isEmpty||this.ping(),-1},Object.defineProperty(e.prototype,"checkingState",{get:function(){var e=0===this._checkedTextSize||1===this._textSize?"idle":this._checkedTextSize>f.BIG_TEXT_SIZE&&this._textSize>f.BIG_TEXT_SIZE/3?"full":"checking";return this._log.trace("current checking state",e),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asyncChecksState",{get:function(){return this._asyncChecksManager.getState()},enumerable:!0,configurable:!0}),e.prototype.accept=function(e,t,n){this._sendInbandCommand(new g.Message.UserFeedback(this._nextId++,f.FeedbackType.ACCEPTED,e,t,n))},e.prototype.setContext=function(e){this._log.debug("setContext(...)"),this._sendInbandCommand(new g.Message.SetContext(this._nextId++,-1,l.DocumentContext.serialize(e))),this._context=e},e.prototype.reportUserFeedback=function(e,t){this._sendInbandCommand(new g.Message.UserFeedback(this._nextId++,t===f.FeedbackType.SYNONYM_ACCEPTED?f.FeedbackType.ACCEPTED:t,e.id,e.begin))},e.prototype.dismissAll=function(e){this._sendInbandCommand(new g.Message.UserFeedback(this._nextId++,f.FeedbackType.DISMISS_BY_LENS,void 0,void 0,void 0,void 0,e))},e.prototype.requestSynonyms=function(e,t){return this._synonymsRequester.request(new g.Message.SynonymsRequest(this._nextId++,e,t))},e.prototype.requestDocStats=function(){var e=this,t=h.retryCountPredicate(3);return h.promiseRetrier(function(){return e._statsRequester.request(new g.Message.StatsRequest(e._nextId++))},function(e){return t()&&y.DroppedFromQueueError.isDroppedFromQueueError(e)})},e.prototype.enablePlagiarismSearch=function(){this._asyncChecksManager.resetCheck("plagiarism"),this._sendInbandCommand(new g.Message.ToggleChecks(this._nextId++,{plagiarism:!0}))},e.prototype.disablePlagiarismSearch=function(){this._sendInbandCommand(new g.Message.ToggleChecks(this._nextId++,{plagiarism:!1}))},e.prototype.setOption=function(e,t){this._log.trace("Set option "+t),this._sendInbandCommand(new g.Message.Option(this._nextId++,e,t))},e.prototype.ping=function(){this._sendInbandCommand(new g.Message.Ping(this._nextId++))},e.prototype.close=function(){return this._fsm.event(b.CLOSE)},e.prototype.getText=function(){return this._getTextRequester.request({id:this._nextId++,action:"get_debug_info"})},e.prototype._isInitialized=function(e){return"error"!==e.action},e.prototype._handleMessage=function(e){switch(this._log.isEnabled(i.Logging.LogLevel.TRACE)&&this._log.trace("Message <<< "+JSON.stringify(e).replace("\n"," ").substring(0,300)),e.action){case"start":this._handler.onStartMessageAcknowledged(),this._fsm.event(b.START);break;case"alert":this._handleAlert(e);break;case"remove":this._handler.onRemove({kind:"alert_removed",alertId:e.id.toString()});break;case"finished":this._handleFinish(e);break;case"async_check_finished":this._handleAsyncCheckFinished(e);break;case"submit_ot":this._handleAck(e);break;case"feedback":case"option":case"toggle_checks":case"set_context":this._handleAck(e);break;case"error":this._handleError(e);break;case"pong":this._handler.onPong();break;case"synonyms":this._handleSynonyms(e);break;case"text_stats":e.readingTime=m.DocumentStatistics.calculateReadingTime(e),e.speakingTime=m.DocumentStatistics.calculateSpeakingTime(e),this._handler.onStats({kind:"stats",stats:e}),this._statsRequester.onValue(e.id,e);break;case"debug_info":this._handler.onDebugInfo({kind:"debug_info",info:e}),this._getTextRequester.onValue(e.id,e.text);break;default:this._log.error("Unknown message",{message:e}),a.assertNever(e)}},e.prototype._handleDisconnect=function(e){return o.__awaiter(this,void 0,void 0,function(){var t,n,r,i,a,c=this;return o.__generator(this,function(u){switch(u.label){case 0:return u.trys.push([0,5,,7]),t=this._changesQueue.isEmpty&&!this._changesQueue.isStaging,n=v.Reconnect.getReconnectAction(e,{canGoIdle:t,isInitialized:!0}),[4,this._fsm.event(b.DISCONNECT,e.reason)];case 1:return(r=u.sent())?(this._log.warn("Disconnected due to ",e.reason),i=function(t){return o.__awaiter(c,void 0,void 0,function(){var n,r,i,s;return o.__generator(this,function(o){switch(o.label){case 0:return o.trys.push([0,4,,7]),[4,this._fsm.event(b.CONNECT)];case 1:return r=o.sent(),r?[4,e.reconnect.scheduleReconnect(t)]:[2];case 2:return n=o.sent(),this._conn=n,[4,this._fsm.event(b.CONNECTED,n)];case 3:if(!(i=o.sent()))throw new Error("State change failed");return[3,7];case 4:return s=o.sent(),this._log.warn("Reconnect failed due to error ",s),n?[4,n.close()]:[3,6];case 5:o.sent(),o.label=6;case 6:return[3,7];case 7:return[2]}})})},"idle"!==n?[3,2]:(this._idleRestore=s.Some(function(){return i(0)}),this._log.debug("Postponed reconnect until changes arrive"),[3,4])):[2];case 2:return[4,this._handler.onDisconnect(e,e.reconnect.nextDelay,i,n).catch(function(t){if(c._log.warn("Reconnect failed with an error",t),"error"===n)throw e.error})];case 3:u.sent(),u.label=4;case 4:return[3,7];case 5:return a=u.sent(),p.errPrintln(a),[4,this._fsm.event(b.CLOSE,a).catch()];case 6:return u.sent(),[3,7];case 7:return[2]}})})},e.prototype._handleAlert=function(e){var t=this;this._handler.beforeAlert({kind:"before_alert"});var n=Object.assign(e,{id:e.id.toString()});this._log.trace("_handleAlert"),this._changesQueue.transformAlertAgainstQueue(n).fold(function(){t._log.isEnabled(i.Logging.LogLevel.TRACE)&&t._log.trace("OT ALERT: discarding alert due to position overlap",{message:JSON.stringify(n).substring(0,200)})},function(e){return t._handler.onAlert({kind:"alert_received",alert:e})})},e.prototype._handleFinish=function(e){this._handler.onBeforeFinish({kind:"before_finish"}),this._changesQueue.ack(e.rev);var t=this._createFinishEvent(e);this._handler.onFinish(t)},e.prototype._handleAsyncCheckFinished=function(e){this._asyncChecksManager.finish(e),this._handler.onAsyncCheckFinish({kind:"async_check_finished",check:e.check,revision:e.rev})},e.prototype._handleAck=function(e){this._log.trace("<<< Acknowledge for "+e.action,{message:e})},e.prototype._handleSynonyms=function(e){var t=this._parseSynonymsResult(e);this._handler.onSynonyms({kind:"synonyms",synonyms:t,word:e.token,position:e.synonyms.pos}),this._synonymsRequester.onValue(e.id,t)},e.prototype._createFinishEvent=function(e){return{kind:"finish",revision:e.rev,score:s.Option.of(e.scores).map(function(t){return{errorRateScore:e.score,accuracy:t.Accuracy,clarity:t.Clarity,effectiveness:t.Effectiveness,rank:Math.min(100,Math.round(.5*t.Accuracy+.25*(t.Clarity+t.Effectiveness)))}}),dialect:e.dialect}},e.prototype._parseSynonymsResult=function(e){var t=this,n=function(e){return e.derived};return e.synonyms.meanings.length>0?s.Some({id:e.id.toString(),originalWord:e.token,synonymsOrGroups:1===e.synonyms.meanings.length?s.Either.left(e.synonyms.meanings[0].synonyms.map(n)):s.Either.right(e.synonyms.meanings.map(function(r){return void 0===r.meaning&&t._log.warn("Absent meaning in synonyms group.",{token:e.token}),{meaning:r.meaning||"",words:r.synonyms.map(n)}}))}):s.None},e.prototype._createStartMessage=function(){return new g.Message.Start(this._nextId++,this._client,this._clientVersion,this._extDomain,this._dialect,this._docid,this._token,l.DocumentContext.serialize(this._context))},e.prototype._trySend=function(e){this._log.trace("_trySend("+r[e]+")"),void 0===this._timeout&&e===r.STARTED&&(this._timeout=setTimeout(this._send,this._sendDelay))},e.prototype._checkIdle=function(){var e=this;this._idleRestore=this._idleRestore.flatMap(function(t){return e._log.debug("We are idle... reconnecting before push."),t(),s.None})},e.prototype._shouldHaveSeparateRevision=function(e){return"set_context"===e.action},e.prototype._sendInbandCommand=function(e){this._checkIdle(),this._log.trace("_sendInbandCommand "+e.action);var t=this._changesQueue.isEmpty,n=this._changesQueue.pushCommand(e);return t?(this._log.trace("Q.isEmpty, sending command immidiately",e),this._send()):this._trySend(this._fsm.current),n},Object.defineProperty(e.prototype,"_checkedTextSize",{get:function(){return this._changesQueue.stagedAmount},enumerable:!0,configurable:!0}),e.prototype._tryConnect=function(){return o.__awaiter(this,void 0,void 0,function(){var e,t,n,r,i;return o.__generator(this,function(o){switch(o.label){case 0:return[4,this._fsm.event(b.CONNECT)];case 1:if(!(e=o.sent()))return[2];o.label=2;case 2:return o.trys.push([2,9,,10]),[4,this._ws.connect(this._url)];case 3:t=o.sent(),this._conn=t,o.label=4;case 4:return o.trys.push([4,6,,8]),[4,this._fsm.event(b.CONNECTED,t)];case 5:if(!(n=o.sent()))throw new Error("State change failed");return[3,8];case 6:return r=o.sent(),this._log.warn("Connection cannot be finalized due to error",r),[4,t.close()];case 7:return o.sent(),[3,8];case 8:return[3,10];case 9:return i=o.sent(),p.errPrintln(i),[3,10];case 10:return[2]}})})},e.prototype._close=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(e){switch(e.label){case 0:return this._clear("close() called"),this._conn?[4,this._conn.close()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype._clear=function(e){this._nextId=0,this._changesQueue.isEmpty||this._log.warn("clean queue with messages",{reason:e}),this._changesQueue.clear(e),this._asyncChecksManager.reset(),this._resetTimer()},e.prototype._handleError=function(e){switch(e.error){case f.ErrorCode.CANNOT_GET_TEXT_STATS:this._statsRequester.onError(e.id,new Error("Server Error"));break;case f.ErrorCode.CANNOT_FIND_SYNONYM:this._synonymsRequester.onError(e.id,new Error("can not find synonym"));break;case f.ErrorCode.RUNTIME_ERROR:this._runtimeErrorCounter.inc(),this._clear("runtime_error");break;default:this._handler.onError(o.__assign({kind:"error"},e)),this._log.error("Error",{message:e})}},e}();t.CAPIClientImpl=E;var C=function(){function e(e){void 0===e&&(e=s.Duration.minutes(5).toMillis()),this._windowTime=e,this._count=0}return e.prototype.inc=function(){this._count++,this._startCounter()},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e.prototype._startCounter=function(){var e=this;this._timer=this._timer||setTimeout(function(){e._timer=void 0,e._count-- >0&&e._startCounter()},this._windowTime)},e}(),S=function(){function e(){this.reset()}return e.prototype.getState=function(){return{plagiarism:this._pendingRevision>this._finishedRevisions.plagiarism?"checking":"idle"}},e.prototype.stage=function(e){this._pendingRevision=Math.max(this._pendingRevision,e)},e.prototype.finish=function(e){this._finishedRevisions[e.check]=Math.max(this._finishedRevisions[e.check],e.rev)},e.prototype.reset=function(){this._pendingRevision=0,this._finishedRevisions={plagiarism:-1}},e.prototype.resetCheck=function(e){this._finishedRevisions[e]=-1},e}();t.AsyncChecksStateManager=S},553:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);!function(e){var t=function(){function e(e){this.id=e}return e}();e.Base=t;var n=function(e){function t(t){var n=e.call(this,t)||this;return n.action="ping",n}return r.__extends(t,e),t}(t);e.Ping=n;var o=function(e){function t(t){var n=e.call(this,t)||this;return n.action="pong",n}return r.__extends(t,e),t}(t);e.Pong=o;var i=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.name=n,o.value=r,o.action="option",o}return r.__extends(t,e),t}(t);e.Option=i;var s=function(e){function t(t,n,r,o,i,s,a,c){void 0===a&&(a="");var u=e.call(this,t)||this;return u.client=n,u.clientVersion=r,u.extDomain=o,u.dialect=i,u.docid=s,u.token=a,u.documentContext=c,u.action="start",u}return r.__extends(t,e),t}(t);e.Start=s;var a=function(e){function t(t,n,r,o,i){var s=e.call(this,t)||this;return s.rev=n,s.score=r,s.dialect=o,s.scores=i,s.action="finished",s}return r.__extends(t,e),t}(t);e.Finish=a;var c=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.rev=n,o.documentContext=r,o.action="set_context",o}return r.__extends(t,e),t}(t);e.SetContext=c;var u=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.rev=n,o.check=r,o.action="async_check_finished",o}return r.__extends(t,e),t}(t);e.AsyncCheckFinished=u;var l=function(e){function t(t,n,r,o){var i=e.call(this,t)||this;return i.rev=n,i.doc_len=r,i.deltas=o,i.action="submit_ot",i}return r.__extends(t,e),t}(t);e.SubmitOt=l;var d=function(e){function t(t,n,r,o,i,s,a,c,u,l,d,p,h,f,g,m,_,y,v,b,w,E,C,S){var k=e.call(this,t)||this;return k.rev=n,k.begin=r,k.end=o,k.highlightBegin=i,k.highlightEnd=s,k.text=a,k.pname=c,k.highlightText=u,k.category=l,k.categoryHuman=d,k.group=p,k.title=h,k.details=f,k.examples=g,k.explanation=m,k.transforms=_,k.replacements=y,k.free=v,k.extra_properties=b,k.hidden=w,k.cardLayout=E,k.sentence_no=C,k.todo=S,k.action="alert",k}return r.__extends(t,e),t}(t);e.Alert=d;var p=function(e){function t(t){var n=e.call(this,t)||this;return n.action="remove",n}return r.__extends(t,e),Object.defineProperty(t.prototype,"alertId",{get:function(){return this.id},enumerable:!0,configurable:!0}),t}(t);e.RemoveAlert=p;var h=function(e){function t(t,n){var r=e.call(this,t)||this;return r.checks=n,r.action="toggle_checks",r}return r.__extends(t,e),t}(t);e.ToggleChecks=h;var f=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.begin=n,o.token=r,o.action="synonyms",o}return r.__extends(t,e),t}(t);e.SynonymsRequest=f;var g=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.token=n,o.synonyms=r,o.action="synonyms",o}return r.__extends(t,e),t}(t);e.SynonymsMessage=g;var m=function(e){function t(t,n,r,o,i,s,a){var c=e.call(this,t)||this;return c.type=n,c.alertId=r,c.position=o,c.text=i,c.previousText=s,c.lens=a,c.action="feedback",c}return r.__extends(t,e),t}(t);e.UserFeedback=m;var _=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.error=n,o.severity=r,o.action="error",o}return r.__extends(t,e),t}(t);e.Error=_;var y=function(e){function t(t){var n=e.call(this,t)||this;return n.action="get_text_stats",n}return r.__extends(t,e),t}(t);e.StatsRequest=y}(t.Message||(t.Message={}))},554:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(211);!function(e){function t(e,t){var n=t/60,o=r.secondsToTime(e.words/n);return o.s=o.h>0&&o.m>10?0:Math.floor(o.s),o}function n(e){return t(e,250)}function o(e){return t(e,130)}function i(t,n){var r={words:t,chars:n,sentences:Math.floor(t/5),readingTime:{},speakingTime:{},uniqueWords:40*Math.random(),uniqueWordsIndex:100*Math.random(),rareWords:20*Math.random(),rareWordsIndex:100*Math.random(),wordLength:5.4,wordLengthIndex:100*Math.random(),sentenceLength:16.7,sentenceLengthIndex:100*Math.random(),readabilityScore:73,readabilityDescription:"Your text is likely to be understood by a reader who has at least 7th grade education (age 12)"};return r.readingTime=e.calculateReadingTime(r),r.speakingTime=e.calculateSpeakingTime(r),r}e.calculateReadingTime=n,e.calculateSpeakingTime=o,e.generateStats=i}(t.DocumentStatistics||(t.DocumentStatistics={}))},555:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(14),o=n(304),i=n(43),s=n(305),a=n(3),c=function(){function e(e){if(this._delta={},!e||!e.id)throw new Error("document is undefined or doesn't have ID");this._original=Object.assign({},e,{id:String(e.id)}),this._settings=o.DoxDocumentSettings.Holder.fromJSON(e.extra_params),this._proofit=r.Option.of(e.proofit).map(s.Proofit.parseResult)}return Object.defineProperty(e.prototype,"id",{get:function(){return this._original.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this._delta.title||this._original.title||""},set:function(e){this._delta.title=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstContent",{get:function(){return this._original.first_content||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this._original.content||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"revision",{get:function(){return this._original.vsn||0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalFileName",{get:function(){return this._original.orig_filename||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createdAt",{get:function(){return this._original.created_at?i.stringToDate(this._original.created_at):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updatedAt",{get:function(){return this._original.updated_at?i.stringToDate(this._original.updated_at):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errors",{get:function(){return this._delta.errors||this._original.errors||0},set:function(e){this._delta.errors=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._original.size||0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"settings",{get:function(){return this._getSettingsHolder},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"genre",{get:function(){return this.settings.genre.orNull()},enumerable:!0,configurable:!0}),e.prototype.setGenre=function(e){this._deltaSettings=this._getSettingsHolder.changeGenre(e)},Object.defineProperty(e.prototype,"checks",{get:function(){return this.settings.checks.orNull()},enumerable:!0,configurable:!0}),e.prototype.setChecks=function(e){this._deltaSettings=this._getSettingsHolder.changeChecks(e)},Object.defineProperty(e.prototype,"context",{get:function(){return this.settings.context},enumerable:!0,configurable:!0}),e.prototype.setContext=function(e){this._deltaSettings=this._getSettingsHolder.changeContext(e)},Object.defineProperty(e.prototype,"proofit",{get:function(){return this._proofit.orNull()},enumerable:!0,configurable:!0}),e.prototype.resetProofit=function(){this._proofit=r.None},e.prototype._isDirty=function(){return Object.getOwnPropertyNames(this._delta||{}).length>0||void 0!==this._deltaSettings},e.prototype._popChanges=function(){var e=this._getDeltaRawDocument(this._delta,this._deltaSettings);return e.id=Number(this._original.id),e},e.prototype._getDeltaRawDocument=function(e,t){if(t){var n=t.toJSON();return a.ObjectUtils.update(e,{extra_params:n})}return Object.assign({},e)},e.prototype._applyChanges=function(e){this._original=Object.assign({},e,{id:String(e.id)}),e.extra_params&&(this._settings=o.DoxDocumentSettings.Holder.fromJSON(e.extra_params)),e.proofit&&(this._proofit=r.Option.of(e.proofit).map(s.Proofit.parseResult)),this._deltaSettings=void 0,this._delta={}},Object.defineProperty(e.prototype,"_getSettingsHolder",{get:function(){return void 0!==this._deltaSettings?this._deltaSettings:this._settings},enumerable:!0,configurable:!0}),e}();t.DoxDocument=c},556:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(2),i=n(204),s=n(6),a=n(203),c=n(100);!function(e){e[e.DISCONNECTED=0]="DISCONNECTED",e[e.CONNECTING=1]="CONNECTING",e[e.INITIALIZING=2]="INITIALIZING",e[e.RECONNECT_SCHEDULED=3]="RECONNECT_SCHEDULED",e[e.CONNECTED=4]="CONNECTED",e[e.READY=5]="READY",e[e.WAIT_ACK=6]="WAIT_ACK",e[e.CLOSED=7]="CLOSED"}(r=t.States||(t.States={}));var u;!function(e){e[e.CONNECT=0]="CONNECT",e[e.CONNECTED=1]="CONNECTED",e[e.SCHEDULE_RECONNECT=2]="SCHEDULE_RECONNECT",e[e.DISCONNECT=3]="DISCONNECT",e[e.CLOSE=4]="CLOSE",e[e.INITIALIZE=5]="INITIALIZE",e[e.INITIALIZED=6]="INITIALIZED",e[e.SEND=7]="SEND",e[e.ACK=8]="ACK",e[e.RESET=9]="RESET"}(u=t.Events||(t.Events={}));var l=function(){function e(e){var t=this;this._url=e,this._log=s.Monitoring.Logging.getLogger("coreclients.remote",s.Logging.LogLevel.DEBUG),this._ws=i.WS.create().onDisconnect(function(e){return t._handleDisconnect(e)}).onMessage(function(e,n){return t._handleMessage(n)}).resetReconnectCounterWhen(function(e){return t.isInitialized(e)}).onError(i.errPrintln),this._fsm=new a.StateMachine(r.DISCONNECTED,r.CLOSED).from(r.DISCONNECTED).to(r.CONNECTING).on(u.CONNECT).from(r.DISCONNECTED).to(r.RECONNECT_SCHEDULED).on(u.SCHEDULE_RECONNECT).from(r.CONNECTING,r.RECONNECT_SCHEDULED).to(r.CONNECTED).on(u.CONNECTED).from(r.CONNECTED).to(r.INITIALIZING).on(u.INITIALIZE).from(r.INITIALIZING).to(r.READY).on(u.INITIALIZED).from(r.CONNECTED,r.CONNECTING,r.RECONNECT_SCHEDULED,r.INITIALIZING,r.READY).to(r.DISCONNECTED).on(u.DISCONNECT).from(r.CONNECTED,r.CONNECTING,r.RECONNECT_SCHEDULED,r.INITIALIZING,r.READY,r.DISCONNECTED).to(r.CLOSED).on(u.CLOSE).on(r.CLOSED,function(e){t._conn&&t._conn.close(),e.args&&e.args instanceof i.WSError&&(t._error=e.args,t._log.warn("Remote connection to dox ws closed",t._error))}).on(r.CONNECTING,function(e){return t._connect()})}return Object.defineProperty(e.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),e.prototype._handleDisconnect=function(e){return o.__awaiter(this,void 0,void 0,function(){var t,n=this;return o.__generator(this,function(i){switch(i.label){case 0:return[4,this._fsm.event(u.DISCONNECT,e.reason)];case 1:if(!i.sent())return[3,7];this._log.info("Disconnected",e.reason),i.label=2;case 2:return i.trys.push([2,4,,6]),[4,this._disconnectHandler(e,e.reconnect.nextDelay,function(t){return o.__awaiter(n,void 0,void 0,function(){var n,i,s=this;return o.__generator(this,function(o){switch(o.label){case 0:return[4,this._fsm.event(u.SCHEDULE_RECONNECT)];case 1:return o.sent()?[4,e.reconnect.scheduleReconnect(t)]:[3,4];case 2:return n=o.sent(),[4,this._fsm.event(u.CONNECTED,n).catch(function(e){s._log.warn("Reconnect failed due to error",e),n.close()})];case 3:i=o.sent(),i?(this._log.info("Reconnected to DOX WS successful",{url:this._url,canFinalize:i}),this._conn=n):(this._log.info("Immediate disconnect after reconnect to DOX WS",{url:this._url,state:r[this._fsm.current]}),n.close()),o.label=4;case 4:return[2]}})})})];case 3:return i.sent(),[3,6];case 4:return t=i.sent(),this._log.warn("DisconnectHandler failed due to error",t),[4,this._fsm.event(u.CLOSE,t).catch()];case 5:return i.sent(),[3,6];case 6:return[3,8];case 7:this._log.error("Can not enter Disconnected state",e.reason),i.label=8;case 8:return[2]}})})},e.prototype.close=function(e){var t=this;return void 0===e&&(e={}),this._fsm.event(u.CLOSE,e).then(function(e){e&&clearTimeout(t._timeout)})},e.prototype._connect=function(){return o.__awaiter(this,void 0,void 0,function(){var e,t;return o.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,this._ws.connect(this.url)];case 1:return e=n.sent(),[4,this._fsm.event(u.CONNECTED,e)];case 2:return n.sent()?[2,this._conn=e]:(e.close(),[2,void 0]);case 3:throw t=n.sent(),new c.DoxErrors.ConnectionError(this.url);case 4:return[2]}})})},e}();t.Remote=l},557:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),o=n(301),i=n(100);!function(e){var t=function(){function e(e){this._httpRequest=e}return e.text=function(t,n){var o=r.RequestBuilder.create().json();return(t||n)&&o.body({content:t,title:n}),new e(o)},e.file=function(t){var n=r.RequestBuilder.create();if(!t)throw new TypeError("File was not provided");if(!t.name)throw new TypeError("Empty filename passed to file() function");if(!t.size)throw new TypeError("File size wasn't provided");if(t.size>o.MAX_FILE_SIZE)throw new i.DoxErrors.FileSizeOutOfRangeError(o.MAX_FILE_SIZE);var s=(t.name.split("\\").pop()||"").split("/").pop();if(!s)throw new i.DoxErrors.UnsupportedFileTypeError(t.name);if(!s.match(e.supportedExtensionsRE))throw new i.DoxErrors.UnsupportedFileTypeError(s);var a=new FormData;return a.append("source_file",t),n.body(a),new e(n)},e.prototype._getHttpRequestBuilder=function(){return this._httpRequest.isBodyPresent()?this._httpRequest:this._httpRequest.body({})},e.supportedExtensions=["doc","docx","odt","rtf","txt","htm","html"],e.supportedExtensionsRE=new RegExp("\\.("+e.supportedExtensions.join("|")+")$","i"),e}();e.Create=t;var n=function(){function e(e){this._str=e}return e.contains=function(t){return new e(t)},e.all=function(){return new e("")},e.prototype.toSearchString=function(){return this._str},e}();e.Search=n}(t.DoxRequest||(t.DoxRequest={}))},558:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.free=0]="free",e[e.premium=1]="premium"}(t.UserType||(t.UserType={}))},559:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONLINE="online"},560:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(23),i=n(7),s=n(6),a=n(36),c=n(3),u=n(54),l=n(124);t.ACCEPTED_UPLOAD_EXTENSIONS=["doc","docx","odt","rtf","htm","html","txt"].map(function(e){return"."+e}),t.ACCEPTED_UPLOAD_MIME_TYPES=["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.oasis.opendocument.text","text/rtf","text/html","text/plain"],t.defaultState={searchText:"",wsConnection:c.Async.defaultValue(),proofitResults:{},deletedDocumentIds:[],first100:c.Async.defaultValue(),remoteSearch:c.Async.defaultValue()};var d=100,p=function(){function e(e,t){this._doxApi=e,this._state=t,this._log=s.Monitoring.Logging.getLogger("model.documents.proofit"),this._operation=null,this.results=this._state.lens("proofitResults"),this.cancelled=new o.Subject,this.wsConnection=this._state.lens("wsConnection")}return e.prototype.init=function(){var e=this;c.invariant(null===this._operation,"Expect operation to be not established"),this._operation=c.Async.OperationRetrier.create(function(){return e._connect()},this.wsConnection)},e.prototype.reset=function(){var e=this.wsConnection.get();c.Async.isOk(e)?this._terminate(e.value):this._operation&&this._operation.unsubscribe(),this._operation=null,this.wsConnection.set(t.defaultState.wsConnection)},e.prototype._connect=function(){var e=this;return this._doxApi.openDocumentsWS({metadataChangeHandler:function(t,n){n.proofit.forEach(function(n){e.results.modify(function(e){return Object.assign({},e,(r={},r[t]=n,r));var r}),n.status===u.Proofit.JobStatus.cancelled&&e.cancelled.next({id:t})})}}).then(function(e){return{unsubscribe:e.close.bind(e)}})},e.prototype._terminate=function(e){return r.__awaiter(this,void 0,void 0,function(){var n;return r.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),this.results.set(t.defaultState.proofitResults),this.cancelled.next({id:null}),[4,e.unsubscribe()];case 1:return r.sent(),[3,3];case 2:throw n=r.sent(),this._log.error("Failed to close dox session",n),n;case 3:return[2]}})})},e}();t.DocumentListProofitModelImpl=p;var h=function(){function e(e,t,n,r,o){var a=this;this._state=e,this._doxApi=t,this._settings=n,this._connectivity=r,this._handleHttpDoxError=o,this._log=s.Monitoring.Logging.getLogger("model.documents.list"),this._isLocalSearch=i.Atom.create(!1),this._first100=this._state.lens("first100"),this._remoteSearch=this._state.lens("remoteSearch"),this._deletedDocumentIds=this._state.lens("deletedDocumentIds"),this.searchText=this._state.lens("searchText"),this._trimmedSearchText=this.searchText.view(function(e){return e.trim()}),this.isFirstTimeLoaded=this._first100.view(c.Async.isOk),this.isSearching=this._remoteSearch.view(function(e){return c.Async.isInProgress(e)||c.Async.isError(e)}),this.searchResults=i.Atom.combine(this._first100,this._remoteSearch,this._deletedDocumentIds,this._trimmedSearchText,function(e,t,n,r){return c.Async.flatMap(e,function(e){return c.Async.isTerminated(t)?c.Async.flatMap(t,function(t){return c.Async.ok(a._localSearch(e,t||[],n,r))}):c.Async.ok(a._localSearch(e,[],n,r))})}),this._retryWhen=function(e){return!(e instanceof u.HTTPError)||c.isServerErrorCode(e.code)},this._documentSubs=[],this._settings.firstCall.get()||this._first100.filter(c.Async.isOk).first().subscribe(function(){a._settings.firstCallDone()}),this._first100.filter(function(e){return c.Async.isOk(e)}).subscribe(function(e){return a._isLocalSearch.set(e.value.length<d)}),this.searchResults.filter(function(e){return c.Async.isError(e)||c.Async.isFatal(e)}).switchMap(c.RxUtils.Scheduler.rafScheduler).subscribe(function(e){c.Async.isFatal(e)?(e.error instanceof u.HTTPError?a._handleHttpDoxError(e.error,"DOX: Cannot load document list"):a._connectivity.setState({type:"dox",state:{type:c.isServerErrorCode(e.error.code)?"serverError":"unknownConnectionError"}}),a._log.error("DOX: Cannot load document list",e.error)):c.Async.isError(e)&&a._log.warn("DOX: Attempt to load document list failed",e.error,{attempt:e.attempt})})}return e.prototype.load=function(){this._reset(),this._loadDocuments()},e.prototype.reset=function(){this._documentSubs.map(function(e){return e.unsubscribe()}),this._documentSubs=[],this._reset()},e.prototype._reset=function(){this.searchText.set(t.defaultState.searchText),this._isLocalSearch.set(!1),this._remoteSearch.set(c.Async.defaultValue()),this._first100.set(c.Async.defaultValue())},e.prototype._loadDocuments=function(){var e=this,t=i.Atom.create(!1);this._documentSubs=[c.Async.OperationRetrier.create(function(){return e._doxApi.listDocuments(d,l.DoxClient.OrderBy.Updated,!e._settings.firstCall.get())},this._first100,c.Async.OperationRetrier.RetryStrategy.conditional(this._retryWhen,c.Async.OperationRetrier.RetryStrategy.linear(3,3e3))),this._trimmedSearchText.withLatestFrom(this._first100,t).filter(function(e){return!e[0]}).throttleTime(1e3).filter(function(e){var t=(e[0],e[1]),n=e[2];return c.Async.isTerminated(t)&&!n}).subscribe(function(){t.set(!0),e._doxApi.listDocuments(d,l.DoxClient.OrderBy.Updated,!1).then(function(t){return e._first100.set(c.Async.ok(t))}).catch(function(t){t instanceof u.HTTPError&&e._handleHttpDoxError(t,"Failed to refresh document list"),e._log.info("Failed to refresh document list",t)}).then(function(){t.set(!1)})}),this._isLocalSearch.switchMap(function(t){return t?o.Observable.empty():o.Observable.merge(e._trimmedSearchText.map(function(e){return c.Either.left(e)}),e._trimmedSearchText.debounceTime(500).map(function(e){return c.Either.right(e)})).switchMap(function(t){return e._remoteSearch.set(c.Async.defaultValue()),c.Either.isLeft(t)||!t.value?o.Observable.empty():o.Observable.using(function(){return c.Async.OperationRetrier.create(function(){return e._doxApi.searchDocument(l.DoxRequest.Search.contains(t.value),d)},e._remoteSearch,c.Async.OperationRetrier.RetryStrategy.conditional(e._retryWhen,c.Async.OperationRetrier.RetryStrategy.linear(3,3e3)))},function(){return e._remoteSearch.filter(c.Async.isTerminated).first()})})}).subscribe()]},e.prototype._localSearch=function(e,t,n,r){var o=new RegExp(r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"i");return t.concat(e.filter(function(e){return!r||o.test(e.firstContent)||o.test(e.title)}).filter(function(e){return-1===t.findIndex(function(t){return t.id===e.id})})).filter(function(e){return n.indexOf(e.id)<0})},e}(),f=function(){function e(e,t,n,r,o,a,c){this._state=e,this._doxApi=t,this._alertCache=n,this._navigateToDocument=r,this._notifications=o,this.browser=a,this._handleHttpDoxError=c,this._log=s.Monitoring.Logging.getLogger("model.documents.actions"),this._deletedDocumentIds=this._state.lens("deletedDocumentIds"),this.documentUploadProgress=i.Atom.create(null)}return e.prototype.createDocument=function(e,t){return this._doxApi.createDocument(l.DoxRequest.Create.text(e,t))},e.prototype.createDocumentAndNavigate=function(e){var t=this;return this.createDocument().then(function(n){e.get()?t.navigateToDocument(n.id):t._notifications.show(t._notifications.create.newDocumentCreated(function(){return t.navigateToDocument(n.id)}))}).catch(function(e){return t.handleCreateDocumentError(e)})},e.prototype.deleteDocument=function(e){var t=this;return this._deletedDocumentIds.modify(function(t){return t.concat([e])}),this._doxApi.deleteDocumentById(e).catch(function(n){throw t._deletedDocumentIds.modify(function(t){return t.filter(function(t){return t!==e})}),n}).then(function(n){try{t._alertCache.remove(e.toString())}catch(e){t._log.debug("could not remove alert cache for deleted doc",e)}})},e.prototype.restoreDocument=function(e){var t=this;return this._deletedDocumentIds.modify(function(t){return t.filter(function(t){return t!==e})}),this._doxApi.restoreDocumentById(e).catch(function(n){throw t._deletedDocumentIds.modify(function(t){return t.concat([e])}),n instanceof u.HTTPError&&t._handleHttpDoxError(n,"Failed to restore document"),n})},e.prototype.downloadOriginal=function(e){return r.__awaiter(this,void 0,void 0,function(){var t;return r.__generator(this,function(n){switch(n.label){case 0:if(this._log.info("downloadOriginal.initiated"),!a.isFetchBlobDownloadSupported)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this._doxApi.downloadOriginal(e).then(u.RawFile.saveToFS)];case 2:return n.sent(),[3,4];case 3:return t=n.sent(),this.handleDownloadDocumentError(t),[3,4];case 4:return[3,6];case 5:this._notifications.show(this._notifications.create.blobDownloadUnsupported()),n.label=6;case 6:return[2]}})})},e.prototype.downloadProofread=function(e,t){return r.__awaiter(this,void 0,void 0,function(){var n,o=this;return r.__generator(this,function(r){switch(r.label){case 0:if(this._log.info("downloadProofread.initiated"),!a.isFetchBlobDownloadSupported)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._doxApi.downloadProofread(e).then(u.RawFile.saveToFS).then(function(){t&&o._notifications.show(t)})];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),this.handleDownloadDocumentError(n),[3,4];case 4:return[3,6];case 5:this._notifications.show(this._notifications.create.blobDownloadUnsupported()),r.label=6;case 6:return[2]}})})},e.prototype.uploadDocument=function(e){return r.__awaiter(this,void 0,void 0,function(){var t=this;return r.__generator(this,function(n){switch(n.label){case 0:return[4,this._doxApi.createDocument(l.DoxRequest.Create.file(e)).then(function(e){return t._state.lens("first100").modify(function(t){return c.Async.isOk(t)?c.Async.ok(new Array(e).concat(t.value)):t}),e})];case 1:return[2,n.sent()]}})})},e.prototype.navigateToDocument=function(e){this._navigateToDocument(""+e)},e.prototype.handleDownloadDocumentError=function(e){this._log.error("downloadDocument failed",e);var t={unauthorized:e instanceof l.DoxErrors.UnauthorizedError,notFound:e instanceof l.DoxErrors.DocumentNotFoundError,temporary:e instanceof l.DoxErrors.TooManyRequestsError||e instanceof l.DoxErrors.ConnectionError};t.unauthorized?this._notifications.show(this._notifications.create.unauthorizedError()):t.notFound?this._notifications.show(this._notifications.create.downloadDocumentNotFoundError()):t.temporary?this._notifications.show(this._notifications.create.isTemporaryDownloadError()):this._notifications.show(this._notifications.create.error())},e.prototype.handleCreateDocumentError=function(e){e instanceof u.HTTPError?(this._handleHttpDoxError(e,"Failed to create new document"),this._log.warn("Failed to create new document",e)):c.isClientFetchError(e)?(this._log.warn("Failed to create new document",e),this._notifications.showError("Failed to create new document: "+(e&&e.message))):(this._log.error("Failed to create new document",e),this._notifications.showError("Failed to create new document: "+(e&&e.message)))},e.prototype.handleDeleteDocumentError=function(e){e instanceof u.HTTPError&&(this._handleHttpDoxError(e,"Failed to remove document"),this._log.error("Failed to remove document",e))},e}(),g=function(){function e(e,t,n,r,o,i,s,a){this._state=e,this._doxApi=t,this._settings=n,this._alertCache=r,this._browser=o,this._connectivity=i,this._notifications=s,this._navigateToDocument=a,this.proofit=new p(this._doxApi,this._state),this.list=new h(this._state,this._doxApi,this._settings,this._connectivity,this._doxHttpErrorHandler),this.actions=new f(this._state,this._doxApi,this._alertCache,this._navigateToDocument,this._notifications,this._browser,this._doxHttpErrorHandler)}return e.prototype._doxHttpErrorHandler=function(e){switch(e.code){case l.DoxErrors.HttpCodes.UNAUTHORIZED:this._connectivity.setState({type:"dox",state:{type:"unauthorized"}});break;case l.DoxErrors.HttpCodes.TOO_MANY_REQUESTS:this._notifications.show(this._notifications.create.error());break;default:this._notifications.showError(e.message)}},e}();t.DocumentsPageModelImpl=g},561:function(e,t,n){"use strict";function r(e,t){if(e<=0)return null;var n=t.filter(function(e){return e.group===s.AlertGroup.plagiarism}).reduce(function(e,t){return e+t.range.end-t.range.start},0);return Math.round(Math.min(100,n/e*100))}function o(e,t){var n=e>0?t.reduce(function(e,t){return e+(a[t.group]||0)},0)/e:null;return null!==n?Math.floor(100*(1-Math.min(1,11*n))):null}function i(e,t,n,i){var s=n.filter(function(e){return"synonym"!==e.kind}),a=n.filter(function(e){return"plagiarism"===e.kind}).length,c=s.filter(function(e){return e.isFree}).length;return{criticalAlerts:c,premiumAlerts:i-a,visiblePremiumAlerts:s.length-c-a,plagiarismPercentage:r(e,s),score:o(t,s)}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(101),a=(c={},c[s.AlertGroup.contextualSpelling]=1.2,c[s.AlertGroup.grammar]=1,c[s.AlertGroup.sentenceStructure]=.9,c[s.AlertGroup.punctuation]=.7,c[s.AlertGroup.style]=.3,c[s.AlertGroup.enhancement]=0,c[s.AlertGroup.plagiarism]=0,c[s.AlertGroup.synonym]=0,c);t.calculateScores=i;var c},562:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(23),i=n(563),s=n(3),a=n(6),c=n(124),u=n(54),l=n(577),d=n(77);!function(e){e[e.documentNotFound=0]="documentNotFound",e[e.unauthorized=1]="unauthorized",e[e.changed=2]="changed",e[e.disconnected=3]="disconnected",e[e.cannotReconnect=4]="cannotReconnect"}(t.DocEventType||(t.DocEventType={})),t.defaultState={session:null};var p=function(){function e(e,t,n,r,i){this._docId=e,this._state=t,this._doxApi=n,this._doxConnectivity=r,this._preventSyncWithDox=i,this._sessionState=this._state.lens("session"),this._session=null,this._incomingChangeSubject=new o.Subject,this._changeAcceptedSubject=new o.Subject,this._changeDroppedSubject=new o.Subject}return e.prototype.startSession=function(){return r.__awaiter(this,void 0,void 0,function(){var e,t,n,o,s;return r.__generator(this,function(r){switch(r.label){case 0:return[4,this._connectToDox()];case 1:return e=r.sent(),t=e.initialDelta,n=e.meta,o=t.text.get(),s=o.endsWith("\n")?o.slice(0,-1):o,this._sessionState.set(i.createInitialState(this._docId,n.title,s,{source:"init",proofit:n.proofit.orNull(),showBanner:!1})),this._session=new i.DocumentSessionImpl(this._sessionState,e,this._incomingChangeSubject,this._changeAcceptedSubject,this._changeDroppedSubject,function(){}),[2,{documentSession:this._session,initialGenre:n.settings.genre.orNull(),initialChecks:n.settings.checks.orNull()}]}})})},e.prototype._connectToDox=function(){return r.__awaiter(this,void 0,void 0,function(){var e,t,n,o=this;return r.__generator(this,function(i){switch(i.label){case 0:return e=c.DoxRemoteDocument.Queue.create({acceptedMsgHandler:function(e){return o._changeAcceptedSubject.next(e)},droppedMsgsHandler:function(e){return o._changeDroppedSubject.next(e)}}),t=d.Reconnect.getDefaultReconnect(a.Monitoring.Logging.getLogger("editor.document_model"),d.Reconnect.ClientType.dox),[4,this._doxApi.openDocumentById(this._docId,{changeHandler:function(e,t){if(!o._session)throw new s.InvariantError("Expect remote session to be established");o._preventSyncWithDox||o._incomingChangeSubject.next(t)},metadataChangeHandler:function(e,t){if(!o._session)throw new s.InvariantError("Expect remote session to be established");o._session.proofitState.modify(function(e){return t.proofit.fold(function(){return{source:"websocket",proofit:e.proofit,showBanner:!1}},function(t){var n=u.Proofit.isProofitEqual(e.proofit,t);return{source:"websocket",proofit:n?e.proofit:t,showBanner:!n&&l.isProofitCompleted(t.status)}})})},disconnectHandler:function(n,i,s){return r.__awaiter(o,void 0,void 0,function(){var o,a,c;return r.__generator(this,function(r){switch(r.label){case 0:if(n.code!==d.Reconnect.WsCodes.NOT_FOUND&&n.code!==d.Reconnect.WsCodes.UNAUTHORIZED||this._doxConnectivity.set({type:"error",reason:n.reason,error:new u.WSError({code:n.code,message:n.reason,status:n.reason})}),o=e.isEmpty,"idle"===(a=d.Reconnect.getReconnectAction(n,{canGoIdle:o,isInitialized:!0})))return[2,Promise.resolve()];n.reconnect.reconnectCounter>=2&&n.code!==d.Reconnect.WsCodes.GOING_AWAY&&n.code!==d.Reconnect.WsCodes.PRECONDITION_FAILED&&this._doxConnectivity.set({type:"error",reason:"Disconnected: "+n.code,error:n.error}),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t(n,i,s,a)];case 2:return r.sent(),this._doxConnectivity.set({type:"success"}),[3,4];case 3:if(c=r.sent(),"error"===a)throw c;return[3,4];case 4:return[2]}})})}},c.DoxRemoteDocument.Queue.create({acceptedMsgHandler:function(e){return o._changeAcceptedSubject.next(e)},droppedMsgsHandler:function(e){return o._changeDroppedSubject.next(e)}}),5e3)];case 1:return n=i.sent(),this._doxConnectivity.set({type:"success"}),[2,n]}})})},e}();t.DocumentModelImpl=p},563:function(e,t,n){"use strict";function r(e,t,n,r){return{id:e,title:t,localText:n,proofitState:r}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(23),i=n(7),s=n(6),a=n(3),c=n(54),u=n(157),l=n(321),d=n(1378),p=n(43);t.createInitialState=r;var h=function(){function e(e,t,n,r,a,c){var d=this;this._state=e,this._doxInit=t,this._incomingChange=n,this._acceptedMessage=r,this._droppedMessages=a,this._onClose=c,this._log=s.Monitoring.Logging.getLogger("model.DocumentSessionImpl"),this._counter=s.Monitoring.TimeSeries.root.getCounter("dox_editor_ts"),this._sessionActive=!0,this.localTitle=this._state.lens("title"),this.localText=this._state.lens("localText"),this.proofitState=this._state.lens("proofitState"),this.proofitCompleted=this.proofitState.skip(1).map(function(e){var t=e.proofit,n=e.showBanner;return t&&n?t:null}).distinctUntilChanged(),this.id=this._state.view("id"),this.isNew=this._state.view(function(e){return!(!e.title&&!e.localText)}).scan(function(e,t){return e||t},!1),this.localChangesSaved=i.Atom.create(!0),this.textChangedByServer=new o.Subject,this._remoteText=t.initialDelta.text.get(),this._settingsHolder=t.meta.settings,this._subs=[this._incomingChange.subscribe(function(e){if(d._log.trace("incoming change",e),u.Change.isFlush(e));else{u.Change.isDelta(e)&&p.assert(d._remoteText.length,e.prevLen,"delta should have prevlen equal to current text len");var t=u.Change.isReset(e)?e.text.get():u.Change.ins(0,d._remoteText).compose(e).text.getOrElse(d._remoteText),n=t.endsWith("\n")?t.slice(0,-1):t;d._remoteText=t,d.localText.set(n),d.textChangedByServer.next(n),d.localChangesSaved.set(d._doxInit.remoteDocument.inSync)}},function(e){d._log.error("incoming change fail",e)}),this._acceptedMessage.subscribe(function(e){d._log.trace("accepted message",e),l.ChangesQueue.isCmd(e)||d._incCounter(e.kind,"accepted"),d.localChangesSaved.set(d._doxInit.remoteDocument.inSync)},function(e){d._log.error("accepted message fail",e)}),this._droppedMessages.subscribe(function(e){var t=d._groupMessages(e.messages);void 0!==t.change&&d._incCounter("change","dropped",t.change),void 0!==t.meta&&d._incCounter("meta","dropped",t.meta),t.change&&d._log.warn("got dropped messages",{counts:t,reason:e.reason}),d.localChangesSaved.set(d._doxInit.remoteDocument.inSync)},function(e){d._log.error("accepted message fail",e)})]}return e.prototype._expectActiveSession=function(){a.invariant(this._sessionActive,"Expect remote session to be established")},e.prototype.setDocumentContent=function(e){this._expectActiveSession();var t=e+"\n",n=d.Diff.diffAsChanges(this._remoteText,t);this._log.trace("push delta",n),this._remoteText=t,n.isEmpty?this._log.trace("drop empty delta",n):(this.localChangesSaved.set(!1),this._doxInit.remoteDocument.pushChanges(n)),this.localText.set(e)},e.prototype.setDocumentTitle=function(e){this._expectActiveSession(),this.localTitle.set(e),this.localChangesSaved.set(!1),this._doxInit.remoteDocument.updateMetadata({title:e})},e.prototype.setDocumentGenre=function(e){this._expectActiveSession();var t=this._settingsHolder.changeGenre(e);this._updateSettings(t)},e.prototype.setDocumentAlertCount=function(e){this._expectActiveSession(),this._doxInit.remoteDocument.updateMetadata({errors:e})},e.prototype.setDocumentChecks=function(e){this._expectActiveSession();var t=this._settingsHolder.changeChecks(e);this._updateSettings(t)},e.prototype.end=function(){var e=this;return new Promise(function(t,n){e._onClose(),e._doxInit.remoteDocument.pushChanges(u.Change.flush()),e._subs.forEach(function(e){return e.unsubscribe()}),e._subs=[],e._expectActiveSession(),e._sessionActive=!1,e._doxInit.remoteDocument.close().then(function(){return t()})})},Object.defineProperty(e.prototype,"context",{get:function(){return this._doxInit.meta.settings.context.getOrElse(c.DocumentContext.empty)},enumerable:!0,configurable:!0}),e.prototype.setDocumentContext=function(e){this._expectActiveSession();var t=this._settingsHolder.changeContext(e);this._updateSettings(t)},e.prototype._updateSettings=function(e){this._incCounter("meta","sent"),this.localChangesSaved.set(!1),this._settingsHolder=e,this._doxInit.remoteDocument.updateMetadata({settings:e})},e.prototype._incCounter=function(e,t,n){void 0===n&&(n=1),this._counter.getCounter("message."+e+"."+t).increment(n)},e.prototype._groupMessages=function(e){return e.reduce(function(e,t){return void 0===e[t.kind]&&(e[t.kind]=0),e[t.kind]++,e},{})},e}();t.DocumentSessionImpl=h},564:function(e,t,n){"use strict";function r(e,t,n){void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=!1);var r=p.Cookie.getCookie(h),o=c.setPlagiarism(t||c.defaultState,"true"===r),i=e||(n?"academic_general":"general");return{textStats:u.defaultState,checkingSettings:o,checkingGenre:i,editor:l.defaultState,cards:d.defaultState}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(54),s=n(7),a=n(6),c=n(210),u=n(308),l=n(565),d=n(307),p=n(3),h="isPlagiarismFunnel";t.defaultState=r(),t.createDefaultState=r;var f=function(){function e(e,t,n,r,o,i,a,c,u){this._state=e,this.documentSession=t,this.textStats=n,this._capiWsUrl=r,this._dialectSettingsModel=o,this._features=i,this._telemetry=a,this._alertCache=c,this._capiConnectivity=u,this.editorEngine=s.Atom.create(null),this.cardsModel=null,this.contextState=s.Atom.create(this.documentSession.context),this._documentSyncSubs=null}return e.prototype.startEditor=function(e,t,n){var r=this;p.invariant(null===this.editorEngine.get()&&null===this._documentSyncSubs,"editor should not be started");var o=new c.CheckingSettingsModelImpl(this._state.lens("checkingGenre"),this._state.lens("checkingSettings"),this._telemetry),s=this._dialectSettingsModel.dialectOrDefault.get(),a=new l.GrammarlyEditorEngine(this._state.lens("editor"),e,"textarea",t,this.documentSession.id.get(),this.documentSession.localText.get(),this._capiWsUrl,o,this._dialectSettingsModel,function(){return r._alertCache.load(r.documentSession.id.get().toString(),s,r._features.isFree)},function(e){return r._alertCache.save(r.documentSession.id.get().toString(),s,r._features.isFree,e)},this._telemetry,this._capiConnectivity,this._features.isDesktopEditor?"desktop_editor":void 0,n,this._features.demoMode);return this.cardsModel=new d.CardsModelImpl(this._state.lens("cards"),a,this._features),a.mount(),this._documentSyncSubs=[this.documentSession.textChangedByServer.subscribe(function(e){a.setDocumentContent(e)}),a.textChangedByUser.subscribe(function(e){r.documentSession.setDocumentContent(e)}),a.scores.view(function(e){return[e.visiblePremiumAlerts,e.criticalAlerts]}).skip(1).subscribe(function(e){var t=e[0],n=e[1];r.documentSession.setDocumentAlertCount(n+(r._features.isFree?0:t))}),o.checksEnabled.skip(1).subscribe(function(e){return r.documentSession.setDocumentChecks(e)}),o.genre.skip(1).subscribe(function(e){return r.documentSession.setDocumentGenre(e)})],n&&this._documentSyncSubs.push(this.contextState.skip(1).subscribe(function(e){r.documentSession.setDocumentContext(e),o.genre.set(i.domainToGenre(e.domain))})),this.editorEngine.set(a),a},e.prototype.stopEditor=function(){var e=this.editorEngine.get();if(!e||!this._documentSyncSubs)throw new p.InvariantError("editor should be started");this._documentSyncSubs.forEach(function(e){return e.unsubscribe()}),this._documentSyncSubs=null,this.editorEngine.set(null),e.unmount()},Object.defineProperty(e.prototype,"isActive",{get:function(){return null!==this.editorEngine.get()},enumerable:!0,configurable:!0}),e.prototype.end=function(){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.isActive&&this.stopEditor(),[4,this.documentSession.end()];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),a.Monitoring.Logging.getLogger("model.editor.editor_sesion").error("DOX editor session end failed",e),[3,3];case 3:return[2]}})})},e}();t.EditorSessionImpl=f},565:function(e,t,n){"use strict";function r(e){function t(e){var t=typeof e;return null!=e&&("object"===t||"function"===t)}function n(e){var n={};for(var r in e)"ts"!==r&&"renderTs"!==r&&"tracked"!==r&&("r"!==r&&"origReplacements"!==r&&"rHtml"!==r&&"examples"!==r&&"references"!==r&&"rawMatch"!==r&&(t(e[r])||"selected"===r&&!Array.isArray(e[r]))||(n[r]=e[r]));return n}return e.filter(function(e){return!e.replaced}).map(n)}function o(e,t,n,r,o,i,s,a,c,l,d,p,h,g){h&&(u.Capi.CLIENT_NAME=h);var m=u({silentLogs:!0,el:e,docid:parseInt(r,10),value:o,sid:0,capiUrl:i,matches:d,apps:{plagiarismActive:s},editorType:"textarea"===t?{textarea:!0,value:"textarea"}:{contenteditable:!0,value:"contenteditable"},asPlainText:!0,textareaWrapSelector:"#"+n,plagiarismCheckDelay:1e4,dialect:a.orNull(),filter:function(e){return e?e.filter(function(e){return(g||!e.rawMatch.hidden)&&("synonyms"===e.rawMatch.action||c(_.alertGroupFromString(e.rawMatch.group)))}):[]},canRemoveSynonym:function(e){return!!f.DOM.hasParentWithClassName(e,"closeSyn")||!f.DOM.hasParentWithClassName(e,"cardSyn")},extendParams:function(e){e.genre=l()},exposeRawMatch:!0,exposeSynApi:!0,getContainerId:p.getContainerId,capiIdleTimeout:24e4,textareaBottomPadding:36,removeByPIDOnIgnore:!g,synAutofix:!0,skipMousedownWhen:function(e){return f.DOM.hasParentWithClassName(e.target,v.CardBaseClassName)}}),y=m.getMatchClass;return m.getMatchClass=function(e,t){var n=y(e,t);return e.rawMatch?((e.rawMatch.renderedOnce||"safari"===C.browser)&&(n+=" gr_disable_anim_appear"),"synonyms"===e.rawMatch.action&&(n+=" gr_syn_replaced"),e.rawMatch.renderedOnce=!0,n):n},m}function i(e){return e.rawMatch.group||"synonyms"===e.rawMatch.action}Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),a=n(23),c=n(14),u=n(604),l=n(54),d=n(7),p=n(6),h=n(125),f=n(3),g=n(36),m=n(210),_=n(101),y=n(578),v=n(317),b=n(561),w=n(1402),E=n(566);t.defaultState={pendingAlertAction:null,alertHighlights:{focused:{id:null,source:null},highlighted:null},alerts:{},premiumMatches:[],checkingStatus:v.CheckingStatus.idle};var C=g.getBrowserInfo(),S=function(){function e(e,t,n,r,o,i,u,l,h,g,y,v,C,S,k,T){var x=this;this._state=e,this._domElement=t,this._textAreaType=n,this._textAreaWrapperElementId=r,this._docId=o,this._initialText=i,this._capiWsUrl=u,this._checkingSettings=l,this._dialectSetting=h,this._getCachedMatches=g,this._cacheSerializableMatches=y,this._telemetry=v,this._capiConnectivity=C,this._capiClientName=S,this._isDenali=k,this._demoMode=T,this.synonymsViewModel=new w.SynonymsViewModelImpl(new E.SynonymsModelImpl(function(e,t){return s.__awaiter(x,void 0,void 0,function(){var n,r,o;return s.__generator(this,function(i){switch(i.label){case 0:if(!this._editor)throw new f.InvariantError("editor should be mounted");return this._editor.synonyms.requestSynonyms(e,t),[4,this._synonymAlerts.first().toPromise()];case 1:if(n=i.sent(),n.title===t){if(0!==n.meanings.length)return r=function(e){return{word:e.newText,definition:""}},o=1===n.meanings.length?c.Either.left(n.meanings[0].replacements.map(r)):c.Either.right(n.meanings.map(function(e){return{meaning:e.title,words:e.replacements.map(r)}})),[2,{originalWord:t,synonymsOrGroups:o,alert:n}];throw new Error("Wrong synonym alert for "+t+": expecting meanings to exists")}throw new Error("Wrong synonym alert: expecting "+t+", got "+n.title)}})})}),function(){if(!x._editor)throw new f.InvariantError("editor should be mounted");return x._editor.synonyms},function(e,t,n){var r=e.match;r.replaced=!0,r.replace(n,!1)}),this.pendingAlertAction=this._state.lens("pendingAlertAction"),this._undoedAction=d.Atom.create(null),this.undoedAlert=this._undoedAction.skip(1).switchMap(function(e){return e?x._visibleAlerts.view(function(t){return t[e.id]}).filter(function(e){return!!e}).take(1):a.Observable.of(null)}),this._log=p.Monitoring.Logging.getLogger("model.editor.ge_engine"),this._tsCheckingStatus=p.Monitoring.TimeSeries.root.getCounter("model.editor.ge_engine.checking_status_inprogress"),this.appliedAlertIds=new Set,this._highlights=this._state.lens("alertHighlights"),this._focusedAlert=this._highlights.lens("focused"),this._highlightedAlert=this._highlights.lens("highlighted"),this._visibleAlerts=this._state.lens("alerts"),this._synonymAlerts=new a.Subject,this._premiumMatches=this._state.lens("premiumMatches"),this._checkingStatus=this._state.lens("checkingStatus"),this._textChangedByUser=new a.Subject,this._editor=null,this._editorEventSubs=null,this._editorRendered=this._unsafeEditorEvent("rendered"),this._editorAlertRemovedOnServer=this._unsafeEditorEvent("serverRemove"),this._editorAlertSelected=this._unsafeEditorEvent("selectedMatch"),this._editorAlertDeselected=this._unsafeEditorEvent("deselectedMatch"),this._editorSending=this._unsafeEditorEvent("sending"),this._capiSocketConnect=this._unsafeEditorEvent("socketConnect"),this._capiSocketStart=this._unsafeEditorEvent("socketStart"),this._capiSocketError=this._unsafeEditorEvent("socketError"),this._capiSocketDisconnect=this._unsafeEditorEvent("disconnect"),this._editorFinishedChecking=this._unsafeEditorEvent("finish"),this._pastedTextSize=new a.Subject,this.recheckingState=d.Atom.create(this._initialText.length>0),this._editorPlagiarismChecked=this._unsafeEditorEvent("plagiarismChecked"),this._editorFix=this._unsafeEditorEvent("fix"),this.alerts=this._visibleAlerts,this.checkingStatus=this._checkingStatus,this.appliedAlertsCount=d.Atom.create(0),this.settings=this._checkingSettings,this.localText=d.Atom.create(this._initialText),this.approximateWordCount=d.Atom.create(f.StringUtils.wordCount(this._initialText)),this.approximateCharCount=d.Atom.create(f.StringUtils.charCount(this._initialText)),this.scores=d.Atom.combine(this.localText.view(function(e){return null!=e?e:""}),this.approximateWordCount,this._visibleAlerts,this._premiumMatches,function(e,t,n,r){return b.calculateScores(e.length,t||0,Object.keys(n).filter(function(e){return!x.appliedAlertIds.has(e)}).map(function(e){return n[e].alert}),r.length)}),this.alertsCount=this._visibleAlerts.view(function(e){var t=m.createChecksDefaultState(0);return Object.keys(e).map(function(t){return e[t].alert}).forEach(function(e){switch(e.group){case _.AlertGroup.contextualSpelling:t.contextualSpelling++;break;case _.AlertGroup.enhancement:t.enhancement++;break;case _.AlertGroup.grammar:t.grammar++;break;case _.AlertGroup.plagiarism:t.plagiarism++;break;case _.AlertGroup.punctuation:t.punctuation++;break;case _.AlertGroup.sentenceStructure:t.sentenceStructure++;break;case _.AlertGroup.style:t.style++;break;case _.AlertGroup.synonym:break;default:throw new TypeError("Unknown alert group: "+e.group)}}),t}),this.premiumAlertsCount=this.scores.view("premiumAlerts"),this.textChangedByUser=this._textChangedByUser.distinctUntilChanged().skipWhile(function(e){return e===x._initialText}),this.focusedAlert=d.Atom.combine(this._visibleAlerts,this._focusedAlert,function(e,t){return x._getSynonymAlert(e)||t}),this.highlightedAlert=this._highlightedAlert}return e.prototype._unsafeEditorEvent=function(e){var t=this;return a.Observable.fromEventPattern(function(n){if(!t._editor)throw new f.InvariantError("editor should be mounted");t._editor.on(e,n)},function(n){if(!t._editor)throw new f.InvariantError("editor should be mounted");t._editor.off(e,n)},function(e){return e})},e.prototype.updatePastedTextSize=function(e){this._pastedTextSize.next(e)},e.prototype._mergeUndoedAlert=function(e){var t=this._undoedAction.get();if(t){var n=e.find(function(e){return e.value===t.value&&e.rawMatch.pname===t.rawMatch.pname&&e.rawMatch.begin===t.rawMatch.begin});n&&n.id!==t.id&&(this._visibleAlerts.modify(function(e){var r=e[t.id];return Object.assign({},e,(o={},o[t.id]=null,o),(i={},i[n.id]={alert:y.createAlert(n),highlightPosition:r.highlightPosition},i));var o,i}),this._focusedAlert.modify(function(e){return e.id===t.id?{id:n.id,source:"undo"}:e}),this._highlightedAlert.modify(function(e){return e&&e===t.id?n.id:e}))}},e.prototype._updateRemovedAlerts=function(e){var t=this;this._focusedAlert.modify(function(e){return e.id&&!t._unsafeGetMatchById(e.id)?{id:null,source:null}:e}),this._highlightedAlert.modify(function(e){return e&&!t._unsafeGetMatchById(e)?null:e}),this._visibleAlerts.modify(function(t){var n=e.filter(function(e){return i(e)&&void 0!==t[e.id]}),r={};return n.forEach(function(e){return r[e.id]=t[e.id]}),r}),this.pendingAlertAction.modify(function(e){return e&&v.AppliedAlertAction.isSingle(e)&&!t._unsafeGetMatchById(e.alertId)?null:e})},e.prototype._updateAddedAlerts=function(e){var t=this,n=function(){return t._domElement.getBoundingClientRect()};this._visibleAlerts.modify(function(r){var o=e.filter(i),s={};return o.map(function(e){try{return{match:e,highlightPosition:f.DOM.absToRelativeBuggy(e.getEl()&&e.getEl().getClientRects()[0],n())}}catch(e){return t._log.error(e),null}}).forEach(function(e){if(e)try{var n=y.createAlert(e.match);"synonym"===n.kind&&t._isDenali?t._synonymAlerts.next(n):s[e.match.id]={alert:r[e.match.id]?r[e.match.id].alert:n,highlightPosition:e.highlightPosition}}catch(e){t._log.error("Failed to create alert, skip it",e)}}),s})},e.prototype._updatePremiumAlertCount=function(e){this._premiumMatches.set(e.getMatches().filter(function(e){return!e.rawMatch.free&&"synonyms"!==e.rawMatch.action}))},e.prototype._getCurrentVisibleMatches=function(e){return e.getFiltered().filter(function(e){return e.getEl()})},e.prototype._subscribeToUpdateCheckingStatus=function(){var e=this;return a.Observable.merge(this._editorSending.mapTo(1),this._editorFinishedChecking.mapTo(-1),this._editorPlagiarismChecked.mapTo(-1),this._capiSocketDisconnect.mapTo(NaN)).scan(function(e,t){return Number.isNaN(t)?0:Math.max(0,e+t)},0).map(function(e){return 0===e?v.CheckingStatus.finished:v.CheckingStatus.inProgress}).subscribe(function(t){return e._checkingStatus.set(t)})},e.prototype._checkPlagiarism=function(e){var t=this;void 0===e&&(e=100),setTimeout(function(){t._editor&&t._checkingSettings.plagiarismEnabled.get()&&t._editor.checkPlagiarism()},e)},e.prototype.mount=function(){var e=this;f.invariant(null==this._editorEventSubs&&null==this._editor,"editor should not be mounted");var t,n=this._dialectSetting.dialect.get();try{t=this._getCachedMatches()}catch(e){this._log.error("could not load cached alerts",e)}this._editor=o(this._domElement,this._textAreaType,this._textAreaWrapperElementId,this._docId,this._initialText,this._capiWsUrl,function(){return e._checkingSettings.plagiarismEnabled.get()},n,function(t){return e._checkingSettings.isAlertGroupEnabled(t)},function(){return e._checkingSettings.genre.get()},t||[],this._telemetry,this._capiClientName,this._isDenali),this._editorEventSubs=[this._editorRendered.subscribe(function(){e._editor&&(e._undoedAction.get()&&e._mergeUndoedAlert(e._getCurrentVisibleMatches(e._editor)),e._updateRemovedAlerts(e._getCurrentVisibleMatches(e._editor)),e._updatePremiumAlertCount(e._editor))}),a.Observable.merge(this._editorRendered,a.Observable.fromEvent(window,"resize")).auditTime(50).subscribe(function(){e._editor&&(e._updateAddedAlerts(e._getCurrentVisibleMatches(e._editor)),e._updatePremiumAlertCount(e._editor))}),a.Observable.merge(this._editorRendered,this._checkingStatus.skip(1).filter(function(e){return e===v.CheckingStatus.finished})).auditTime(1e3).subscribe(function(){e._editor&&e._tryCacheCurrentAlerts()}),this._editorRendered.subscribe(function(){if(e._editor){var t=e._editor.getText();e.localText.set(t),e._textChangedByUser.next(e._editor.getText())}}),this.localText.audit(function(e){return a.Observable.timer(e&&e.length>1e3?1e3:100)}).startWith(this.localText.get()).subscribe(function(t){e.approximateWordCount.set(f.StringUtils.wordCount(t)),e.approximateCharCount.set(f.StringUtils.charCount(t))}),this._editorAlertRemovedOnServer.subscribe(function(t){e.appliedAlertIds.has(t.id)&&(t.cancelServerRemove=!0);var n=e._undoedAction.get();n&&n.id===t.id&&(t.cancelServerRemove=!0,e._undoedAction.set(null))}),this._editorAlertSelected.subscribe(function(t){f.invariant(null===e._focusedAlert.get().id,"alert selected without prior deselect:\n            had "+e._focusedAlert.get()+" selected,\n            selecting "+t.id),e._focusedAlert.set({id:t.id,source:"text"})}),this._editorAlertDeselected.subscribe(function(t){f.invariant(e._focusedAlert.get().id===t.id||e._highlightedAlert.get()===t.id,"other alert deselected:\n            had "+e._focusedAlert.get()+" selected,\n            deselecting "+t.id),e._focusedAlert.modify(function(e){return e.id===t.id?{id:null,source:null}:e}),e._highlightedAlert.modify(function(e){return e===t.id?null:e})}),this._subscribeToUpdateCheckingStatus(),this._checkingSettings.genre.skip(1).subscribe(function(t){e._editor&&(e.pendingAlertAction.get()&&e.commitLastAlertAction(),e._editor.hardReset(),e._checkPlagiarism(1e3))}),this._checkingSettings.checksEnabled.skip(1).subscribe(function(t){e._editor&&(e.pendingAlertAction.get()&&e.commitLastAlertAction(),e._editor.render(),e._checkPlagiarism())}),n.nonEmpty()?a.Subscription.EMPTY:this._editorFinishedChecking.map(function(e){return e&&e.dialect}).filter(function(e){return h.isDialectString(e)}).first().subscribe(function(t){return e._dialectSetting.setDialectWeak(t)}),a.Observable.merge(this._capiSocketDisconnect.filter(function(e){return 4095!==e.code&&1001!==e.code}).map(function(e){var t=e.code,n=e.reason;return{type:"disconnected",error:new l.WSError({status:n,code:t,message:"Cannot connect to CAPI"})}}),this._capiSocketStart.mapTo({type:"connected"})).distinctUntilChanged(function(e,t){return e.type===t.type}).switchMap(function(e){return"connected"===e.type?a.Observable.of(e):a.Observable.of(e).delay(5e3)}).subscribe(function(t){return e._capiConnectivity.set(t)}),this._capiSocketConnect.subscribe(function(t){var n=e.pendingAlertAction.get();if(e._editor&&n)if(e._log.debug("Pending alert action on CAPI connect: kind = "+n.kind+";\naction = "+(v.AppliedAlertAction.isSingle(n)&&n.action)),v.AppliedAlertAction.isSingle(n)){var r=e._unsafeGetMatchById(n.alertId),o=r&&!r.undoed;o||e._log.error("Alerts not in sync: pending undone alert action")}else v.AppliedAlertAction.isBatchIgnore(n)&&!n.alertIds.some(function(t){var n=e._unsafeGetMatchById(t);return n&&!n.undoed||!1})&&e._log.error("Alerts not in sync: pending undone alert action")}),this._capiSocketError.map(function(e){var t=e.code,n=e.reason;return new l.WSError({status:n,code:t,message:"CAPI socket error"})}).distinctUntilChanged(function(e,t){return e.code===t.code}).subscribe(function(t){return e._log.warn("CAPI socket error",t)}),this._editorFix.subscribe(f.Extension.notifications.sendEditorFix),this._undoedAction.subscribe(function(t){t&&t.id&&(e.setFocusedAlert(t.id,"undo"),e.setHighlightedAlert(t.id))}),a.Observable.merge(this.textChangedByUser.debounceTime(1e3).mapTo(!0),this.textChangedByUser.mapTo(!1),this._checkingSettings.genre.mapTo(!0)).distinctUntilChanged().switchMap(function(t){return t?e._checkingStatus.switchMap(function(e){return e===v.CheckingStatus.inProgress?a.Observable.timer(12e3):a.Observable.empty()}):a.Observable.empty()}).subscribe(function(){return e._tsCheckingStatus.increment()})],this._editor.run(),this._checkPlagiarism()},e.prototype._unsafeGetMatchById=function(e){if(!this._editor)throw new Error("editor should be mounted");return this._editor.matches.byId(e)},e.prototype._getMatchById=function(e){var t=this._unsafeGetMatchById(e);if(!t)throw new f.InvariantError("expected non-null match #"+e);return t},e.prototype._updateHighlights=function(e,t){var n=this;[e.focused.id,e.highlighted].forEach(function(e){var t=null!==e&&n._unsafeGetMatchById(e);t&&t.deselect(!0)}),[t.focused.id,t.highlighted].forEach(function(e){try{null!==e&&n._getMatchById(e).select(!0)}catch(e){n._log.warn("Update highlights failed",e)}})},e.prototype._tryCacheCurrentAlerts=function(){if(!this._editor)throw new f.InvariantError("editor should be mounted");try{this._cacheSerializableMatches(r(this._editor.getMatches().filter(function(e){return"synonyms"!==e.rawMatch.action})))}catch(e){this._log.error("could not cache alerts",e)}},e.prototype.unmount=function(){if(!this._editor||!this._editorEventSubs)throw new f.InvariantError("editor should be mounted");this.pendingAlertAction.get()&&this.commitLastAlertAction(),this._tryCacheCurrentAlerts(),this._editorEventSubs.forEach(function(e){return e.unsubscribe()}),this._editorEventSubs=null,this._editor.exit(),this._editor=null},e.prototype.setDocumentContent=function(e){if(!this._editor)throw new f.InvariantError("editor should be mounted");this.pendingAlertAction.get()&&this.commitLastAlertAction(),this._editor.setText(e)},e.prototype.skipInputEvents=function(e){var t=(void 0===e?{turnBack:!1}:e).turnBack;if(!this._editor)throw new f.InvariantError("editor should be mounted");this._editor.inputListener.skipInputEvents(!1!==t||void 0)},e.prototype._applyAlert=function(e,t){if(!this._editor)throw new f.InvariantError("editor should be mounted");var n=this._getMatchById(e);switch(t.action){case"replace":n.replaced=!0,n.replace(t.replacementText,!1),t.isSynonym&&n.removeUnderline(),this.appliedAlertsCount.modify(function(e){return e+1});break;case"ignore":case"addToDictionary":case"acknowledge":this._isDenali?(n.replaced=!0,n.getEl().className=this._editor.getMatchClass(n,"")):n.getEl().classList.add("gr_replaced");break;default:return f.assertNever(t)}this.pendingAlertAction.set(v.AppliedAlertAction.createSingle(e,t)),this.appliedAlertIds.add(e)},e.prototype.batchIgnore=function(e){var t=this;if(!this._editor)throw new f.InvariantError("editor should be mounted");var n=this.pendingAlertAction.get();if(n&&(this.commitLastAlertAction(),v.AppliedAlertAction.isBatchIgnore(n)&&n.alertIds.length>0&&JSON.stringify(n.alertIds)===JSON.stringify(e)))throw new f.InvariantError("alert was already applied");try{e.forEach(function(e){return requestAnimationFrame(function(){t._getMatchById(e).replaced=!0,t.appliedAlertIds.add(e)})}),this.pendingAlertAction.set(v.AppliedAlertAction.createBatchIgnore(e))}catch(e){this._log.warn("Apply alert failed, action: batchIgnore",e)}this._focusedAlert.set({id:null,source:null}),this.setHighlightedAlert(null)},e.prototype.applyAlert=function(e,t){if(!this._editor)throw new f.InvariantError("editor should be mounted");var n=this.pendingAlertAction.get();if(n&&(this.commitLastAlertAction(),v.AppliedAlertAction.isSingle(n)&&n.alertId===e))throw new f.InvariantError("alert was already applied");try{this._applyAlert(e,t)}catch(e){this._log.warn("Apply alert failed, action: "+t.action,e)}this._focusedAlert.set({id:null,source:null}),this.setHighlightedAlert(null),this._undoedAction.set(null)},e.prototype.commitLastAlertAction=function(){var e=this;if(!this._editor)throw new f.InvariantError("editor should be mounted");var t=this.pendingAlertAction.get();if(!t)throw new f.InvariantError("can not commit when no action was applied");if(v.AppliedAlertAction.isBatchIgnore(t))return t.alertIds.forEach(function(t){e._getMatchById(t).ignore()}),this.appliedAlertIds.clear(),void this.pendingAlertAction.set(null);if("replace"===t.action.action&&t.action.isSynonym)return void this.pendingAlertAction.set(null);try{var n=this._getMatchById(t.alertId);switch(t.action.action){case"replace":n.remove();break;case"ignore":n.ignore();break;case"addToDictionary":this._demoMode?n.remove():n.addToDict();break;case"acknowledge":n.acknowledged();break;default:return f.assertNever(t.action)}}catch(e){this._log.warn("commitLastAlertAction failed",e)}this.appliedAlertIds.clear(),this.pendingAlertAction.set(null)},e.prototype._removeUndoStyles=function(e){this._isDenali?(e.replaced=!1,e.getEl().className=this._editor.getMatchClass(e,"")):e.getEl().classList.remove("gr_replaced")},e.prototype.undoLastAlertAction=function(){var e=this;if(!this._editor)throw new f.InvariantError("editor should be mounted");var t=this.pendingAlertAction.get();if(!t)throw new f.InvariantError("can not undo when no action was applied");if(v.AppliedAlertAction.isBatchIgnore(t))return void t.alertIds.forEach(function(t){e._removeUndoStyles(e._getMatchById(t))});var n=this._getMatchById(t.alertId);"replace"===t.action.action&&(n.undo(),this.appliedAlertIds.delete(t.alertId)),this._removeUndoStyles(n),this._undoedAction.set(this._unsafeGetMatchById(t.alertId)),this.pendingAlertAction.set(null)},e.prototype.setFocusedAlert=function(e,t){f.invariant(null!==this._editor,"editor should be mounted");var n=this._highlights.get();this._focusedAlert.set({id:e,source:t}),this._updateHighlights(n,this._highlights.get())},e.prototype.setHighlightedAlert=function(e){f.invariant(null!==this._editor,"editor should be mounted");var t=this._highlights.get();this._highlightedAlert.set(e),this._updateHighlights(t,this._highlights.get())},e.prototype.getAllAlerts=function(){return this._editor?this._editor.getMatches().filter(function(e){return _.alertGroupFromString(e.rawMatch.group)!==_.AlertGroup.plagiarism&&"synonyms"!==e.rawMatch.action}).map(y.createAlert):[]},e.prototype._getSynonymAlert=function(e){var t=Object.keys(e).find(function(t){return e[t].alert.group===_.AlertGroup.synonym});return t?{id:t}:null},e.prototype.isFocused=function(e){return this.focusedAlert.view(function(t){return t.id===e})},e.prototype.getCurrentSelection=function(){if(!this._editor)throw new f.InvariantError("editor should be mounted");var e=this._editor.getSelection();return e?{start:e.s,end:e.e}:null},e.prototype.setSelection=function(e){if(!this._editor)throw new f.InvariantError("editor should be mounted");this._editor.setCursor({s:e.start,e:e.end})},e.prototype.getUnderlinedHtml=function(){if(!this._editor)throw new f.InvariantError("editor should be mounted");return this._editor.dom.cloneVal.innerHTML},e}();t.GrammarlyEditorEngine=S},566:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(318),i=n(6),s=n(7);!function(e){e[e.Querying=0]="Querying",e[e.Ready=1]="Ready"}(r=t.SynonymsStateKind||(t.SynonymsStateKind={}));var a;!function(e){function t(e){return null!==e&&e.kind===r.Ready}function n(e){return null!==e&&e.kind===r.Querying}e.isReady=t,e.isQuerying=n}(a=t.SynonymsModel||(t.SynonymsModel={}));var c=function(){function e(e){this._query=e,this.state=s.Atom.create({kind:r.Ready}),this._log=i.Monitoring.Logging.getLogger("editor.SynonymsModelImpl"),this._cache=new o.LRUCache(20)}return e.prototype.query=function(e){var t=this;this._log.trace("SynonymsQuery: "+e.word),this.state.set({kind:r.Querying,query:e});var n=this._getKey(e),o=this._cache.get(n);if(void 0!==o){this._log.trace("Cache hit for "+n);var i={kind:r.Ready,query:e,synonyms:o};this._onResponse(i)}else this._query(e.start,e.word).then(function(o){var i={kind:r.Ready,query:e,synonyms:o};t._cache.put(n,o),t._onResponse(i)}).catch(function(){t.abortQuery()})},e.prototype.abortQuery=function(){a.isQuerying(this.state.get())&&this.state.set({kind:r.Ready})},e.prototype._getKey=function(e){return e.word+"#"+e.start},e.prototype._onResponse=function(e){this._log.trace("_onResponse() newState: "+e);var t=this.state.get();a.isQuerying(t)&&t.query.word===e.query.word?this.state.set(e):this._log.trace("Discarding result for "+e.query.word)},e}();t.SynonymsModelImpl=c},567:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),o=n(14),i=n(3);!function(e){var t;t||(t={}),e.genUuid=function(){return i.StringUtils.alphanumeric(12)},e.defaultState={visible:!1,content:o.None},e.ContextTypes={tooltip:r.object};var n=function(){function t(t){var n=this;this._state=t,this.visible=this._state.lens("visible"),this.content=this._state.lens("content"),this.hasContent=this._state.view(function(e){return e.content.nonEmpty()}),this.state=this._state.view(function(e){return e.content.filter(function(){return e.visible})}),this.show=function(){n.visible.set(!0)},this.hide=function(){n._state.set(e.defaultState)}}return t.prototype.setContent=function(e){this.content.set(o.Some(e))},t.prototype.cleanContent=function(t){this._state.modify(function(n){return n.content.exists(function(e){return e.uuid===t})?e.defaultState:n})},t}();e.Impl=n}(t.Tooltip||(t.Tooltip={}))},568:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),o=n(75),i=n(6),s=n(599);t.Error500Page=function(){var e=o.getTextResources("webeditor").base.error500page;return i.Monitoring.TimeSeries.root.getMetric("error").getCounter("500").increment(),r.createElement(s.ErrorPage,{title:e.title,description:e.description})}},571:function(e,t,n){n(871),e.exports=n(1443)},572:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(1412),n(1416).initializeMonitoring();var r=n(13),o=n(576),i=n(1389);o.render(r.createElement(i.Main,null),document.getElementById("page"))},573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(13),i=n(7),s=n(75),a=n(869);t.DefaultSVGLinearGradient=function(){return o.createElement("svg",null,o.createElement("defs",null,o.createElement("linearGradient",{id:"iconGradient",x1:"0",x2:"1",y1:"0",y2:"1"},o.createElement("stop",{offset:"0%",stopColor:"#cdd1e1"}),o.createElement("stop",{offset:"100%",stopColor:"#9299b5"}))))};var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){return o.createElement(i.F.i,r.__assign({},i.classes(a.icon,this.props.className),{"data-disabled":this.context.disabled,"data-hovered":this.context.hovered,"data-active":this.context.active}),o.createElement("svg",{width:this.props.width,viewBox:this.props.viewBox,className:this.props.dontScale?"":a.holder},this.props.children))},t.contextTypes=s.ElementState.contextTypes,t}(o.Component);t.IconWrapper=c;!function(e){e.Library=function(e){var t=e.className,n=e.width,r=void 0===n?24:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 24 16"},o.createElement("path",{d:"M22.16 8.5L18.44 2c-.36-.62-1.02-1-1.74-1H7.28c-.7 0-1.37.38-1.73 1L1.72 8.5h5.96c.27 0 .5.22.5.5 0 1.74 1.85 3.5 3.82 3.5 1.92 0 3.53-1.7 3.53-3.5 0-.28.22-.5.5-.5h6.13zm.34 1h-6c-.27 2.15-2.2 4-4.5 4-2.33 0-4.5-1.9-4.8-4H1.5V13c0 1.1.9 2 2 2h17c1.1 0 2-.9 2-2V9.5zM7.28 0h9.42c1.08 0 2.07.58 2.6 1.5l4.13 7.2c.05.1.07.17.07.26V13c0 1.66-1.34 3-3 3h-17c-1.66 0-3-1.34-3-3V8.74c0-.08.02-.17.07-.25L4.7 1.47C5.22.56 6.2 0 7.27 0z",stroke:"none"}))},e.Plagiarism=function(e){var t=e.className,n=e.width,r=void 0===n?19:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 20 16"},o.createElement("path",{d:"M11.1 7.38c-.27 0-.48-.2-.48-.48V.48c0-.27.2-.48.47-.48h6.57c.27 0 .48.2.48.48V6.9c0 4.5-1.65 7.37-5.57 9.06-.23.1-.5 0-.6-.2l-1.4-2.6c-.15-.23-.04-.54.2-.65 2.35-1.05 3.1-2.3 3.17-5.12H11.1zm6.1-.48V.96h-5.63v5.46h2.87c.26 0 .47.22.47.48 0 3.32-.78 5-3.25 6.26l.94 1.74c3.26-1.54 4.6-4 4.6-8zm-13.75.48H.6c-.28 0-.5-.2-.5-.48V.48C.1.2.33 0 .6 0h6.56c.27 0 .48.2.48.48V6.9c0 4.5-1.65 7.37-5.57 9.06-.23.1-.5 0-.6-.2l-1.4-2.6c-.14-.23-.04-.54.2-.65 2.35-1.05 3.1-2.3 3.18-5.12zM6.7 6.9V.96H1.05v5.46h2.87c.26 0 .48.22.48.48 0 3.32-.8 5-3.26 6.26l.95 1.74c3.25-1.54 4.6-4 4.6-8z",stroke:"none"}))},e.PlagiarismPublication=function(e){var t=e.className,n=e.width,r=void 0===n?16:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 16 16"},o.createElement("path",{d:"M16 5.528V16H2c-1.105 0-2-.895-2-2V3.5l.05.048C.017 3.37 0 3.188 0 3c0-1.657 1.343-3 3-3h12.5c.412 0 .647.47.4.8-.563.75-.838 1.482-.838 2.2 0 .718.275 1.45.838 2.2.076.102.107.217.1.328zM14.588 1H3c-1.105 0-2 .895-2 2s.895 2 2 2h11.588c-.348-.658-.525-1.326-.525-2 0-.674.177-1.342.525-2z",fillRule:"nonzero",fill:"#A6ADC9",stroke:"none"}))},e.Proofread=function(e){var t=e.className,n=e.width,r=void 0===n?24:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 24 21"},o.createElement("path",{d:"M13.97 15.08c2.5 0 4.56-2.03 4.56-4.55 0-2.5-2.06-4.53-4.56-4.53-2.5 0-4.55 2.03-4.55 4.55 0 2.5 2.06 4.53 4.55 4.53zm-.62 7.9L14.3 24H7.58C6.17 24 5 22.84 5 21.43v-.7c0-2.82 2.2-5.2 5-5.4.14 0 .3.06.4.16.98.9 2.24 1.43 3.57 1.43 1.34 0 2.63-.52 3.58-1.44.1-.1.23-.17.38-.17 2.05.15 3.78 1.45 4.56 3.24l-.8.83c-.5-1.6-1.9-2.8-3.6-3-1.14 1-2.58 1.56-4.13 1.56-1.54 0-2.98-.54-4.1-1.57-2.17.27-3.84 2.12-3.84 4.33v.7c0 .85.7 1.54 1.54 1.54h5.78zm.62-15.95c1.93 0 3.53 1.57 3.53 3.52 0 1.93-1.57 3.52-3.53 3.52-1.92 0-3.52-1.56-3.52-3.52 0-1.95 1.6-3.52 3.52-3.52zm3.4 14.66l3.45 3.78 6.8-7.5c.2-.2.5-.2.72-.02.2.18.22.5.03.7l-7.18 7.9c-.2.22-.55.22-.75 0l-3.82-4.2c-.2-.2-.17-.52.03-.7.2-.2.52-.18.7.03z",transform:"translate(-5 -6)",stroke:"none"}))},e.Exit=function(e){var t=e.className,n=e.width,s=void 0===n?14:n;return o.createElement(c,r.__assign({},i.classes(a.exitIcon,t),{width:s,viewBox:"0 0 14 10"}),o.createElement("path",{d:"M8.08 0l4.96 4.96L8 10M1.08 0l4.96 4.96L1 10"}))},e.More=function(e){var t=e.className,n=e.width,r=void 0===n?10:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 10 6"},o.createElement("path",{d:"M5 4.3L.85.14c-.2-.2-.5-.2-.7 0-.2.2-.2.5 0 .7L5 5.7 9.85.87c.2-.2.2-.5 0-.7-.2-.2-.5-.2-.7 0L5 4.28z",stroke:"none"}))},e.Download=function(e){var t=e.className,n=e.width,r=void 0===n?16:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 16 18"},o.createElement("path",{d:"M7.5 11.06V1c0-.27.22-.5.5-.5s.5.23.5.5v10.04l3.15-3.14c.2-.2.5-.2.7 0 .2.2.2.5 0 .7L8 12.97 3.64 8.62c-.2-.2-.2-.5 0-.7.2-.2.5-.2.7 0l3.15 3.14zm-7 2c0-.26.22-.5.5-.5s.5.24.5.5v2.95c0 .28.22.5.5.5h12c.28 0 .5-.22.5-.5v-3c0-.28.22-.5.5-.5s.5.22.5.5v3c0 .84-.67 1.5-1.5 1.5H2C1.2 17.5.5 16.84.5 16v-2.93z",stroke:"none"}))},e.Print=function(e){var t=e.className,n=e.width,r=void 0===n?18:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 18 18"},o.createElement("path",{d:"M2.5 3.5V1c0-.28.22-.5.5-.5h12c.28 0 .5.22.5.5v2.5H17c.28 0 .5.22.5.5v8c0 .28-.22.5-.5.5h-1.5V17c0 .28-.22.5-.5.5H3c-.28 0-.5-.22-.5-.5v-4.5H1c-.28 0-.5-.22-.5-.5V4c0-.28.22-.5.5-.5h1.5zm0 8V8c0-.28.22-.5.5-.5h12c.28 0 .5.22.5.5v3.5h1v-7h-15v7h1zm1-3v8h11v-8h-11zm0-7v2h11v-2h-11zm2.5 10c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h6c.28 0 .5.22.5.5s-.22.5-.5.5H6zm0 3c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h4c.28 0 .5.22.5.5s-.22.5-.5.5H6z",stroke:"none"}))},e.Copy=function(e){var t=e.className,n=e.width,r=void 0===n?18:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 18 18"},o.createElement("path",{d:"M13.5 7.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h2.38c.9 0 1.62.73 1.62 1.62v7.76c0 .9-.73 1.62-1.62 1.62H8.12c-.9 0-1.62-.73-1.62-1.62V13.5c0-.28.22-.5.5-.5s.5.22.5.5v2.38c0 .34.28.62.62.62h7.76c.34 0 .62-.28.62-.62V8.12c0-.34-.28-.62-.62-.62H13.5zM.5 2C.5 1.17 1.18.5 2 .5h8c.83 0 1.5.68 1.5 1.5v8c0 .83-.68 1.5-1.5 1.5H2c-.83 0-1.5-.68-1.5-1.5V2zm1 0v8c0 .27.23.5.5.5h8c.27 0 .5-.23.5-.5V2c0-.27-.23-.5-.5-.5H2c-.27 0-.5.23-.5.5z",stroke:"none"}))},e.Share=function(e){var t=e.className,n=e.width,r=void 0===n?18:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 18 18"},o.createElement("path",{d:"M15.7 5.45h-1.77c-4.33 0-7.85 3.5-7.85 7.83 0 .28-.22.5-.5.5-.27 0-.5-.22-.5-.5 0-4.88 3.97-8.83 8.85-8.83h1.84L12.6 1.28c-.2-.2-.2-.5 0-.7.2-.2.5-.2.7 0l4.35 4.34-4.36 4.36c-.2.2-.52.2-.7 0-.2-.2-.2-.5 0-.7l3.1-3.13zM.5 13.08c0-.28.22-.5.5-.5s.5.22.5.5v2.94c0 .27.22.5.5.5h12c.28 0 .5-.23.5-.5v-3c0-.3.22-.5.5-.5s.5.2.5.5v3c0 .82-.67 1.5-1.5 1.5H2C1.2 17.5.5 16.83.5 16v-2.94z",stroke:"none"}))},e.Stats=function(e){var t=e.className,n=e.width,r=void 0===n?16:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 16 16"},o.createElement("path",{d:"M2.5 12h-1V5h1v7zm-1 0V5c0-.67 1-.67 1 0v7c0 .67-1 .67-1 0zm4 0V6c0-.67 1-.67 1 0v6c0 .67-1 .67-1 0zm4 0V4c0-.67 1-.67 1 0v8c0 .67-1 .67-1 0zm4 0V1.14c0-.67 1-.67 1 0V12c0 .67-1 .67-1 0zm-13 3.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h15c.28 0 .5.22.5.5s-.22.5-.5.5H.5z",stroke:"none"}))},e.Star=function(e){var t=e.className,n=e.width,s=void 0===n?16:n;return o.createElement(c,r.__assign({},i.classes(t,a.starIcon),{width:s,viewBox:"0 0 16 16"}),o.createElement("path",{d:"M6.65 10.8l-4.02 2.72L4.03 9c.08-.24 0-.5-.2-.65L-.03 5.5l4.86-.1c.24 0 .45-.16.53-.38l1.6-4.5 1.62 4.5c.08.22.3.38.54.38l4.85.1-3.85 2.85c-.2.15-.28.4-.2.64l1.4 4.52-4.02-2.7c-.2-.14-.46-.14-.65 0z",transform:"translate(1 1)",strokeLinejoin:"round"}))},e.New=function(e){var t=e.className,n=e.width,r=void 0===n?18:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 18 18"},o.createElement("path",{d:"M9.5 8.5H14c.28 0 .5.22.5.5s-.22.5-.5.5H9.5V14c0 .28-.22.5-.5.5s-.5-.22-.5-.5V9.5H4c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h4.5V4c0-.28.22-.5.5-.5s.5.22.5.5v4.5zm-.5 9C4.3 17.5.5 13.7.5 9S4.3.5 9 .5s8.5 3.8 8.5 8.5-3.8 8.5-8.5 8.5zm0-1c4.14 0 7.5-3.36 7.5-7.5 0-4.14-3.36-7.5-7.5-7.5-4.14 0-7.5 3.36-7.5 7.5 0 4.14 3.36 7.5 7.5 7.5z",stroke:"none"}))},e.Dict=function(e){var t=e.className,n=e.width,r=void 0===n?17:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 17 21"},o.createElement("path",{d:"M1.5 15.26c.53-.47 1.23-.76 2-.76h9V10c0-.28.22-.5.5-.5s.5.22.5.5v5c0 .28-.22.5-.5.5H3.5c-1.1 0-2 .9-2 2s.9 2 2 2H13c.28 0 .5.22.5.5s-.22.5-.5.5H3.5c-1.66 0-3-1.34-3-3V5.14c0-.9.66-1.64 1.5-1.64h5c.28 0 .5.22.5.5s-.22.5-.5.5H2c-.26 0-.5.27-.5.64v10.12zm11-11.76V1c0-.28.22-.5.5-.5s.5.22.5.5v2.5H16c.28 0 .5.22.5.5s-.22.5-.5.5h-2.5V7c0 .28-.22.5-.5.5s-.5-.22-.5-.5V4.5H10c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h2.5zM3.5 18c-.28 0-.5-.22-.5-.5s.22-.5.5-.5H12c.28 0 .5.22.5.5s-.22.5-.5.5H3.5z",stroke:"none"}))},e.Ignore=function(e){var t=e.className,n=e.width,r=void 0===n?18:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 18 19"},o.createElement("path",{d:"M5 3.5v-1c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2v1h4c.28 0 .5.22.5.5s-.22.5-.5.5h-1.53l-.8 11.2c-.12 1.58-1.42 2.8-3 2.8H6.33c-1.58 0-2.88-1.22-3-2.8l-.8-11.2H1C.72 4.5.5 4.28.5 4s.22-.5.5-.5h4zm-1.46 1l.8 11.14c.07 1.05.94 1.86 2 1.86h5.33c1.05 0 1.92-.8 2-1.86l.8-11.14H3.53zM6 2.5v1h6v-1c0-.55-.45-1-1-1H7c-.55 0-1 .45-1 1zM6.75 7c0-.28.22-.5.5-.5s.5.22.5.5v7.5c0 .28-.22.5-.5.5s-.5-.22-.5-.5V7zm3.5 0c0-.28.22-.5.5-.5s.5.22.5.5v7.5c0 .28-.22.5-.5.5s-.5-.22-.5-.5V7z",stroke:"none"}))},e.Report=function(e){var t=e.className,n=e.width,r=void 0===n?15:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 15 17"},o.createElement("path",{d:"M1.03 2.57V9.8h12.19l-2.96-3c-.2-.2-.2-.5-.02-.7l3.08-3.53H1.06h-.03zm0-1.04h13.43c.43 0 .67.53.38.86l-3.5 4 3.48 3.56c.32.33.1.88-.37.88H1.05h-.02v5.65c0 .27-.23.5-.5.5-.3 0-.53-.23-.53-.5V.5C0 .24.23 0 .52 0c.28 0 .5.23.5.5v1.03z",stroke:"none"}))},e.Expand=function(e){var t=e.className,n=e.width,r=void 0===n?18:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 18 5"},o.createElement("path",{d:"M2.5 4.5c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm0-1c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm6.5 1c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm0-1c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm6.5 1c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm0-1c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1z",stroke:"none"}))},e.Reference=function(e){var t=e.className,n=e.width,r=void 0===n?13:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 13 19"},o.createElement("path",{d:"M3 2v1h7V2h1.5c.83 0 1.5.67 1.5 1.5v14c0 .83-.68 1.5-1.5 1.5h-10C.67 19 0 18.33 0 17.5v-14C0 2.67.68 2 1.5 2H3zm8.5 1h-10c-.27 0-.5.23-.5.5v14c0 .28.22.5.5.5h10c.27 0 .5-.23.5-.5v-14c0-.28-.22-.5-.5-.5zm-7.65 7.6l1.68 1.7 3.62-3.65c.2-.2.5-.2.7 0 .2.2.2.5 0 .7L5.53 13.7l-2.38-2.4c-.2-.2-.2-.5 0-.7.2-.2.5-.2.7 0zM9 3.5v-1c0-.56-.45-1-1-1H5c-.56 0-1 .44-1 1v1h5zm-6-1c0-1.1.9-2 2-2h3c1.1 0 2 .9 2 2V4c0 .28-.23.5-.5.5h-6c-.27 0-.5-.22-.5-.5V2.5z",transform:"translate(0 -.5)",stroke:"none"}))},e.Yes=function(e){var t=e.className,n=e.width,s=void 0===n?12:n;return o.createElement(c,r.__assign({},i.classes(t,a.yesIcon),{width:s,viewBox:"0 0 12 10"}),o.createElement("path",{d:"M.54 4.35l2.98 3.12L9.46.53",fill:"none",fillRule:"evenodd",strokeLinecap:"round",transform:"translate(1 1)"}))},e.Checkmark=function(e){var t=e.className,n=e.width,r=void 0===n?32:n;return o.createElement(c,{width:r,className:t,viewBox:"0 0 33 32"},o.createElement("defs",{key:"defs"},o.createElement("polyline",{id:"path-1",points:"7.35 14.35 11.9839764 19.5363636 27.65 3.5"})),o.createElement("g",{key:"g",id:"Zero-states",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},o.createElement("g",{id:"After-fixing-last-issue",transform:"translate(-1296.000000, -17.000000)"},o.createElement("g",{id:"Group",transform:"translate(1298.000000, 19.000000)"},o.createElement("circle",{id:"Oval",stroke:"#F1F2FA",strokeWidth:"3",cx:"14",cy:"14",r:"14"}),o.createElement("g",{id:"Path",strokeLinecap:"round"},o.createElement("use",{stroke:"#FFFFFF",strokeWidth:"6",xlinkHref:"#path-1"}),o.createElement("use",{stroke:"#15C39A",strokeWidth:"3",xlinkHref:"#path-1"}))))))},e.Close=function(e){var t=e.className,n=e.width,s=void 0===n?11:n;return o.createElement(c,r.__assign({},i.classes(t,a.closeIcon),{width:s,viewBox:"0 0 11 10"}),o.createElement("path",{d:"M1.1.5l7.06 7.07M8.16.5L1.1 7.57",fill:"none",fillRule:"evenodd",strokeLinecap:"round",transform:"translate(1 1)"}))},e.QuestionMark=function(e){var t=e.className,n=e.width,s=void 0===n?24:n;return o.createElement(c,r.__assign({},i.classes(t),{width:s,viewBox:"0 0 24 24"}),o.createElement("g",{transform:"translate(1 1)",fillRule:"evenodd"},o.createElement("circle",{cx:"11",cy:"11",r:"11",fillOpacity:"0"}),o.createElement("text",{strokeWidth:"0",fontSize:"15px",fontStyle:"normal",transform:"translate(7, 16.7)"},"?")))},e.Info=function(e){var t=e.className,n=e.width,r=void 0===n?13:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 13 13"},o.createElement("path",{d:"M6.5 12.5c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6zm0-1c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm0-7c-.4 0-.75-.34-.75-.75 0-.4.34-.75.75-.75.4 0 .75.34.75.75 0 .4-.34.75-.75.75zM6 6c0-.28.22-.5.5-.5s.5.22.5.5v3.5c0 .28-.22.5-.5.5S6 9.78 6 9.5V6z",stroke:"none"}))},e.All=function(e){var t=e.className,n=e.width,r=void 0===n?25:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 25 13"},o.createElement("path",{d:"M1.35 6.37l4.82 4.82L16.44.92c.2-.2.5-.2.7 0 .2.2.2.5 0 .7L6.54 12.25c-.2.2-.52.2-.72 0L.65 7.08c-.2-.2-.2-.52 0-.7.2-.2.5-.2.7 0zM20 4.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h4.5c.28 0 .5.22.5.5s-.22.5-.5.5H20zm-3 3c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h4.5c.28 0 .5.22.5.5s-.22.5-.5.5H17zm-3 3c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h4.5c.28 0 .5.22.5.5s-.22.5-.5.5H14z",stroke:"none"}))},e.SynonymLoader=function(e){var t=e.className,n=e.width,r=void 0===n?14:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 14 14"},o.createElement("circle",{cx:"7",cy:"7",r:"6",stroke:"#A6ADC9",strokeWidth:"1",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeDasharray:"25,300",strokeLinejoin:"round"}))},e.Undo=function(e){var t=e.className,n=e.width,r=void 0===n?18:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 18 12"},o.createElement("g",{fill:"none",stroke:"#E4E6F2",strokeLinecap:"round"},o.createElement("path",{d:"M4.85498.551514l-3.5 3.49659 3.49435 3.50341"}),o.createElement("path",{d:"M2.00033 4h11.07438c2.03911 0 3.692136 1.534823 3.692136 3.41954 0 1.888558-1.65961 3.419538-3.692137 3.419538h-2.921497"})))},e.NotificationError=function(e){var t=e.className,n=e.width,r=void 0===n?26:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 26 26"},o.createElement("g",{stroke:"none"},o.createElement("path",{fill:"#FF6C83",d:"M18.943355.651473l6.405172 6.405173c.375073.375072.585786.88378.585786 1.414213v9.05828c0 .530432-.210713 1.03914-.585786 1.414213l-6.405172 6.405172c-.375073.375073-.88378.585786-1.414214.585786H8.47086c-.530434 0-1.039142-.210712-1.414215-.585785l-6.405172-6.40517C.2764 18.56828.065687 18.059575.065687 17.52914V8.47086c0-.530434.210713-1.039142.585786-1.414215L7.056646.651473C7.431718.2764 7.940426.065687 8.47086.065687h9.05828c.530434 0 1.039142.210713 1.414215.585786z"}),o.createElement("g",{fill:"#FFF",transform:"translate(12 7)"},o.createElement("rect",{width:"2",height:"7",rx:"1"}),o.createElement("circle",{cx:"1",cy:"10.5",r:"1"}))))},e.NotificationWarning=function(e){var t=e.className,n=e.width,r=void 0===n?28:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 28 25"},o.createElement("g",{stroke:"none"},o.createElement("path",{fill:"#F6BC41",d:"M15.738773 1.693563l11.3456 19.98132c.5454.96053.20887 2.181324-.75166 2.726722-.301054.170942-.641327.26081-.98753.26081h-22.6912c-1.10457 0-2-.89543-2-2 0-.346203.089867-.686476.26081-.98753l11.3456-19.981323c.545397-.96053 1.766192-1.29706 2.72672-.75166.31377.17816.5735.43789.75166.75166z"}),o.createElement("g",{fill:"#FFF",transform:"translate(13 8)"},o.createElement("rect",{width:"2",height:"7",rx:"1"}),o.createElement("circle",{cx:"1",cy:"10.5",r:"1"}))))},e.NotificationInfo=function(e){var t=e.className,n=e.width,r=void 0===n?24:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 24 24"},o.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none"},o.createElement("circle",{cx:"12",cy:"12",r:"11.5",fill:"#00CDA3"}),o.createElement("path",{stroke:"#FFF",strokeWidth:"2",d:"M7.54 12.81l3.343 3.5 6.657-7.78",strokeLinecap:"round"})))},e.OnboardingTriangle=function(e){var t=e.className,n=e.width,r=void 0===n?12:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 12 14"},o.createElement("path",{d:"M6 4l10 12H-4",fill:"#5A5F76",fillRule:"evenodd",fillOpacity:".97",stroke:"none"}))},e.Grammarly=function(e){var n=e.className,s=e.width,u=void 0===s?"100%":s;return o.createElement(c,r.__assign({},i.classes(n,a.gIcon),{width:u,viewBox:"0 0 24 24",dontScale:!0}),o.createElement("circle",{stroke:"none",fill:"#15C39A",cx:"12",cy:"12",r:"11"}),o.createElement(t,{transform:"scale(.8) translate(6.75 6.5)"}))},e.GrammarlyInverse=function(e){var t=e.className,n=e.width,r=void 0===n?"100%":n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 64 64",dontScale:!0},o.createElement("path",{d:"M32 64a32 32 0 1 1 0-64 32 32 0 0 1 0 64zm6.3-27.66c-1.33 0-2.4 1.2-2.14 2.58.18 1.04 1.17 1.77 2.24 1.77h3.36l1.95-.26c-3.12 4.55-8.51 6.66-14.42 5.75-4.8-.76-8.95-4-10.69-8.56-3.95-10.33 3.6-20.19 13.4-20.19 5.13 0 9.6 3 12.18 6.6v.09a2.15 2.15 0 0 0 3.64-2.3h.02A18.84 18.84 0 0 0 30.7 13.2a18.95 18.95 0 0 0-17.46 17.7 18.7 18.7 0 0 0 18.79 19.79c5.64 0 10.69-2.47 14.15-6.45l-.42 2.29v2.05c0 1.07.73 2.06 1.77 2.24 1.38.26 2.58-.8 2.58-2.13V36.32H38.3v.02z",fill:"#FFF",stroke:"none"}))};var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){return o.createElement("path",r.__assign({d:"M11.18 10.273c-.593 0-1.068.53-.952 1.14.08.46.522.784.997.784h1.496l.87-.115c-1.39 2.016-3.79 2.95-6.423 2.546-2.144-.334-3.988-1.774-4.765-3.79-1.762-4.575 1.6-8.942 5.97-8.942 2.285 0 4.28 1.325 5.427 2.927v.034c.3.438.903.565 1.344.254.417-.287.533-.83.278-1.266h.01C13.846 1.39 11.006-.19 7.793.018 3.633.318.247 3.705.015 7.853c-.278 4.828 3.57 8.768 8.37 8.768 2.516 0 4.766-1.093 6.307-2.856l-.184 1.014v.91c0 .472.325.91.788.99.615.116 1.148-.356 1.148-.944V10.26H11.18v.013z",fill:"#FFF",stroke:"none",fillRule:"evenodd"},this.props))},t.size=16.5,t}(o.PureComponent);e.GPath=t,e.Rank=function(e){var t=e.className,n=e.width,r=void 0===n?29:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 29 28"},o.createElement("g",{transform:"translate(1 -1)",fill:"none",fillRule:"evenodd"},o.createElement("path",{stroke:"#B0B9DB",strokeLinecap:"round",strokeLinejoin:"round",d:"M1.73 21.53l8.02-9.18 7.65 4.6 8.02-8.42"}),o.createElement("path",{d:"M24.73 13.35c0-.2.17-.38.38-.38.22 0 .4.17.4.38v14.42c0 .2-.18.38-.4.38-.2 0-.37-.17-.37-.38V13.35zm-8 8c0-.2.17-.38.38-.38.22 0 .4.17.4.38v7.1c0 .2-.18.38-.4.38-.2 0-.37-.17-.37-.38v-7.1zm-7-4c0-.2.17-.38.38-.38.22 0 .4.17.4.38v10.92c0 .22-.18.4-.4.4-.2 0-.37-.18-.37-.4V17.35zm-8 7.85c0-.2.17-.38.38-.38.22 0 .4.17.4.38v2.9c0 .2-.18.38-.4.38-.2 0-.37-.17-.37-.38v-2.9zm0-23.85c0-.2.17-.38.38-.38.22 0 .4.17.4.38v14.42c0 .2-.18.38-.4.38-.2 0-.37-.17-.37-.38V1.35zm8 0c0-.2.17-.38.38-.38.22 0 .4.17.4.38v7.1c0 .2-.18.38-.4.38-.2 0-.37-.17-.37-.38v-7.1zm7 0c0-.2.17-.38.38-.38.22 0 .4.17.4.38v10.92c0 .22-.18.4-.4.4-.2 0-.37-.18-.37-.4V1.35zm8 0c0-.2.17-.38.38-.38.22 0 .4.17.4.38v2.9c0 .2-.18.38-.4.38-.2 0-.37-.17-.37-.38v-2.9z",fill:"#E4E6F2",fillRule:"nonzero"}),o.createElement("circle",{stroke:"#BAC1DD",fill:"#FFF",cx:"2.11",cy:"21.14",r:"1.91"}),o.createElement("circle",{stroke:"#BAC1DD",fill:"#FFF",cx:"9.75",cy:"12.73",r:"1.91"}),o.createElement("circle",{stroke:"#BAC1DD",fill:"#FFF",cx:"17.4",cy:"16.56",r:"1.91"}),o.createElement("circle",{stroke:"#BAC1DD",fill:"#FFF",cx:"24.85",cy:"8.91",r:"1.91"})))},e.Paid=function(e){var t=e.className,n=e.width,r=void 0===n?22:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 22 17"},o.createElement("path",{d:"M10.28 8h-.05c-.12 0-.23.07-.3.16l-4.8 5.28c-.18.18-.17.5 0 .66l10.1 10.1c.17.16.5.16.67 0L26 14.1c.16-.17.17-.48 0-.66l-4.8-5.28c-.1-.1-.22-.16-.36-.16H10.28zm.2.96H13l-2.05 4.32H6.55l3.94-4.32zm3.57 0h3.02l2.06 4.32H12l2.05-4.32zm4.08 0h2.5l3.94 4.32H20.2l-2.07-4.32zm-11.5 5.28h4.3l3.2 7.5-7.5-7.5zm5.33 0h7.2l-3.6 8.38-3.6-8.38zm8.24 0h4.3l-7.5 7.5 3.2-7.5z",transform:"translate(-5 -8)",fillRule:"nonzero",stroke:"none"}))},e.PaidGraident=function(e){var t=e.className,n=e.width,s=void 0===n?19:n;return o.createElement(c,r.__assign({},i.classes(t,a.clearColors),{width:s,viewBox:"0 0 19 14"}),o.createElement("linearGradient",{x1:"101.836%",y1:"141.029%",x2:"-16.028%",y2:"-53.372%",id:"gradientColor"},o.createElement("stop",{stopColor:"#fbcc3e",offset:"0%"}),o.createElement("stop",{stopColor:"#fa903b",offset:"100%"})),o.createElement("path",{d:"M5.025 5.91h-.038c-.1.01-.197.06-.264.136L.6 10.578c-.14.155-.133.42.014.567l8.655 8.652c.15.15.426.15.58 0l8.654-8.652c.146-.148.152-.412.013-.567l-4.122-4.532c-.076-.084-.19-.135-.303-.135H5.025zm.18.825H7.35l-1.765 3.708H1.83l3.376-3.708zm3.06 0h2.588l1.765 3.708H6.5l1.764-3.708zm3.503 0h2.144l3.375 3.708h-3.755l-1.764-3.708zm-9.866 4.532H5.58l2.755 6.43-6.433-6.43zm4.572 0h6.17l-3.085 7.185-3.086-7.185zm7.065 0h3.676l-6.434 6.43 2.757-6.43z",transform:"translate(-.5 -5.91)",fillRule:"nonzero",fill:"url(#gradientColor)"}))},e.CitationStyle=function(e){var t=e.className,n=e.width,r=void 0===n?8:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 8 3"},o.createElement("path",{d:"M1 0l3 3 3-3",fill:"none",fillRule:"evenodd",strokeLinecap:"round"}))},e.Insights=function(e){var t=e.className,n=e.width,r=void 0===n?32:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 32 32"},o.createElement("g",{stroke:"#A6ADC9",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},o.createElement("path",{d:"M7 22l5-8.5 7 5.5 6-11"}),o.createElement("circle",{fill:"#FFF",cx:"7",cy:"22",r:"2"}),o.createElement("circle",{fill:"#FFF",cx:"12",cy:"13.5",r:"2"}),o.createElement("circle",{fill:"#FFF",cx:"19",cy:"19",r:"2"}),o.createElement("circle",{fill:"#FFF",cx:"25",cy:"8",r:"2"})))},e.GoalsEmpty=function(e){var t=e.className,n=e.width,r=void 0===n?32:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 32 32"},o.createElement("g",{stroke:"#A6ADC9",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},o.createElement("circle",{cx:"16",cy:"16",r:"8"}),o.createElement("path",{d:"M9 27l2-4m12 4l-2-4m-5-7l9-9V4m0 3h3"}),o.createElement("circle",{cx:"16",cy:"16",r:"4"})))},e.GoalsPartial=function(e){var t=e.className,n=e.width,r=void 0===n?32:n,i=e.percentage;return o.createElement(c,{className:t,width:r,viewBox:"0 0 32 32"},o.createElement("circle",{stroke:"#F1F2FA",fill:"none",strokeWidth:"4",cx:"16",cy:"16",r:"7"}),o.createElement("circle",{stroke:"#A6ADC9",fill:"none",transform:"rotate(-90 16 16)",strokeDashoffset:2*Math.PI*7*(100-i)/100,strokeDasharray:"43.98 43.98",strokeWidth:"4",cx:"16",cy:"16",r:"7"}))},e.GoalsComplete=function(e){var t=e.className,n=e.width,r=void 0===n?32:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 32 32"},o.createElement("g",{fill:"none",fillRule:"evenodd"},o.createElement("circle",{stroke:"#F1F2FA",strokeWidth:"4",cx:"16",cy:"16",r:"7"}),o.createElement("circle",{stroke:"#A6ADC9",strokeWidth:"4",transform:"matrix(1 0 0 -1 0 32)",cx:"16",cy:"16",r:"7"}),o.createElement("path",{d:"M9 27l2-4m12 4l-2-4m-5-7l9-9V4m0 3h3",stroke:"#A6ADC9",strokeLinecap:"round",strokeLinejoin:"round"})))},e.Align=function(e){var t=e.className,n=e.width,r=void 0===n?11:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 11 15"},o.createElement("path",{transform:"translate(-11.000000, -9.000000)",strokeWidth:"1",stroke:"none",fillRule:"nonzero",d:"M16,13.7426407 L13.3535534,16.3890873 C13.1582912,16.5843494 12.8417088,16.5843494 12.6464466,16.3890873 C12.4511845,16.1938252 12.4511845,15.8772427 12.6464466,15.6819805 L16.0533009,12.2751263 C16.1356181,12.1119288 16.3047379,12 16.5,12 C16.5059664,12 16.5119084,12.0001045 16.5178242,12.0003118 C16.6516221,11.9955992 16.7869515,12.0443108 16.8890873,12.1464466 L20.4802536,15.7376129 C20.6755158,15.9328751 20.6755158,16.2494576 20.4802536,16.4447197 C20.2849915,16.6399819 19.968409,16.6399819 19.7731468,16.4447197 L17,13.6715729 L17,23.5 C17,23.7761424 16.7761424,24 16.5,24 C16.2238576,24 16,23.7761424 16,23.5 L16,13.7426407 Z M11.5,10 C11.2238576,10 11,9.77614237 11,9.5 C11,9.22385763 11.2238576,9 11.5,9 L21.5,9 C21.7761424,9 22,9.22385763 22,9.5 C22,9.77614237 21.7761424,10 21.5,10 L11.5,10 Z"}))},e.ToolbarCreate=function(e){var t=e.className,n=e.width,s=void 0===n?20:n;return o.createElement(c,r.__assign({},i.classes(t,a.toolbarIcon),{width:s,viewBox:"0 0 20 20"}),o.createElement("g",{transform:"translate(1 1)",strokeWidth:"1"},o.createElement("circle",{cx:"9",cy:"9",r:"9"}),o.createElement("path",{d:"M9 3.375v11.25M3.375 9h11.25"})))},e.ToolbarDownload=function(e){var t=e.className,n=e.width,s=void 0===n?20:n;return o.createElement(c,r.__assign({},i.classes(t,a.toolbarIcon),{width:s,viewBox:"0 0 20 19"}),o.createElement("path",{strokeWidth:"1",d:"M10 .4886514v12.02026821M5 8.06180972l4.99384055 4.98770004 5.00615945-5M1 14.0773926v1.9329052c0 1.1045695.8954305 2 2 2h14c1.1045695 0 2-.8954305 2-2V14.006229"}))},e.SearchQuestion=function(e){var t=e.className,n=e.width,r=void 0===n?18:n;return o.createElement(c,{className:t,width:r,viewBox:"0 0 18 17"},o.createElement("g",{transform:"translate(1 1)",stroke:"#A6ADC9",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},o.createElement("path",{d:"M10.9 10.9l4.972 4.972"}),o.createElement("circle",{cx:"6",cy:"6",r:"6"})))}}(t.Icon||(t.Icon={}))},574:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(122),o=n(217);t.Notifications=o;var i=n(591),s=n(309);t.Subscription=s;var a=n(125);t.Settings=a;var c=n(123);t.Account=c;var u=n(1391),l=n(1405);t.NavigationBar=l;var d=n(1397);t.Dictionary=d;var p=n(567);t.Tooltip=p.Tooltip;var h=n(1404);t.Modal=h;var f=n(598);t.NewEditor=f;var g=n(313);t.Card=g;var m=n(101);t.Alert=m;var _=n(316);t.AlertExamples=_;var y=n(560);t.Documents=y;var v=n(590);t.Apps=v;var b=n(581);t.Banners=b;var w=n(1406);t.ProofitBanners=w;var E=n(1403);t.Extension=E;var C=n(1393);t.Connectivity=C;var S=n(1395);t.WsConnectivity=S;var k=n(1407),T=n(1394),x=n(1398);t.DocumentUpload=x;var I=n(1392),A=n(1396),D=n(159),O=n(36);t.BrowserInfo=O;var N=n(3);t.defaultState={authentication:u.defaultState,userAccount:null,notifications:o.defaultState,denaliNotifications:i.defaultState,dictionary:d.defaultState,tooltip:p.Tooltip.defaultState,modal:h.defaultState,overlay:h.defaultState,newEditorPage:f.editorPageDefaultState,banner:b.defaultState,documentsPage:y.defaultState,online:!0};var M=function(){function e(e,t,n,s,a,l,g,m,_,y,v,b,w,x,O){var M=this;this._state=e,this._authApi=t,this._institutionApi=n,this._dapi=s,this.platformInfo=a,this._dictionaryApi=l,this._subscriptionApi=g,this._irbisApi=m,this._doxApi=_,this.telemetry=y,this.gnarSpec=v,this._gaClient=b,this._appConfig=w,this._router=x,this.userActivity=O,this._nullableUserAccount=this._state.lens("userAccount"),this._userAccount=this._nullableUserAccount.filter(function(e){return null!==e}).map(function(e){return e}),this.editorTsNotifications=new o.NotificationsModelImpl(this._state.lens("notifications")),this.denaliNotifications=new i.DenaliNotificationsModelImpl(this._state.lens("denaliNotifications"),this._appConfig,this._router.location),this._navigateToDocument=function(e,t){M._router.navigate(r.Router.routes.editor.href({docId:e}),t)},this.notifications=new o.ProxyShowNotificationsModel(function(){return M._router.isActive(r.Router.routes.denali_editor.href({docId:"*"})).get()?M.denaliNotifications:M.editorTsNotifications}),this.unsafeUserAccount=null,this.modal=new h.ModalDialogModelImpl(this._state.lens("modal"),this.platformInfo.os,this.notifications),this.overlay=new h.ModalOverlayModelImpl(this._state.lens("overlay")),this.authentication=new u.AuthenticationModelImpl(this._state.lens("authentication"),this._authApi,this._institutionApi,this._dapi,function(e){M._nullableUserAccount.set(e),M.unsafeUserAccount=new c.UserAccountModelImpl(M._nullableUserAccount,M._authApi,M._subscriptionApi,M._irbisApi,M._dapi,M._appConfig.funnel.subscribe,M._appConfig.funnel.upgrade,M.platformInfo.type,M.platformInfo.browser,M.telemetry,M._router,M._appConfig)},this._appConfig,this.telemetry,function(){return M._router.navigate(r.Router.routes.free.href({}))},this.modal,this.overlay,this.platformInfo.browser),this.dictionary=new d.DictionaryModelImpl(this._state.lens("dictionary"),this._dictionaryApi),this.tooltip=new p.Tooltip.Impl(this._state.lens("tooltip")),this._navigationBar=null,this._alertCache=new f.AlertCacheImpl(function(e){return e},function(e){return e},this._appConfig.alertCachePrefix,this._appConfig.alertCacheVersion),this._newEditorPage=null,this.connectivity=new C.ConnectivityModelImpl({network:new I.NetworkErrorHandler(this.notifications,this.overlay),wsProtocol:new I.WsProtocolErrorHandler(this.notifications,this.overlay),dox:new I.DoxErrorHandler(this.notifications,this.overlay,this.authentication,function(){return M._router.navigate(r.Router.routes.documents.href({}))}),wsDox:new I.DoxErrorHandler(this.notifications,this.overlay,this.authentication,function(){return M._router.navigate(r.Router.routes.documents.href({}))}),wsCapi:new I.CapiErrorHandler(this.notifications,this.overlay)}),this.networkState=new T.NetworkConnectivityModelImpl(this.connectivity,this._appConfig.api.onlineTestUrl),this.wsConnectivity=new S.WsConnectivityModelImpl(this.connectivity,{wsDox:new A.WsDoxErrorHandler(this.networkState,this.connectivity),wsCapi:new A.WsCapiErrorHandler(this.networkState,this.connectivity)}),this.selfUpdate=new k.SelfUpdateImpl(this._router,this._appConfig.selfUpdate,this.overlay,this.modal,this.connectivity.onlineState,this.userActivity),this.extension=new E.ExtensionInstallModelImpl(this.platformInfo.browser,this._appConfig.extension.chrome.installURL,this._appConfig.extension.firefox.installURL,this._appConfig.extension.firefox.iconURL,this.notifications),this.apis={dox:this._doxApi},this._userAccount.distinctUntilChanged(function(e,t){return e.userProfile.id===t.userProfile.id}).subscribe(function(e){var t=e.userProfile,n=t.id,r=t.isTest;y.setUser(n,r),M._gaClient.setUserId(n)}),this._userAccount.filter(function(e){return!0!==e.userProfile.isTest&&N.Async.isOk(e.subscription)&&e.userProfile.groups.has(c.UserGroups.PREMIUM_CONVERSION)}).distinctUntilChanged(function(e,t){return e.userProfile.id===t.userProfile.id}).subscribe(function(e){return D.PixelTracking.doTracking(e.userProfile,e.subscription.value,M._subscriptionApi,M._gaClient)})}return Object.defineProperty(e.prototype,"userAccount",{get:function(){if(!this.unsafeUserAccount)throw new N.InvariantError("User should be already authenticated");return this.unsafeUserAccount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"navigationBar",{get:function(){if(!this.unsafeUserAccount)throw new N.InvariantError("User should be already authenticated");return this._navigationBar=this._navigationBar||new l.NavigationBarModelImpl(this.unsafeUserAccount.features,this.platformInfo.browser,this.platformInfo.os)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"newEditorPage",{get:function(){if(!this.unsafeUserAccount)throw new N.InvariantError("User should be already authenticated");var e=this.unsafeUserAccount,t=e.settings,n=e.features;return this._newEditorPage=this._newEditorPage||new f.EditorPageModelImpl(this._state.lens("newEditorPage"),t,this._doxApi,this._appConfig.api.capiWsUrl,n,this.telemetry,this.modal,this._alertCache,this.wsConnectivity,this.connectivity,this.notifications)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"documentsPage",{get:function(){if(!this.unsafeUserAccount)throw new N.InvariantError("User should be already authenticated");return this._documentsPage=this._documentsPage||new y.DocumentsPageModelImpl(this._state.lens("documentsPage"),this._doxApi,this.unsafeUserAccount.settings,this._alertCache,this.platformInfo.browser,this.connectivity,this.notifications,this._navigateToDocument)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"documentUpload",{get:function(){var e=this;if(!this.unsafeUserAccount)throw new N.InvariantError("User should be already authenticated");return this._documentUpload=this._documentUpload||new x.UploadModel(function(t){return e.documentsPage.actions.uploadDocument(t)},this._navigateToDocument,this.notifications,this.telemetry)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"apps",{get:function(){if(!this.unsafeUserAccount)throw new N.InvariantError("User should be already authenticated");return new v.AppsModelImpl(this.platformInfo.browser,this.platformInfo.os,this.extension,this.unsafeUserAccount.features.desktopApps,this.telemetry)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"banners",{get:function(){if(!this.unsafeUserAccount)throw new N.InvariantError("User should be already authenticated");return new b.BannersModelImpl(this._state.lens("banner"),this.platformInfo.browser,this.platformInfo.os,this.extension,this.telemetry)},enumerable:!0,configurable:!0}),e}();t.AppModelImpl=M},575:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(551);t.CAPIClient=o.CAPIClient,t.CAPIEventHandler=o.CAPIEventHandler;var i=n(552);t.CAPIClientImpl=i.CAPIClientImpl;var s=n(1374);t.TestCAPIClientImpl=s.TestCAPIClientImpl;var a=n(553);t.ClientType=a.ClientType,r.__exportStar(n(213),t),r.__exportStar(n(1375),t);var c=n(554);t.DocumentStatistics=c.DocumentStatistics},577:function(e,t,n){"use strict";function r(e){return e===u.Proofit.JobStatus.building||e===u.Proofit.JobStatus.newJob}function o(e){return e===u.Proofit.JobStatus.completed}function i(e,t){var n=(new Date).getTime(),r={seconds:0,percentage:100};return t&&e&&t>n&&e<n?{seconds:Math.ceil((t-n)/1e3),percentage:Math.round((n-e)/(t-e)*100)}:r}Object.defineProperty(t,"__esModule",{value:!0});var s=n(13),a=n(23),c=n(7),u=n(54),l=n(75),d=n(588),p=n(950);t.isProofitInProgress=r,t.isProofitCompleted=o,t.getProofitUrl=function(e,t){return e.replace(/_docId_/,""+t)},t.DocumentProofitBadge=function(e){var t=e.proofit;if(!t)return null;switch(t.status){case u.Proofit.JobStatus.completed:return s.createElement("div",{"data-name":"proofit-completed-icon",className:p.proofitCompleted});case u.Proofit.JobStatus.cancelled:return s.createElement("div",{"data-name":"proofit-cancelled-icon",className:p.proofitCancelled});default:return null}},t.getRemainedTime=i,t.ProofitProgressBar=function(e){var t=e.remained;return s.createElement("div",{className:p.proofreading},s.createElement(c.F.div,{className:p.pgs},t.map(function(e){return s.createElement(d.ProgressBar,{key:"proofit-progressbar",remaining:e.seconds,percentage:e.percentage,countdown:"short",style:{gutter:p.gutter}})})),s.createElement("div",{className:p.pgsPlaceholder},"Proofreading..."))},t.ProofitProgress=function(e){function n(){u.set(i(r,o));var e=a.Observable.interval(1e3).subscribe(function(){u.set(i(r,o))});return{unsubscribe:function(){e.unsubscribe()}}}var r=e.submitted,o=e.due,u=c.Atom.create({seconds:0,percentage:0});return s.createElement(l.Lifecycle,{onMount:n,remountOnUpdate:!0},s.createElement(t.ProofitProgressBar,{remained:u}))}},578:function(e,t,n){"use strict";function r(e){var t=e.rawMatch;return p.invariant("synonym"!==t.action,"Do not use `getBasicAlertFields` for synonyms."),{id:t.id.toString(),title:t.title,hidden:t.hidden,category:t.category,categoryHuman:t.categoryHuman,pid:t.pid,pname:t.pname,isFree:t.free,highlightText:t.highlightText,range:{start:t.begin,end:t.end},group:h.alertGroupFromString(t.group)}}function o(e){var t=e.rawMatch,n=t.synonyms.token,r=e.value;return{id:e.id,title:n||r,hidden:!1,category:t.category,categoryHuman:t.categoryHuman,pid:t.pid,pname:t.pname,isFree:!0,highlightText:"",range:{start:e.begin,end:e.end},group:h.AlertGroup.synonym}}function i(e){var t=e.rawMatch,n=t.extra_properties||{},o=r(e);t.replacements&&t.transforms&&p.invariant(t.replacements.length===t.transforms.length,"every transform should have replacement");var i={kind:"common",details:t.details,explanation:t.explanation,examples:h.parseExamples(t.examples),todo:t.todo,replacements:(t.transforms||[]).map(function(e,n){return h.createReplacement(e,t.replacements[n])}),extraProperties:{hasAddToDictionary:!!n.add_to_dict,isDidYouMean:!!n.did_you_mean,isShowTitle:!!n.show_title,isEnhancement:!!n.enhancement,plagiarismUrl:n.url,sentence:n.sentence,priority:n.priority?parseInt(n.priority,10):0}};return Object.assign(o,i)}function s(e){var t=h.parsePlagiarism(e),n=r(e),o={kind:"plagiarism",title:t.title,description:t.description,url:t.url,reference:t.reference};return Object.assign(n,o)}function a(e){var t=e.rawMatch,n=r(e),o={details:t.details,explanation:t.explanation,examples:h.parseExamples(t.examples),todo:t.todo,kind:"enhancement",replacements:(t.replacements||[]).map(h.createSimpleReplacement),extraProperties:{isEnhancement:!0}};return Object.assign(n,o)}function c(e,t){return void 0===t&&(t=""),e&&""!==e&&""!==t&&(e.includes(t)||t.includes(e))}function u(e){var t=d.Monitoring.Logging.getLogger("grammarly_editor_alert.synonyms"),n=d.Monitoring.TimeSeries.root.getMetric("grammarly_editor_alert"),r=e.rawMatch,i=r.synonyms,s=i.token,a=i.meanings,u=e.value,l=e.badSyn,p=o(e);return l?(t.warn("Synonym error: cannot_find_synonym",{expected:e.value}),n.getCounter("synonyms.error.cannot_find_synonym").increment()):s&&s!==u?n.getCounter("synonyms.error.syn_for_wrong_token").increment():s?n.getCounter("synonyms.success").increment():n.getCounter("synonyms.error.token_missing").increment(),s&&s!==u?(t.warn(c(s,u)?"Got synonym for similar word":"Got synonym for wrong token",{expected:u,got:s}),Object.assign(p,{kind:"synonym",title:u,meanings:[],replacements:[]})):Object.assign(p,{kind:"synonym",match:e,meanings:a.map(function(e){return{title:e.meaning,replacements:e.synonyms.map(function(e){return h.createSimpleReplacement(e.derived)})}}),replacements:(r.replacements||[]).map(h.createSimpleReplacement)})}function l(e){var t=e.rawMatch;if(!t.group&&"synonyms"===t.action)return u(e);switch(h.alertGroupFromString(e.rawMatch.group)){case h.AlertGroup.plagiarism:return s(e);case h.AlertGroup.enhancement:return a(e);default:return i(e)}}Object.defineProperty(t,"__esModule",{value:!0});var d=n(6),p=n(3),h=n(101);t.getBasicAlertFields=r,t.getSynonymBasicAlertFields=o,t.isTokensSimilar=c,t.createAlert=l},580:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(23),o=function(){function e(){this.generalActivity=r.Observable.merge(r.Observable.fromEvent(window.document,"mousemove",{capture:!0,passive:!0},function(){}),r.Observable.fromEvent(window.document,"wheel",{capture:!0,passive:!0},function(){}),r.Observable.fromEvent(window.document,"keydown",{capture:!0,passive:!0},function(){}))}return e}();t.UserActivityImpl=o;!function(e){var t=function(){function e(){this.generalActivity=r.Observable.empty()}return e}();e.Mock=t}(t.UserActivity||(t.UserActivity={}))},581:function(e,t,n){"use strict";function r(e){switch(e){case"office-addin":return"officeAddin";case"desktop-mac":return"macApp";case"desktop-windows":return"winApp";case"chrome-extension":return"chromeExt";case"firefox-extension":return"firefoxExt";case"safari-extension":return"safariExt";case"edge-extension":return"edgeExt";case"referral":return"referral";case"no-referral":return"no-referral";case"campaign-end":return"campaignEnd";case"proofit-cancelled":return"proofitCancel";case"proofit-completed":return"proofitComplete";default:return o.assertNever(e)}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=n(205),s=n(123);t.defaultState={active:null},t.bannerToTracking=r;var a=function(){function e(e,t,n,r,o){this._state=e,this._browser=t,this._os=n,this._extension=r,this._telemetry=o,this.state=this._state.view()}return e.prototype.initialize=function(e,t,n){this._settings=n,this._banners=e;var r=e.later,o=r.filter(function(e){return Date.now()<=e.expire});o.length!==r.length&&this._updateBanners({later:o});var i=this._getActiveBanner(t);this._state.set({active:i}),i&&this._shown(i)},e.prototype._notHidden=function(e){return this._banners.dismiss.concat(this._banners.later.map(function(e){return e.type})).indexOf(e)<0},e.prototype._getExtensionBanner=function(){var e=this._browser+"-extension";return!i.isExtensionInstalled()&&this._notHidden(e)&&i.isBrowserHasExtension(this._browser)?e:null},e.prototype._getDesktopBanner=function(e){if("mac"!==this._os&&"windows"!==this._os)return null;var t="desktop-"+this._os;return!e.has(s.UserGroups.DESKTOP_EDITOR_INSTALLED)&&this._notHidden(t)?t:null},e.prototype._getOfficeAddinBanner=function(e){if("windows"!==this._os)return null;var t="office-addin",n=this._banners.shown.indexOf(t)>-1;return i.isAddinInstalled(e)||n||!this._notHidden(t)?null:t},e.prototype._getActiveBanner=function(e){var t=this._getExtensionBanner(),n=this._getDesktopBanner(e),r=this._getOfficeAddinBanner(e);return t||n||r||null},e.prototype._updateBanners=function(e){this._banners=Object.assign({},this._banners,e),this._settings&&this._settings.updateBanners(this._banners)},e.prototype._shown=function(e){var t=this._banners.shown;t.indexOf(e)>-1||(t.push(e),this._updateBanners({shown:t}))},e.prototype.remind=function(e){var t=this._banners.later;t.push({type:e,expire:Date.now()+864e5}),this._updateBanners({later:t}),this._state.set({active:null})},e.prototype.dismiss=function(e){var t=this._banners.dismiss;t.push(e),this._updateBanners({dismiss:t}),this._state.set({active:null})},e.prototype.cancel=function(e){this._state.set({active:null})},e.prototype._isExtension=function(e){return["chrome-extension","firefox-extension","safari-extension","edge-extension"].indexOf(e)>-1},e.prototype.install=function(e,t){var n=this;this._isExtension(e)?(this._telemetry.bannerActionClicked(r(e),t),this._extension.install().then(function(e){return e&&n._state.set({active:null})})):this._state.set({active:null})},e}();t.BannersModelImpl=a},582:function(e,t,n){"use strict";function r(e,t){return{re:new RegExp("^("+e+")([\\s\\S]*)$"),createResult:t}}function o(e){for(var t=[],n=e,r=!1,o=0,i=void 0;n.length>0;){var s=function(e){for(var t=0,n=c;t<n.length;t++){var r=n[t],o=e.match(r.re);if(null!==o)return[r.createResult(o),o[o.length-1]]}}(n);void 0===s&&(r=!0);var u=s||function(t){var n=["<span class='gr_grammar_del'>","<span class='gr_grammar_ins'>","→"].map(function(e){return t.indexOf(e)});if(n.findIndex(function(e){return 0===e})>0)throw new Error("Couldn't parse transform: "+e);if(n=n.filter(function(e){return e>0}),n.length>0){var r=Math.min.apply(Math,n);return[{type:"text",text:t.substring(0,r)},t.substring(r)]}return[{type:"text",text:t},""]}(n),l=u[0],d=u[1];i&&"text"===i.type&&"text"===l.type?i.text+=l.text:(i&&"delete"===i.type&&"insert"===l.type&&(t.push({type:"arrow"}),o++),t.push(l)),"arrow"===l.type&&o++,i=t[t.length-1],n=d}return(r||0===t.length||o>1)&&a.Monitoring.Logging.getLogger("model.editor.alert_replacement").warn("Bad parsing of transform",{transformHtml:e,transformPartCount:t.length,arrowCount:o}),t}function i(e,t){return{newText:t,transform:o(e)}}function s(e){return{newText:e,transform:[{type:"insert",text:e}]}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),c=[r("(?:\\<span class='gr_grammar_del'\\>([\\S\\s]*?)\\</span\\>)",function(e){return{type:"delete",text:e[2]}}),r("(?:\\<span class='gr_grammar_ins'\\>([\\S\\s]*?)\\</span\\>)",function(e){return{type:"insert",text:e[2]}}),r("(→)",function(e){return{type:"arrow"}}),r("([^<>→]+)",function(e){return{type:"text",text:e[1]}})];t.parseTransformHtml=o,t.createReplacement=i,t.createSimpleReplacement=s},583:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(314),o=function(){function e(e,t,n,o,i,s,a,c){this.title=e,this.todo=t,this.replacements=n,this.isActive=o,this.isApplied=i,this.extraProperties=s,this.isVisibleQuickReplacement=a,this.onReplace=c,this.isDidYouMean=!!this.extraProperties.isDidYouMean,this.hasAddToDictionary=!!this.extraProperties.hasAddToDictionary,this.isEmptyReplacement=r.isNoReplacement(this.replacements),this.replacement=r.getReplacementModel({isDidYouMean:this.isDidYouMean,isActive:this.isActive,replacements:this.replacements,todo:this.todo,onReplace:this.onReplace}),this.isLongReplacement=this.replacement.template===r.CardReplacementTemplate.long,this.isReplacementUnderTitle=this.isLongReplacement||this.replacement.template===r.CardReplacementTemplate.didYouMean,this.isHighlightTextLabel=!this.isVisibleQuickReplacement,this.isShowTextTitle=this.isEmptyReplacement||this.extraProperties.isShowTitle||this.isReplacementUnderTitle||!this.isVisibleQuickReplacement}return e}();t.CommonHeaderModelImpl=o;var i=function(){function e(e,t,n,r){this.title=e,this.isActive=t,this.isApplied=n,this._url=r,this.plagiarism={url:this._url,urlTitle:this._url.map(function(e){return e.replace(/https?:\/\//,"")}),title:this.title}}return e}();t.PlagiarismHeaderModelImpl=i;var s=function(){function e(e,t,n,r){this.title=e,this.isActive=t,this.isApplied=n,this.isVisibleQuickReplacement=r,this.isHighlightTextLabel=!this.isVisibleQuickReplacement}return e}();t.EnhancementHeaderModelImpl=s},584:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(23),o=n(212),i=n(3),s=n(300),a=n(319),c=n(76);t.testTagAuth="diagnostic_test_auth",t.testTagIrbis="diagnostic_test_irbis",t.TIMEOUT=1e4,t.successResult=function(e,t){return{status:"success",result:e,time:t?Date.now()-t:void 0}},t.failedResult=function(e,t){return{status:"failed",result:e,time:t?Date.now()-t:void 0}},t.timeoutMessage="Failed by timeout",t.timeoutLimit=function(e){return i.delay(e).then(function(){throw new r.TimeoutError})},t.CLIENT_TYPE=s.ClientType.webTest,t.CLIENT_VERSION="1",t.getFingerprints=function(){return new a.DenaliFingerprintsImpl(new o.LocalStorageGnarClient,c.appConfig)}},585:function(e,t,n){"use strict";function r(e,t){if(!e||!e.parentElement)return!1;var n=e.className;return"string"==typeof n&&n.indexOf(t)>-1||r(e.parentElement,t)}function o(e,t,n){if(!e||!e.parentElement)return!1;var r=e.attributes.getNamedItem(t);return!(!r||r.value!==n)||o(e.parentElement,t,n)}function i(e,t){if(!t)return!1;for(;t.parentNode;){if(e===t.parentNode)return!0;t=t.parentNode}return!1}function s(e,t){return{top:e.top-t.top,bottom:e.bottom-t.bottom,left:e.left-t.left,right:e.right-t.right,width:e.width,height:e.height}}function a(e,t){return{top:e.top-t.top,bottom:e.bottom-t.top,left:e.left-t.left,right:e.right-t.left,width:e.width,height:e.height}}function c(e){if(!e)throw new Error("elem should not be null or undefined");var t=e.getBoundingClientRect();if(t.width||t.height){var n=e.ownerDocument,r=window,o=n.documentElement;return{top:t.top+r.pageYOffset-o.clientTop,left:t.left+r.pageXOffset-o.clientLeft,width:t.width,height:t.height}}return t}function u(e){return void 0!==e.dataset&&"true"===e.dataset.disabled}function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(Boolean).join(" ")}Object.defineProperty(t,"__esModule",{value:!0});var d=n(36);t.hasParentWithClassName=r,t.hasParentWithAttribute=o,t.isParent=i,t.absToRelativeBuggy=s,t.absToRelative=a,t.getOffset=c;!function(e){function t(e,t){var n=t.x,r=t.y;return Math.trunc(e.top)<=Math.trunc(r)&&Math.trunc(e.bottom)>=Math.trunc(r)&&Math.trunc(e.left)<=Math.trunc(n)&&Math.trunc(e.right)>=Math.trunc(n)}e.empty={top:0,bottom:0,left:0,right:0,height:0,width:0},e.hasPoint=t}(t.Rect||(t.Rect={})),t.isDisabled=u,t.classes=l,t.svgVerticalAlignment=function(){return d.isIEorEdge()?{dy:".3125em"}:{dominantBaseline:"middle"}}},586:function(e,t,n){"use strict";function r(e,t){return{dangerouslySetInnerHTML:{__html:l.sanitize(e,t)}}}function o(e){return function(t){t.stopPropagation(),e&&e(t)}}function i(e){return function(t){t.preventDefault(),e&&e(t)}}function s(e){return{MsTransform:e,WebkitTransform:e,MozTransform:e,OTransform:e,transform:e}}function a(e,t){return void 0===t&&(t="px"),s("translateY("+e+t+")")}function c(e,t,n){return void 0===n&&(n="px"),s("translate("+e+n+", "+t+n+")")}function u(e,t){return function(n){n.propertyName===e&&t(n)}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(158);t.setInnerHTML=r,t.stopPropagation=o,t.preventDefault=i,t.transform=s,t.translateY=a,t.translate=c,t.waitTransition=u},587:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=n(3),i=n(6),s=n(14);!function(e){e.everyTrue=function(e){return e.every(Boolean)};var t=function(){function t(t,n){void 0===n&&(n=e.everyTrue);var o=this;this._name=t,this._condition=n,this._log=i.Monitoring.Logging.getLogger("rxSemaphore"),this._idx=0,this._state=r.Atom.create({}),this.state=this._state.view(function(e){return o._condition(Object.values(e))})}return t.prototype.watch=function(e,t){var n=this,r=t+"_"+this._idx++,i=e.subscribe(function(e){n._log.debug("RxSemaphore '"+n._name+"' value changed - "+r+": "+e),n._state.modify(o.ObjectUtils.modify((t={},t[r]=e,t)));var t});return o.invariant(void 0!==this._state.get()[r],"source '"+t+"' should starts with an initial value"),{unsubscribe:function(){i.unsubscribe(),n._state.modify(o.ObjectUtils.immutableModifyOption(r,s.None))}}},t}();e.Impl=t}(t.RxSemaphore||(t.RxSemaphore={}))},588:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(13),i=n(7),s=n(211),a=n(949);t.ProgressBar=function(e){var t=e.remaining,n=e.percentage,c=e.countdown,u=e.style,l=n>=100||null===t?"Coming momentarily...":s.formatTime(t,{short:"short"===c});return o.createElement("div",r.__assign({},i.classes(a.wrapper,u.wrapper||!1)),o.createElement("div",r.__assign({},i.classes(a.countdown,u.countdown||!1)),l),o.createElement("div",r.__assign({},i.classes(a.gutter,u.gutter||!1)),o.createElement("div",r.__assign({},i.classes(a.bar,u.bar||!1),{style:{width:n+"%"}}))))}},589:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(550);t.appConfig={env:"prod",logLevel:"INFO",crashLogLevel:"DEBUG",collectLogs:!0,collectCrashLogs:!0,copyLogsToConsole:!1,enableTracking:!0,alertCachePrefix:"editorTsAlertCache",alertCacheVersion:"2",userSettingsPrefix:"userSettings",userSettingsVersion:"1",defaultDialect:"american",notificationShowTimeMs:0,selfUpdate:{versionCheckInterval:59*r.min,selfUpdateDelay:12*r.hr,canReloadCheckInterval:5*r.sec,blockingModalAutoReloadDelay:1*r.min,retryFailedVersionCheckInterval:5*r.min,retryFailedVersionCheckLimit:20,debugBuildVersion:"auto",versionFilePath:"/version.json"},pingMaybeGnarDelay:1*r.hr,domains:{cookie:".grammarly.com",localServer:"denali-local.grammarly.com"},api:{authUrl:"https://auth.grammarly.com/v3",institutionUrl:"https://institution.grammarly.com",dapiUrl:"https://data.grammarly.com",doxUrl:"https://dox.grammarly.com",irbisUrl:"https://irbis.grammarly.com",subscriptionUrl:"https://subscription.grammarly.com/api/v1",capiWsUrl:"wss://capi.grammarly.com/freews",capiApiUrl:"https://capi.grammarly.com/api",gnarApi:{url:"https://gnar.grammarly.com"},felogUrl:"https://f-log-editor.grammarly.io",sumoUrl:"https://endpoint2.collection.us2.sumologic.com/receiver/v1/http/ZaVnC4dhaV0Bxac28IqT2frgzsjX7HEotu8EZEZr07YE9RWLCzrOMGwzO9aL6c_iSiidkEplFOod2igKIxz_7s2CHlXc2u-XuLpetEBK1fV6xjfN2Sw2gA==",crashLogUrl:"https://f-log-editor.grammarly.io/crash",onlineTestUrl:"/online-test.json",wsTest:"wss://wstest.grammarly.com",diagnosticsUrl:"https://diagnostics.grammarly.com",proofitResultUrl:"https://dox.grammarly.com/documents/_docId_/proofread",redirect:"https://redirect.grammarly.com/redirect"},app:{nameWeb:"editor",nameDesktop:"desktopEditor"},urls:{free:"/free"},funnel:{resetPassword:"https://www.grammarly.com/resetpassword",accountDeleted:"https://www.grammarly.com/account-deleted",subscribe:"https://www.grammarly.com/subscribe",upgrade:"https://www.grammarly.com/upgrade",signin:"https://www.grammarly.com/signin",socialSignin:"https://www.grammarly.com/share/signin",signup:"https://www.grammarly.com/signup",mainPage:"https://www.grammarly.com/",deleteSocialAccount:"https://www.grammarly.com/social/delete-account"},officeAddin:{installURL:"http://download-office.grammarly.com/latest/GrammarlyAddInSetup.exe",infoURL:"http://www.grammarly.com/office-addin/windows"},desktop:{windows:{installURL:"http://download-editor.grammarly.com/windows/GrammarlySetup.exe",infoURL:"https://www.grammarly.com/native/windows"},mac:{installURL:"http://download-editor.grammarly.com/osx/Grammarly.dmg",infoURL:"https://www.grammarly.com/native/mac"}},extension:{chrome:{installURL:"https://chrome.google.com/webstore/detail/kbfnbcaeplbcioakkpcpgfkobkghlhen",infoURL:"https://chrome.google.com/webstore/detail/grammarly-spell-checker-g/kbfnbcaeplbcioakkpcpgfkobkghlhen?hl=en"},firefox:{installURL:"https://addons.mozilla.org/firefox/downloads/latest/566314/addon-566314-latest.xpi",iconURL:"https://addons.cdn.mozilla.net/user-media/addon_icons/566/566314-32.png",infoURL:"https://addons.mozilla.org/en-US/firefox/addon/grammarly-1/"},safari:{installURL:"https://safari-extensions.apple.com/details/?id=com.grammarly.spellchecker.extension-W8F64X92K3"},edge:{installURL:"ms-windows-store://pdp?ProductId=9p59wxtbhzzm",infoURL:"https://www.microsoft.com/en-us/store/p/grammarly-for-microsoft-edge/9p59wxtbhzzm?rtc=1"}},edu:{adminPanelURL:"https://admin-panel.grammarly.com"},support:{login:"https://support.grammarly.com/login",email:"support@grammarly.com",mainPage:"https://support.grammarly.com/",newRequest:"https://support.grammarly.com/hc/en-us/requests/new",contact:"https://www.grammarly.com/contact",connectionTroubleshooting:"https://support.grammarly.com/hc/en-us/articles/115000090271-Network-configuration-blocks-Grammarly-services",emailExistsKBUrl:"https://support.grammarly.com/hc/en-us/articles/115000090791-Changing-your-email-to-an-email-that-already-exists",safariDownloadFilesKBUrl:"https://support.grammarly.com/hc/en-us/articles/360001105952",phoenixSupportUrl:"https://ecampus.phoenix.edu/common/contactus/reportProblem.jsp",phoenixWritingHelpUrl:"https://portal.phoenix.edu/social/community/support/writing",diagnosticTestPath:"/diagnostic-test?origin=editor",documentAcceptTrackedChanges:"https://support.office.com/en-us/article/Accept-tracked-changes-4838d24c-d5d1-4c6c-8e39-78b44bd2b4cc"},privacyPolicy:"https://www.grammarly.com/privacy-policy",termsOfServise:"https://www.grammarly.com/terms",gaTrackingId:"UA-6331378-16"},t.buildInfo={version:"1.0.0-dev"}},590:function(e,t,n){"use strict";function r(e){switch(e){case o.officeAddin:return"officeAddin";case o.desktopMac:return"macApp";case o.desktopWindows:return"winApp";case o.extensionChrome:return"chromeExt";case o.extensionFirefox:return"firefoxExt";case o.extensionSafari:return"safariExt";case o.extensionEdge:return"edgeExt";default:return i.assertNever(e)}}Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(3),s=n(205),a=n(123);!function(e){e[e.officeAddin=0]="officeAddin",e[e.desktopMac=1]="desktopMac",e[e.desktopWindows=2]="desktopWindows",e[e.extensionChrome=3]="extensionChrome",e[e.extensionFirefox=4]="extensionFirefox",e[e.extensionSafari=5]="extensionSafari",e[e.extensionEdge=6]="extensionEdge"}(o=t.Apps||(t.Apps={})),t.isExtension=function(e){return[o.extensionChrome,o.extensionFirefox,o.extensionSafari,o.extensionEdge].some(function(t){return t===e})};var c=function(e,t,n,r){var c=[];if(!e.size)return c;var u;if(s.isBrowserHasExtension(n))switch(n){case"chrome":u=o.extensionChrome;break;case"firefox":u=o.extensionFirefox;break;case"safari":u=o.extensionSafari;break;case"edge":u=o.extensionEdge}else u=void 0;if(u&&c.push({app:u,installed:s.isExtensionInstalled()}),r&&("windows"===t&&c.push({app:o.officeAddin,installed:i.Extension.isAddinInstalled(e)}),"windows"===t||"mac"===t)){var l="windows"===t?o.desktopWindows:o.desktopMac;c.push({app:l,installed:e.has(a.UserGroups.DESKTOP_EDITOR_INSTALLED)})}return c},u=function(){function e(e,t,n,r,o){this._browser=e,this._os=t,this._extension=n,this._showDesktopApps=r,this._telemetry=o}return e.prototype.getAppsItems=function(e){return c(e,this._os,this._browser,this._showDesktopApps.get().enabled)},e.prototype.onInstallClicked=function(e){t.isExtension(e)&&this._extension.install(),this._telemetry.installAppClicked(r(e))},e.prototype.onMoreClicked=function(e){this._telemetry.learnMoreClicked(r(e))},e}();t.AppsModelImpl=u},591:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(23),i=n(7),s=n(6),a=n(217),c=n(14);t.defaultState={items:[],importantItems:[]};var u=function(){function e(e,t,n){var r=this;this._state=e,this._appConfig=t,this.create=new a.EditorNotificationFactory,this._queue=this._state.lens("items"),this._importantQueue=this._state.lens("importantItems"),this.items=i.Atom.combine(this._queue,this._importantQueue,function(e,t){return t.length?[t[0]]:e.slice(0,3)}),this._notificationsSubs=new Map,this._nextId=function(){var e=1;return function(){return e++}}(),this.items.pairwise().subscribe(function(e){var t=e[0],n=e[1];t.filter(function(e){return-1===n.indexOf(e)}).forEach(function(e){return r._extract(e.id)}),n.filter(function(e){return-1===t.indexOf(e)}).forEach(function(e){return r._put(e)})}),n.subscribe(function(e){return r.cleanup()})}return e.prototype.show=function(e){var t=this,n=this._nextId(),o=r.__assign({},e,{id:n}),i=o.important||"error"===o.severity?this._importantQueue:this._queue;return o.exclusiveTag&&c.Option.of(i.get().find(function(e){return e.exclusiveTag===o.exclusiveTag})).forEach(function(e){return t.hide(e.id)}),i.modify(function(e){return e.concat([o])}),n},e.prototype.showMessage=function(e){return this.show(this.create.generic(e))},e.prototype.showError=function(e){return this.show(this.create.error(e))},e.prototype.hide=function(e){var t=[],n=function(n){return n.id!==e||(t.push(n),!1)};this._queue.modify(function(e){return e.filter(n)}),this._importantQueue.modify(function(e){return e.filter(n)}),t.forEach(function(e){e.dismissedHandler&&e.dismissedHandler()})},e.prototype.expire=function(e){this.hide(e)},e.prototype.cleanup=function(){this._queue.modify(this._cleanup),this._importantQueue.modify(this._cleanup)},e.prototype._cleanup=function(e){return e.filter(function(e){return e.dontRemoveOnAnyAction})},e.prototype._put=function(e){var t=this;if(s.Monitoring.Logging.getLogger("notifications").log("error"===e.type?s.Logging.LogLevel.WARN:s.Logging.LogLevel.INFO,"Notification shown: "+e.type,s.EventProps.fromAny(e)),e.denaliShowTimeMs!==1/0&&!e.important){var n=this._appConfig.notificationShowTimeMs||e.denaliShowTimeMs||7e3;this._notificationsSubs.set(e.id,o.Observable.interval(n).take(1).subscribe(function(){return t.hide(e.id)}))}},e.prototype._extract=function(e){this._notificationsSubs.has(e)&&(this._notificationsSubs.get(e).unsubscribe(),this._notificationsSubs.delete(e))},e}();t.DenaliNotificationsModelImpl=u},592:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),o=n(951),i=n(889);t.Logo=function(e){return r.createElement("div",{"data-name":"gr-logo",className:o.logoWrapper},r.createElement("a",{href:e.mainPageUrl},r.createElement("img",{className:o.logo,src:i})))}},593:function(e,t,n){"use strict";function r(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}function o(e){void 0===e&&(e=[]);var t=e.reduce(function(e,t){var n=t.group,r=t.category,o=t.categoryHuman;return e[r]?e[r].count+=1:e[r]={group:n,category:r,categoryHuman:o,count:1},e},{});return Object.keys(t).map(function(e){return t[e]})}function i(e){return c.isDesktopEditor(c.getBrowserInfo().browser)?"Desktop"+u.camelize(e):e}function s(e,t,n,s){var c=t?{page:"free",utm_medium:l,utm_source:d,utm_campaign:i(t)}:{page:"free"},u=o(n),p=u.length?{alerts:a.compressToEncodedURIComponent(JSON.stringify(u))}:{},h={app_type:"app"};return s&&(h.doc_id=s),e+"?"+r(Object.assign({},p,h,c))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(595),c=n(36),u=n(158),l="internal",d="upHook";t.getUpgradeUrl=s},596:function(e,t,n){"use strict";function r(e){if(e.enableTracking){var t=new p.CookieStorage(e.domains.cookie),n=[new p.LocalStorage,new p.MemoryStorage];return{gnarClient:i(e,g.RxFetch.request("gnar"),t,n),gaClient:new p.GoogleAnalyticsClient(e.gaTrackingId,new p.GAClientIdManager(t,n,d.Monitoring.Logging.root.getLogger("gnar.gaClientIdManager"),d.Monitoring.TimeSeries.root.getMetric("gnar.gaClientIdManager")))}}return{gnarClient:new p.LocalStorageGnarClient,gaClient:{ga:v.noop,setUserId:v.noop}}}function o(e,t){var n=c.Atom.create(f.defaultState);d.Monitoring.Logging.root.debug("Constructing model for "+e.env+" on the client");var o=r(e),i=o.gnarClient,a=o.gaClient;i.getContainerId().then(function(e){return d.Monitoring.Logging.root.context.add({containerId:e})}).catch(function(e){return d.Monitoring.Logging.root.debug("cant get containerId",e)});var p=new b.DenaliFingerprintsImpl(i,e),v=new w.UserActivityImpl,S=E?new y.GnarSpecDesktopEditor(s(i)):new y.GnarSpecEditor(s(i));return new f.AppModelImpl(n,new u.Auth(e.api.authUrl,g.RxFetch.request(u.Auth.targetTag),m.getClientType(),_.buildInfo.version,p),new u.Institution(e.api.institutionUrl,g.RxFetch.request(u.Institution.targetTag),p),new u.Dapi(e.api.dapiUrl,g.RxFetch.request(u.Dapi.targetTag)),m.getBrowserInfo(),new u.Dictionary(e.api.capiApiUrl,g.RxFetch.request(u.Dictionary.targetTag),p),new u.SubscriptionClient(e.api.subscriptionUrl,g.RxFetch.request(u.SubscriptionClient.targetTag),p),new u.Irbis(e.api.irbisUrl,g.RxFetch.request(u.Irbis.targetTag),p),new l.DoxClient(e.api.doxUrl,g.RxFetch.request(l.DoxClient.targetTag),p),new h.EditorTelemetry(i,v,C(e),e.pingMaybeGnarDelay),S,a,e,t,v)}function i(e,t,n,r){var o=e.api.gnarApi.url,i=new p.ContainerIdManager(n,r,d.Monitoring.Logging.root.getLogger("gnar.containerIdManager"),d.Monitoring.TimeSeries.root.getMetric("gnar.containerIdManager"));return new p.GnarClientImpl(o,C(e),_.buildInfo.version,t,i,d.Monitoring.Logging.root.getLogger("gnar"),d.Monitoring.TimeSeries.root.getMetric("gnar"))}function s(e){var t=d.Monitoring.Logging.root.getLogger("gnar.events");return a.__assign({},e,{track:function(n){var r=n.eventName,o=a.__rest(n,["eventName"]);return t.info(r,o),e.track(n)}})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),c=n(7),u=n(54),l=n(124),d=n(6),p=n(212),h=n(159),f=n(574),g=n(75),m=n(36),_=n(76),y=n(159),v=n(3),b=n(319),w=n(580),E=m.isDesktopEditor(m.getBrowserInfo().browser),C=function(e){return E?e.app.nameDesktop:e.app.nameWeb};t.getTrackingClients=r,t.defaultModel=o},597:function(e,t,n){"use strict";function r(e,t){return t?Math.max(e,t+u):e}function o(e){return Object.keys(e).map(function(t){return e[t]}).sort(function(e,t){return e.alert.highlightPosition.top-t.alert.highlightPosition.top||e.alert.highlightPosition.left-t.alert.highlightPosition.left||e.alert.highlightPosition.bottom-t.alert.highlightPosition.bottom||e.alert.highlightPosition.right-t.alert.highlightPosition.right||(e.alert.alert.id<t.alert.alert.id?-1:1)}).reduce(function(t,n,o,i){var s=i[o-1]&&i[o-1].alert.alert.id,a=o>0?t[s].top:0,c=o>0?e[s].cardHeight:0;return t[n.alert.alert.id]={top:r(n.alert.highlightPosition.top,a+c),height:n.cardHeight,alert:n.alert},t},{})}function i(e,t){var n={top:e.top+1,height:e.height,left:e.left-60,width:e.width};return{left:{top:t.top,left:t.left,width:t.width,height:t.height-4},right:n}}function s(e,t){return e-t+p}function a(e,t,n,r){var o=e+t+l-(n+r),i=e-d-r;return o<=0&&i>=0?0+r:i<0?i+r:(o>i?i:o)+r}function c(e,n,r,o,i){if(!n.id)return t.emptyLayout;var c=e[n.id];if(!c)return t.emptyLayout;var u="click"===n.source,l=u?a(c.top+r,c.height,o,i):void 0,d=s(c.top,c.alert.highlightPosition.top),p=u?[d,0]:[0,-d];return{scroll:l,textShift:p[0],cardsShift:p[1]}}Object.defineProperty(t,"__esModule",{value:!0});var u=8;t.getCardsPositions=o,t.calculateGuideLayout=i;var l=35,d=20,p=18;t.emptyLayout={scroll:0,textShift:0,cardsShift:0},t.getScrollToFitCard=a,t.calculateEditorLayout=c},598:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1401);t.EditorPageModel=r.EditorPageModel,t.EditorPageModelImpl=r.EditorPageModelImpl,t.editorPageDefaultState=r.defaultState;var o=n(317);t.EditorEngine=o.EditorEngine,t.EditorEngineCheckResults=o.EditorEngineCheckResults,t.EditorEngineCheckingSettings=o.EditorEngineCheckingSettings,t.CheckingStatus=o.CheckingStatus,t.AppliedAlertAction=o.AppliedAlertAction;var i=n(565);t.GrammarlyEditorEngine=i.GrammarlyEditorEngine;var s=n(564);t.EditorSession=s.EditorSession,t.EditorSessionImpl=s.EditorSessionImpl,t.EditorSessionState=s.EditorSessionState,t.editorSessionDefaultState=s.defaultState;var a=n(561);t.CheckingScores=a.CheckingScores;var c=n(307);t.GuideLayout=c.GuideLayout;var u=n(210);t.CheckingSettingsModel=u.CheckingSettingsModel,t.CheckingSettingsState=u.CheckingSettingsState,t.ChecksType=u.ChecksType,t.GenreId=u.GenreId;var l=n(307);t.CardsModel=l.CardsModel;var d=n(562);t.DocumentModel=d.DocumentModel,t.DocumentModelState=d.DocumentModelState;var p=n(563);t.DocumentContent=p.DocumentContent,t.DocumentSession=p.DocumentSession,t.DocumentSessionState=p.DocumentSessionState,t.DocumentSessionImpl=p.DocumentSessionImpl,t.ProofitState=p.ProofitState;var h=n(308);t.TextStatsModel=h.TextStatsModel,t.TextStatsModelState=h.TextStatsModelState,t.TextStatsModelImpl=h.TextStatsModelImpl,t.textStatsModelDefaultState=h.defaultState,t.TextStatsView=h.TextStatsView;var f=n(101);t.Alert=f.Alert,t.AlertExamples=f.AlertExamples,t.AlertGroup=f.AlertGroup,t.AlertId=f.AlertId,t.AlertReplacement=f.AlertReplacement,t.AlertRange=f.AlertRange,t.AlertTransform=f.AlertTransform,t.AlertTransformPart=f.AlertTransformPart,t.AlertPlagiarism=f.AlertPlagiarism;var g=n(1399);t.AlertCache=g.AlertCache,t.AlertCacheImpl=g.AlertCacheImpl},599:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(13),i=n(122),s=n(1410),a=n(870),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){return o.createElement(i.BasePage,{title:"Grammarly"},o.createElement("div",null,o.createElement("div",{className:a.pageWrapper},o.createElement("a",{className:a.link,href:this.context.appConfig.funnel.mainPage},o.createElement(s.Logo,{className:a.logoWrapper})),o.createElement("div",{className:a.contentWrapper},o.createElement("a",{className:a.link,href:this.context.appConfig.funnel.mainPage},o.createElement(s.Robot,{className:a.robot})),o.createElement("div",{className:a.text},o.createElement("div",{className:a.headOne},this.props.title),o.createElement("p",{className:a.description},this.props.description)))),o.createElement("div",{className:a.footer},o.createElement("div",{className:a.line}),o.createElement("div",{className:a.smallText},"We apologize for the inconvenience and appreciate your patience.",o.createElement("br",null),"For more information, please"," ",o.createElement("a",{className:a.contact,href:this.context.appConfig.support.newRequest},"contact support"),o.createElement(s.ArrowIcon,{className:a.contactIcon})))))},t}(i.BaseComponent);t.ErrorPage=c},600:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(156);!function(e){function t(){r.invariant(!n(),"FullStory snippet already loaded");var e=document.createElement("script");e.innerHTML=o,document.head.appendChild(e)}function n(){return void 0!==window.FS}var o="window['_fs_debug'] = true;\n  window['_fs_host'] = 'fullstory.com';\n  window['_fs_org'] = '76Y20';\n  window['_fs_namespace'] = 'FS';\n  (function(m,n,e,t,l,o,g,y){\n    if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window[\"_fs_namespace\"].');} return;}\n    g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q=[];\n    o=n.createElement(t);o.async=1;o.src='https://'+_fs_host+'/s/fs.js';\n    y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);\n    g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){g(l,v)};\n    g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};\n    g.clearUserCookie=function(c,d,i){if(!c || document.cookie.match('fs_uid=[\";\"]*\"[\";\"]*\"[\";\"]*\"')){\n      d=n.domain;while(1){n.cookie='fs_uid=;domain='+d+\n      ';path=/;expires='+new Date(0).toUTCString();i=d.indexOf('.');if(i<0)break;d=d.slice(i+1)}}};\n    })(window,document,window['_fs_namespace'],'script','user');";e.enable=t,e.isEnabled=n,e.ignoreClass="fs-hide"}(t.Fullstory||(t.Fullstory={}))},68:function(e,t,n){"use strict";function r(e){var t=this;return function(n){return i.__awaiter(t,void 0,void 0,function(){var t,r,o,s,a,c,u,l;return i.__generator(this,function(i){switch(i.label){case 0:t=[];for(r in e)t.push(r);o=0,i.label=1;case 1:return o<t.length?(s=t[o],a=e[s],u=(c=n).header,l=[s],[4,"function"==typeof a?a():a]):[3,4];case 2:u.apply(c,l.concat([i.sent()])),i.label=3;case 3:return o++,[3,1];case 4:return[2,n]}})})}}function o(e){var t=this;return function(n){return i.__awaiter(t,void 0,void 0,function(){var t,r,o,s,a,c,u,l;return i.__generator(this,function(i){switch(i.label){case 0:t=[];for(r in e)t.push(r);o=0,i.label=1;case 1:return o<t.length?(s=t[o],a=e[s],u=(c=n).cookie,l=[s],[4,"function"==typeof a?a():a]):[3,4];case 2:u.apply(c,l.concat([i.sent()])),i.label=3;case 3:return o++,[3,1];case 4:return[2,n]}})})}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),s=function(){function e(e,t){void 0===e&&(e=function(){return i.__awaiter(n,void 0,void 0,function(){return i.__generator(this,function(e){return[2,""]})})}),void 0===t&&(t=Promise.resolve("dummy_container_id"));var n=this;this.csrfToken=e,this.containerId=t}return e}();t.FingerprintsImpl=s,t.createHeadersAppender=r,t.createCookiesAppender=o},75:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(202);t.RxFetch=o.RxFetch,t.FetchType=o.FetchType;var i=n(1369);t.Lifecycle=i.Lifecycle,t.Subscription=i.Subscription;var s=n(1370);t.TextResources=s.TextResources,t.getTextResources=s.getTextResources,r.__exportStar(n(1368),t)},76:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1373);t.AppConfig=r.AppConfig,t.BuildInfo=r.BuildInfo,t.DialectString=r.DialectString;var o=window.Grammarly,i=o&&o.denali,s=i&&i.appConfig||n(589).appConfig,a=i&&i.buildInfo;t.appConfig=s||{},t.buildInfo=a||{}},77:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(3);!function(e){function t(e,t,n){if(void 0===n&&(n="backOffReconnect"),e.reconnect.reconnectCounter>s)return"error";switch(e.code){case i.NORMAL_CLOSURE:case i.GOING_AWAY:return t.canGoIdle?"idle":"backOffReconnect";case i.TOO_BIG:return"error";case i.UNEXPECTED_CONDITION:case i.CLOSED_ABNORMALLY:case i.VIOLATED_POLICY:return"backOffReconnect";case i.SERVICE_RESTART:return"fixedReconnect";case i.TOO_MANY_REQUESTS:return"backOffReconnect";case i.NOT_FOUND:case i.UNAUTHORIZED:return"error";case i.CLIENT_MALFUNCTION:case i.BLOCKED_BY_CLIENT:return!t.isInitialized&&e.reconnect.reconnectCounter>a?"error":"backOffReconnect";case i.NOT_CONSISTENT:return e.reconnect.reconnectCounter>a?"error":"backOffReconnect";case i.PRECONDITION_FAILED:return"error";default:return n}}function n(e,t){var n=this;return function(i,s,a,c){return r.__awaiter(n,void 0,void 0,function(){var n;return r.__generator(this,function(u){switch(n={code:i.code,reason:i.reason,reconnectAction:c},c){case"backOffReconnect":return e.warn("Try to reconnect",r.__assign({},n,{client:t})),[2,a(s)];case"fixedReconnect":return e.warn("Try to reconnect",r.__assign({},n,{client:t})),[2,a(i.reconnect.initialDelay)];case"error":throw e.error("Reconnect error",i.error,r.__assign({},n,{client:t})),i.error;default:o.assertNever(c)}return[2]})})}}var i;!function(e){e[e.NORMAL_CLOSURE=1e3]="NORMAL_CLOSURE",e[e.GOING_AWAY=1001]="GOING_AWAY",e[e.CLOSED_ABNORMALLY=1006]="CLOSED_ABNORMALLY",e[e.NOT_CONSISTENT=1007]="NOT_CONSISTENT",e[e.VIOLATED_POLICY=1008]="VIOLATED_POLICY",e[e.TOO_BIG=1009]="TOO_BIG",e[e.UNEXPECTED_CONDITION=1011]="UNEXPECTED_CONDITION",e[e.SERVICE_RESTART=1012]="SERVICE_RESTART",e[e.CLIENT_MALFUNCTION=3e3]="CLIENT_MALFUNCTION",e[e.BLOCKED_BY_CLIENT=4e3]="BLOCKED_BY_CLIENT",e[e.UNAUTHORIZED=4001]="UNAUTHORIZED",e[e.NOT_FOUND=4004]="NOT_FOUND",e[e.PRECONDITION_FAILED=4012]="PRECONDITION_FAILED",e[e.TOO_MANY_REQUESTS=4029]="TOO_MANY_REQUESTS",e[e.UNKNOWN_WS_ERROR=-1]="UNKNOWN_WS_ERROR"}(i=e.WsCodes||(e.WsCodes={}));!function(e){e.capi="capi",e.dox="dox"}(e.ClientType||(e.ClientType={}));var s=10,a=1;e.getReconnectAction=t,e.getDefaultReconnect=n}(t.Reconnect||(t.Reconnect={}))},83:function(e,t,n){"use strict";function r(e){return!/[!$%^&*()_+|~={}\[\]:";<>?,.\/]/g.test(e)&&e.trim().length>0}function o(e){return new RegExp(["[a-z0-9!#$%&'*+=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+=?^_`{|}~-]+)*","@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?"].join("")).test(e)}function i(e){setTimeout(e,0)}function s(e){var t,n=!1;return{get value(){return n?t:(t=e(),n=!0,t)}}}function a(e){}function c(e,t){return e||t}function u(e,t){return e+t}function l(e){return Math.trunc(Math.random()*e)}function d(e){return e.length>0}function p(e){return function(t){return t[e]}}function h(e){var t;return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t||(t=e.apply(void 0,n).then(function(e){return t=null,e}).catch(function(e){throw t=null,e}))}}function f(e){for(var t,n,r=[],o=0,i=e.length;o<i;)t=e.charCodeAt(o++),55296==(63488&t)&&o<i?(n=e.charCodeAt(o++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):r.push(t,n)):r.push(t);return r}function g(e){return new(window.WebSocket||window.MozWebSocket)(e)}function m(e,t){var n=window;n.ddebug=n.ddebug||{},n.ddebug[e]=t}function _(e,t,n){return void 0===n&&(n=function(e,t){return e===t}),v.Option.map2(e,t,n).getOrElse(e.equals(t))}function y(e,t){return e.size===t.size&&Array.from(e.values()).every(function(e){return t.has(e)})}Object.defineProperty(t,"__esModule",{value:!0});var v=n(14);t.nameValidation=r,t.emailValidation=o,t.tick=i,t.lazy=s,t.noop=a,t.or=c,t.sum=u,t.rand=l,t.notEmpty=d,t.pick=p,t.delay=function(e){return new Promise(function(t){return setTimeout(t,e)})},t.throttleByPromise=h,t.decode=f,t.getWebSocket=g,t.registerDebugHelper=m,t.isOptionsEq=_,t.isSetsEq=y;!function(e){e[e.lt=-1]="lt",e[e.eq=0]="eq",e[e.gt=1]="gt"}(t.Comparable||(t.Comparable={})),t.choose=function(e,t){return function(n){return n?e:t}}},868:function(e,t){e.exports={spinner:"_052b8d00-spinner-spinner",item:"_6f2b1cc8-spinner-item",spinner_bouncedelay:"_7de85e44-spinner-spinner_bouncedelay"}},869:function(e,t){e.exports={icon:"_becf156c-icon-icon",gIcon:"_81130db3-icon-gIcon",holder:"_bb12a8a6-icon-holder",yesIcon:"_d3bf9caf-icon-yesIcon",closeIcon:"_48f08f02-icon-closeIcon",starIcon:"_e6bfe649-icon-starIcon",clearColors:"_8ecd0cb1-icon-clearColors",toolbarIcon:"_f6b973a1-icon-toolbarIcon",exitIcon:"_5fa9b4de-icon-exitIcon"}},870:function(e,t){e.exports={pageWrapper:"_8dc192be-base-pageWrapper",logoWrapper:"_3cc5d872-base-logoWrapper",contentWrapper:"_778d2dd4-base-contentWrapper",link:"_9492b413-base-link",robot:"_e931ad67-base-robot",contact:"_5351a05d-base-contact",contactIcon:"_faa197ed-base-contactIcon",text:"_94d6d025-base-text",description:"_b8ae4199-base-description",headOne:"_72e4fd32-base-headOne",footer:"_f477f71b-base-footer",line:"_8c7c9e50-base-line",smallText:"_adac1837-base-smallText"}},871:function(e,t){},872:function(e,t){},873:function(e,t){},874:function(e,t){},875:function(e,t){},889:function(e,t,n){e.exports=n.p+"files/997ea3a3690bda688b2a6d7407bb5eb9/logo.svg"},949:function(e,t,n){n(872),e.exports=n(1444)},950:function(e,t,n){n(873),e.exports=n(1445)},951:function(e,t,n){n(874),e.exports=n(1446)},952:function(e,t,n){n(875),e.exports=n(1447)}},[1450]);